\hypertarget{group__ClassicSem}{}\section{Semaphores}
\label{group__ClassicSem}\index{Semaphores@{Semaphores}}
\subsection*{Files}
\begin{DoxyCompactItemize}
\item 
file \mbox{\hyperlink{sem_8h}{sem.\+h}}
\begin{DoxyCompactList}\small\item\em Classic Semaphores Manager A\+PI. \end{DoxyCompactList}\item 
file \mbox{\hyperlink{sem_8c}{sem.\+c}}
\begin{DoxyCompactList}\small\item\em Classic Semaphore Information with Zero Objects. \end{DoxyCompactList}\item 
file \mbox{\hyperlink{semcreate_8c}{semcreate.\+c}}
\begin{DoxyCompactList}\small\item\em rtems\+\_\+semaphore\+\_\+create \end{DoxyCompactList}\item 
file \mbox{\hyperlink{semdelete_8c}{semdelete.\+c}}
\begin{DoxyCompactList}\small\item\em R\+T\+E\+MS Delete Semaphore. \end{DoxyCompactList}\item 
file \mbox{\hyperlink{semflush_8c}{semflush.\+c}}
\begin{DoxyCompactList}\small\item\em R\+T\+E\+MS Semaphore Flush. \end{DoxyCompactList}\item 
file \mbox{\hyperlink{semident_8c}{semident.\+c}}
\begin{DoxyCompactList}\small\item\em R\+T\+E\+MS Semaphore Name to Id. \end{DoxyCompactList}\item 
file \mbox{\hyperlink{semobtain_8c}{semobtain.\+c}}
\begin{DoxyCompactList}\small\item\em R\+T\+E\+MS Obtain Semaphore. \end{DoxyCompactList}\item 
file \mbox{\hyperlink{semrelease_8c}{semrelease.\+c}}
\begin{DoxyCompactList}\small\item\em R\+T\+E\+MS Semaphore Release. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{group__ClassicStatus_ga545d41846817eaba6143d52ee4d9e9fe}{rtems\+\_\+status\+\_\+code}} \mbox{\hyperlink{group__ClassicSem_ga215ed3e3aa56c2f5204edc629985f2aa}{rtems\+\_\+semaphore\+\_\+create}} (\mbox{\hyperlink{group__ClassicTasks_ga55fb63c49f68c0cbd9bee004da15b1fd}{rtems\+\_\+name}} name, uint32\+\_\+t count, \mbox{\hyperlink{group__ClassicAttributes_gaea40313cf78ed843e09c4315d0a10f79}{rtems\+\_\+attribute}} attribute\+\_\+set, \mbox{\hyperlink{group__ClassicTasks_gaa80a0c0938307d1e99d0eb5fee765b47}{rtems\+\_\+task\+\_\+priority}} priority\+\_\+ceiling, \mbox{\hyperlink{group__ClassicTasks_gab20892b814dced7dd4e5b9bf42becd57}{rtems\+\_\+id}} $\ast$id)
\begin{DoxyCompactList}\small\item\em rtems\+\_\+semaphore\+\_\+create \end{DoxyCompactList}\item 
\mbox{\hyperlink{group__ClassicStatus_ga545d41846817eaba6143d52ee4d9e9fe}{rtems\+\_\+status\+\_\+code}} \mbox{\hyperlink{group__ClassicSem_ga45802f4b10ae5eb68cb073aa7e3f0a11}{rtems\+\_\+semaphore\+\_\+ident}} (\mbox{\hyperlink{group__ClassicTasks_ga55fb63c49f68c0cbd9bee004da15b1fd}{rtems\+\_\+name}} name, uint32\+\_\+t node, \mbox{\hyperlink{group__ClassicTasks_gab20892b814dced7dd4e5b9bf42becd57}{rtems\+\_\+id}} $\ast$id)
\begin{DoxyCompactList}\small\item\em R\+T\+E\+MS Semaphore Name to Id. \end{DoxyCompactList}\item 
\mbox{\hyperlink{group__ClassicStatus_ga545d41846817eaba6143d52ee4d9e9fe}{rtems\+\_\+status\+\_\+code}} \mbox{\hyperlink{group__ClassicSem_gabf9631b7132ab4142eff47a1502652a2}{rtems\+\_\+semaphore\+\_\+delete}} (\mbox{\hyperlink{group__ClassicTasks_gab20892b814dced7dd4e5b9bf42becd57}{rtems\+\_\+id}} id)
\begin{DoxyCompactList}\small\item\em R\+T\+E\+MS Delete Semaphore. \end{DoxyCompactList}\item 
\mbox{\hyperlink{group__ClassicStatus_ga545d41846817eaba6143d52ee4d9e9fe}{rtems\+\_\+status\+\_\+code}} \mbox{\hyperlink{group__ClassicSem_gae8c1795a85f982ceea89e7faf7d68e91}{rtems\+\_\+semaphore\+\_\+obtain}} (\mbox{\hyperlink{group__ClassicTasks_gab20892b814dced7dd4e5b9bf42becd57}{rtems\+\_\+id}} id, \mbox{\hyperlink{group__ClassicOptions_gad26685eb0e60a9650082935c31920e29}{rtems\+\_\+option}} option\+\_\+set, \mbox{\hyperlink{group__ClassicTasks_gad39c43f949683d46874e3a5586b93aee}{rtems\+\_\+interval}} timeout)
\begin{DoxyCompactList}\small\item\em R\+T\+E\+MS Obtain Semaphore. \end{DoxyCompactList}\item 
\mbox{\hyperlink{group__ClassicStatus_ga545d41846817eaba6143d52ee4d9e9fe}{rtems\+\_\+status\+\_\+code}} \mbox{\hyperlink{group__ClassicSem_gae493f08a92f963ecddc7889181808402}{rtems\+\_\+semaphore\+\_\+release}} (\mbox{\hyperlink{group__ClassicTasks_gab20892b814dced7dd4e5b9bf42becd57}{rtems\+\_\+id}} id)
\begin{DoxyCompactList}\small\item\em R\+T\+E\+MS Semaphore Release. \end{DoxyCompactList}\item 
\mbox{\hyperlink{group__ClassicStatus_ga545d41846817eaba6143d52ee4d9e9fe}{rtems\+\_\+status\+\_\+code}} \mbox{\hyperlink{group__ClassicSem_ga1d9a04c45e2e1c68fd3e19ee675e6150}{rtems\+\_\+semaphore\+\_\+flush}} (\mbox{\hyperlink{group__ClassicTasks_gab20892b814dced7dd4e5b9bf42becd57}{rtems\+\_\+id}} id)
\begin{DoxyCompactList}\small\item\em R\+T\+E\+MS Semaphore Flush. \end{DoxyCompactList}\item 
\mbox{\hyperlink{group__ClassicStatus_ga545d41846817eaba6143d52ee4d9e9fe}{rtems\+\_\+status\+\_\+code}} \mbox{\hyperlink{group__ClassicSem_gad9bd7dcfb6e233a152f02f47bbf73f50}{rtems\+\_\+semaphore\+\_\+set\+\_\+priority}} (\mbox{\hyperlink{group__ClassicTasks_gab20892b814dced7dd4e5b9bf42becd57}{rtems\+\_\+id}} semaphore\+\_\+id, \mbox{\hyperlink{group__ClassicTasks_gab20892b814dced7dd4e5b9bf42becd57}{rtems\+\_\+id}} scheduler\+\_\+id, \mbox{\hyperlink{group__ClassicTasks_gaa80a0c0938307d1e99d0eb5fee765b47}{rtems\+\_\+task\+\_\+priority}} new\+\_\+priority, \mbox{\hyperlink{group__ClassicTasks_gaa80a0c0938307d1e99d0eb5fee765b47}{rtems\+\_\+task\+\_\+priority}} $\ast$old\+\_\+priority)
\begin{DoxyCompactList}\small\item\em Sets the priority value with respect to the specified scheduler of a semaphore. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
This encapsulates functionality related to the Classic A\+PI Semaphore Manager. 

\subsection{Function Documentation}
\mbox{\Hypertarget{group__ClassicSem_ga215ed3e3aa56c2f5204edc629985f2aa}\label{group__ClassicSem_ga215ed3e3aa56c2f5204edc629985f2aa}} 
\index{Semaphores@{Semaphores}!rtems\_semaphore\_create@{rtems\_semaphore\_create}}
\index{rtems\_semaphore\_create@{rtems\_semaphore\_create}!Semaphores@{Semaphores}}
\subsubsection{\texorpdfstring{rtems\_semaphore\_create()}{rtems\_semaphore\_create()}}
{\footnotesize\ttfamily \mbox{\hyperlink{group__ClassicStatus_ga545d41846817eaba6143d52ee4d9e9fe}{rtems\+\_\+status\+\_\+code}} rtems\+\_\+semaphore\+\_\+create (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{group__ClassicTasks_ga55fb63c49f68c0cbd9bee004da15b1fd}{rtems\+\_\+name}}}]{name,  }\item[{uint32\+\_\+t}]{count,  }\item[{\mbox{\hyperlink{group__ClassicAttributes_gaea40313cf78ed843e09c4315d0a10f79}{rtems\+\_\+attribute}}}]{attribute\+\_\+set,  }\item[{\mbox{\hyperlink{group__ClassicTasks_gaa80a0c0938307d1e99d0eb5fee765b47}{rtems\+\_\+task\+\_\+priority}}}]{priority\+\_\+ceiling,  }\item[{\mbox{\hyperlink{group__ClassicTasks_gab20892b814dced7dd4e5b9bf42becd57}{rtems\+\_\+id}} $\ast$}]{id }\end{DoxyParamCaption})}



rtems\+\_\+semaphore\+\_\+create 

This routine implements the rtems\+\_\+semaphore\+\_\+create directive. The semaphore will have the name name. The starting count for the semaphore is count. The attribute\+\_\+set determines if the semaphore is global or local and the thread queue discipline. It returns the id of the created semaphore in ID. \mbox{\Hypertarget{group__ClassicSem_gabf9631b7132ab4142eff47a1502652a2}\label{group__ClassicSem_gabf9631b7132ab4142eff47a1502652a2}} 
\index{Semaphores@{Semaphores}!rtems\_semaphore\_delete@{rtems\_semaphore\_delete}}
\index{rtems\_semaphore\_delete@{rtems\_semaphore\_delete}!Semaphores@{Semaphores}}
\subsubsection{\texorpdfstring{rtems\_semaphore\_delete()}{rtems\_semaphore\_delete()}}
{\footnotesize\ttfamily \mbox{\hyperlink{group__ClassicStatus_ga545d41846817eaba6143d52ee4d9e9fe}{rtems\+\_\+status\+\_\+code}} rtems\+\_\+semaphore\+\_\+delete (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{group__ClassicTasks_gab20892b814dced7dd4e5b9bf42becd57}{rtems\+\_\+id}}}]{id }\end{DoxyParamCaption})}



R\+T\+E\+MS Delete Semaphore. 

This routine implements the rtems\+\_\+semaphore\+\_\+delete directive. The semaphore indicated by ID is deleted.


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em id} & is the semaphore id\\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Return values}
{\em This} & method returns R\+T\+E\+M\+S\+\_\+\+S\+U\+C\+C\+E\+S\+S\+F\+UL if there was not an error. Otherwise, a status code is returned indicating the source of the error. \\
\hline
\end{DoxyRetVals}
\mbox{\Hypertarget{group__ClassicSem_ga1d9a04c45e2e1c68fd3e19ee675e6150}\label{group__ClassicSem_ga1d9a04c45e2e1c68fd3e19ee675e6150}} 
\index{Semaphores@{Semaphores}!rtems\_semaphore\_flush@{rtems\_semaphore\_flush}}
\index{rtems\_semaphore\_flush@{rtems\_semaphore\_flush}!Semaphores@{Semaphores}}
\subsubsection{\texorpdfstring{rtems\_semaphore\_flush()}{rtems\_semaphore\_flush()}}
{\footnotesize\ttfamily \mbox{\hyperlink{group__ClassicStatus_ga545d41846817eaba6143d52ee4d9e9fe}{rtems\+\_\+status\+\_\+code}} rtems\+\_\+semaphore\+\_\+flush (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{group__ClassicTasks_gab20892b814dced7dd4e5b9bf42becd57}{rtems\+\_\+id}}}]{id }\end{DoxyParamCaption})}



R\+T\+E\+MS Semaphore Flush. 

This method is the implementation of the flush directive of the Semaphore Manager.

This directive allows a thread to flush the threads pending on the semaphore.


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em id} & is the semaphore id\\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Return values}
{\em R\+T\+E\+M\+S\+\_\+\+S\+U\+C\+C\+E\+S\+S\+F\+UL} & if successful or error code if unsuccessful \\
\hline
\end{DoxyRetVals}
\mbox{\Hypertarget{group__ClassicSem_ga45802f4b10ae5eb68cb073aa7e3f0a11}\label{group__ClassicSem_ga45802f4b10ae5eb68cb073aa7e3f0a11}} 
\index{Semaphores@{Semaphores}!rtems\_semaphore\_ident@{rtems\_semaphore\_ident}}
\index{rtems\_semaphore\_ident@{rtems\_semaphore\_ident}!Semaphores@{Semaphores}}
\subsubsection{\texorpdfstring{rtems\_semaphore\_ident()}{rtems\_semaphore\_ident()}}
{\footnotesize\ttfamily \mbox{\hyperlink{group__ClassicStatus_ga545d41846817eaba6143d52ee4d9e9fe}{rtems\+\_\+status\+\_\+code}} rtems\+\_\+semaphore\+\_\+ident (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{group__ClassicTasks_ga55fb63c49f68c0cbd9bee004da15b1fd}{rtems\+\_\+name}}}]{name,  }\item[{uint32\+\_\+t}]{node,  }\item[{\mbox{\hyperlink{group__ClassicTasks_gab20892b814dced7dd4e5b9bf42becd57}{rtems\+\_\+id}} $\ast$}]{id }\end{DoxyParamCaption})}



R\+T\+E\+MS Semaphore Name to Id. 

This routine implements the rtems\+\_\+semaphore\+\_\+ident directive. This directive returns the semaphore ID associated with name. If more than one semaphore is named name, then the semaphore to which the ID belongs is arbitrary. node indicates the extent of the search for the ID of the semaphore named name. The search can be limited to a particular node or allowed to encompass all nodes.


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em name} & is the user defined semaphore name \\
\hline
\mbox{\texttt{ in}}  & {\em node} & is(are) the node(s) to be searched \\
\hline
\mbox{\texttt{ in}}  & {\em id} & is the pointer to semaphore id\\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Return values}
{\em R\+T\+E\+M\+S\+\_\+\+S\+U\+C\+C\+E\+S\+S\+F\+UL} & if successful or error code if unsuccessful and $\ast$id filled in with the semaphore id \\
\hline
\end{DoxyRetVals}
\mbox{\Hypertarget{group__ClassicSem_gae8c1795a85f982ceea89e7faf7d68e91}\label{group__ClassicSem_gae8c1795a85f982ceea89e7faf7d68e91}} 
\index{Semaphores@{Semaphores}!rtems\_semaphore\_obtain@{rtems\_semaphore\_obtain}}
\index{rtems\_semaphore\_obtain@{rtems\_semaphore\_obtain}!Semaphores@{Semaphores}}
\subsubsection{\texorpdfstring{rtems\_semaphore\_obtain()}{rtems\_semaphore\_obtain()}}
{\footnotesize\ttfamily \mbox{\hyperlink{group__ClassicStatus_ga545d41846817eaba6143d52ee4d9e9fe}{rtems\+\_\+status\+\_\+code}} rtems\+\_\+semaphore\+\_\+obtain (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{group__ClassicTasks_gab20892b814dced7dd4e5b9bf42becd57}{rtems\+\_\+id}}}]{id,  }\item[{\mbox{\hyperlink{group__ClassicOptions_gad26685eb0e60a9650082935c31920e29}{rtems\+\_\+option}}}]{option\+\_\+set,  }\item[{\mbox{\hyperlink{group__ClassicTasks_gad39c43f949683d46874e3a5586b93aee}{rtems\+\_\+interval}}}]{timeout }\end{DoxyParamCaption})}



R\+T\+E\+MS Obtain Semaphore. 

This routine implements the rtems\+\_\+semaphore\+\_\+obtain directive. It attempts to obtain a unit from the semaphore associated with ID. If a unit can be allocated, the calling task will return immediately. If no unit is available, then the task may return immediately or block waiting for a unit with an optional timeout of timeout clock ticks. Whether the task blocks or returns immediately is based on the R\+T\+E\+M\+S\+\_\+\+N\+O\+\_\+\+W\+A\+IT option in the option\+\_\+set.


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em id} & is the semaphore id \\
\hline
\mbox{\texttt{ in}}  & {\em option\+\_\+set} & is the wait option \\
\hline
\mbox{\texttt{ in}}  & {\em timeout} & is the number of ticks to wait (0 means wait forever)\\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Return values}
{\em This} & method returns R\+T\+E\+M\+S\+\_\+\+S\+U\+C\+C\+E\+S\+S\+F\+UL if there was not an error. Otherwise, a status code is returned indicating the source of the error. \\
\hline
\end{DoxyRetVals}
\mbox{\Hypertarget{group__ClassicSem_gae493f08a92f963ecddc7889181808402}\label{group__ClassicSem_gae493f08a92f963ecddc7889181808402}} 
\index{Semaphores@{Semaphores}!rtems\_semaphore\_release@{rtems\_semaphore\_release}}
\index{rtems\_semaphore\_release@{rtems\_semaphore\_release}!Semaphores@{Semaphores}}
\subsubsection{\texorpdfstring{rtems\_semaphore\_release()}{rtems\_semaphore\_release()}}
{\footnotesize\ttfamily \mbox{\hyperlink{group__ClassicStatus_ga545d41846817eaba6143d52ee4d9e9fe}{rtems\+\_\+status\+\_\+code}} rtems\+\_\+semaphore\+\_\+release (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{group__ClassicTasks_gab20892b814dced7dd4e5b9bf42becd57}{rtems\+\_\+id}}}]{id }\end{DoxyParamCaption})}



R\+T\+E\+MS Semaphore Release. 

This routine implements the rtems\+\_\+semaphore\+\_\+release directive. It frees a unit to the semaphore associated with ID. If a task was blocked waiting for a unit from this semaphore, then that task will be readied and the unit given to that task. Otherwise, the unit will be returned to the semaphore. \mbox{\Hypertarget{group__ClassicSem_gad9bd7dcfb6e233a152f02f47bbf73f50}\label{group__ClassicSem_gad9bd7dcfb6e233a152f02f47bbf73f50}} 
\index{Semaphores@{Semaphores}!rtems\_semaphore\_set\_priority@{rtems\_semaphore\_set\_priority}}
\index{rtems\_semaphore\_set\_priority@{rtems\_semaphore\_set\_priority}!Semaphores@{Semaphores}}
\subsubsection{\texorpdfstring{rtems\_semaphore\_set\_priority()}{rtems\_semaphore\_set\_priority()}}
{\footnotesize\ttfamily \mbox{\hyperlink{group__ClassicStatus_ga545d41846817eaba6143d52ee4d9e9fe}{rtems\+\_\+status\+\_\+code}} rtems\+\_\+semaphore\+\_\+set\+\_\+priority (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{group__ClassicTasks_gab20892b814dced7dd4e5b9bf42becd57}{rtems\+\_\+id}}}]{semaphore\+\_\+id,  }\item[{\mbox{\hyperlink{group__ClassicTasks_gab20892b814dced7dd4e5b9bf42becd57}{rtems\+\_\+id}}}]{scheduler\+\_\+id,  }\item[{\mbox{\hyperlink{group__ClassicTasks_gaa80a0c0938307d1e99d0eb5fee765b47}{rtems\+\_\+task\+\_\+priority}}}]{new\+\_\+priority,  }\item[{\mbox{\hyperlink{group__ClassicTasks_gaa80a0c0938307d1e99d0eb5fee765b47}{rtems\+\_\+task\+\_\+priority}} $\ast$}]{old\+\_\+priority }\end{DoxyParamCaption})}



Sets the priority value with respect to the specified scheduler of a semaphore. 

The special priority value \mbox{\hyperlink{group__ClassicTasks_ga49bfed4e201631e3a17158e32dc0314b}{R\+T\+E\+M\+S\+\_\+\+C\+U\+R\+R\+E\+N\+T\+\_\+\+P\+R\+I\+O\+R\+I\+TY}} can be used to get the current priority value without changing it.

The interpretation of the priority value depends on the protocol of the semaphore object.


\begin{DoxyItemize}
\item The Multiprocessor Resource Sharing Protocol needs a ceiling priority per scheduler instance. This operation can be used to specify these priority values.
\item For the Priority Ceiling Protocol the ceiling priority is used with this operation.
\item For other protocols this operation is not defined.
\end{DoxyItemize}


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em semaphore\+\_\+id} & Identifier of the semaphore. \\
\hline
\mbox{\texttt{ in}}  & {\em scheduler\+\_\+id} & Identifier of the scheduler. \\
\hline
\mbox{\texttt{ in}}  & {\em new\+\_\+priority} & The new priority value. Use \mbox{\hyperlink{group__ClassicTasks_ga49bfed4e201631e3a17158e32dc0314b}{R\+T\+E\+M\+S\+\_\+\+C\+U\+R\+R\+E\+N\+T\+\_\+\+P\+R\+I\+O\+R\+I\+TY}} to not set a new priority and only get the current priority. \\
\hline
\mbox{\texttt{ out}}  & {\em old\+\_\+priority} & Reference to store the old priority value.\\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Return values}
{\em R\+T\+E\+M\+S\+\_\+\+S\+U\+C\+C\+E\+S\+S\+F\+UL} & Successful operation. \\
\hline
{\em R\+T\+E\+M\+S\+\_\+\+I\+N\+V\+A\+L\+I\+D\+\_\+\+ID} & Invalid semaphore or scheduler identifier. \\
\hline
{\em R\+T\+E\+M\+S\+\_\+\+I\+N\+V\+A\+L\+I\+D\+\_\+\+A\+D\+D\+R\+E\+SS} & The old priority reference is {\ttfamily N\+U\+LL}. \\
\hline
{\em R\+T\+E\+M\+S\+\_\+\+I\+N\+V\+A\+L\+I\+D\+\_\+\+P\+R\+I\+O\+R\+I\+TY} & The new priority value is invalid. \\
\hline
{\em R\+T\+E\+M\+S\+\_\+\+N\+O\+T\+\_\+\+D\+E\+F\+I\+N\+ED} & The set priority operation is not defined for the protocol of this semaphore object. \\
\hline
{\em R\+T\+E\+M\+S\+\_\+\+I\+L\+L\+E\+G\+A\+L\+\_\+\+O\+N\+\_\+\+R\+E\+M\+O\+T\+E\+\_\+\+O\+B\+J\+E\+CT} & Not supported for remote semaphores.\\
\hline
\end{DoxyRetVals}
\begin{DoxySeeAlso}{See also}
\mbox{\hyperlink{group__ClassicTasks_ga8161245a1768f06057d17eefdba253ca}{rtems\+\_\+scheduler\+\_\+ident()}} and \mbox{\hyperlink{group__ClassicTasks_gaeff43063975950a2436c0fddf96f9b33}{rtems\+\_\+task\+\_\+set\+\_\+priority()}}. 
\end{DoxySeeAlso}
