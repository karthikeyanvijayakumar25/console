\hypertarget{can_8h}{}\section{bsps/arm/lpc176x/include/bsp/can.h File Reference}
\label{can_8h}\index{bsps/arm/lpc176x/include/bsp/can.h@{bsps/arm/lpc176x/include/bsp/can.h}}


C\+AN controller for the mbed lpc1768 board.  


{\ttfamily \#include $<$bsp.\+h$>$}\newline
{\ttfamily \#include $<$bsp/io.\+h$>$}\newline
{\ttfamily \#include $<$bsp/lpc176x.\+h$>$}\newline
\subsection*{Data Structures}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{structregisters__can__message}{registers\+\_\+can\+\_\+message}}
\begin{DoxyCompactList}\small\item\em A C\+AN message represented for the registers of the device. \end{DoxyCompactList}\item 
struct \mbox{\hyperlink{structlow__level__can__message}{low\+\_\+level\+\_\+can\+\_\+message}}
\begin{DoxyCompactList}\small\item\em A C\+AN message represented with each logical parts. \end{DoxyCompactList}\item 
struct \mbox{\hyperlink{unioncan__message}{can\+\_\+message}}
\begin{DoxyCompactList}\small\item\em A C\+AN message represented of both forms. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
typedef void($\ast$ \mbox{\hyperlink{can_8h_aa87a69bb1a8f612d67c7f50ddd466f79}{lpc176x\+\_\+can\+\_\+isr}}) (\mbox{\hyperlink{can_8h_af1d9312b540cae529df65f275750a4e8}{lpc176x\+\_\+can\+\_\+number}} number)
\begin{DoxyCompactList}\small\item\em An isr for a C\+AN interrupt. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{can_8h_afe231f2a3868e61128e83fb3da79906a}\label{can_8h_afe231f2a3868e61128e83fb3da79906a}} 
typedef unsigned int \mbox{\hyperlink{can_8h_afe231f2a3868e61128e83fb3da79906a}{can\+\_\+freq}}
\begin{DoxyCompactList}\small\item\em A C\+AN frequency value. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Enumerations}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{can_8h_af1d9312b540cae529df65f275750a4e8}\label{can_8h_af1d9312b540cae529df65f275750a4e8}} 
enum \mbox{\hyperlink{can_8h_af1d9312b540cae529df65f275750a4e8}{lpc176x\+\_\+can\+\_\+number}} \{ {\bfseries C\+A\+N\+\_\+0}, 
{\bfseries C\+A\+N\+\_\+1}, 
{\bfseries C\+A\+N\+\_\+\+D\+E\+V\+I\+C\+E\+S\+\_\+\+N\+U\+M\+B\+ER}
 \}
\begin{DoxyCompactList}\small\item\em The C\+AN devices of the board. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{can_8h_a48f6392916516610c57cf75f9d047479}\label{can_8h_a48f6392916516610c57cf75f9d047479}} 
enum \mbox{\hyperlink{can_8h_a48f6392916516610c57cf75f9d047479}{can\+\_\+irq\+\_\+type}} \{ \newline
{\bfseries I\+R\+Q\+\_\+\+RX} = 0, 
{\bfseries I\+R\+Q\+\_\+\+TX}, 
{\bfseries I\+R\+Q\+\_\+\+E\+R\+R\+OR}, 
{\bfseries I\+R\+Q\+\_\+\+O\+V\+E\+R\+R\+UN}, 
\newline
{\bfseries I\+R\+Q\+\_\+\+W\+A\+K\+E\+UP}, 
{\bfseries I\+R\+Q\+\_\+\+P\+A\+S\+S\+I\+VE}, 
{\bfseries I\+R\+Q\+\_\+\+A\+RB}, 
{\bfseries I\+R\+Q\+\_\+\+B\+US}, 
\newline
{\bfseries I\+R\+Q\+\_\+\+R\+E\+A\+DY}, 
{\bfseries C\+A\+N\+\_\+\+I\+R\+Q\+\_\+\+N\+U\+M\+B\+ER}
 \}
\begin{DoxyCompactList}\small\item\em The possible interrupt sources for C\+AN. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{group__ClassicStatus_ga545d41846817eaba6143d52ee4d9e9fe}{rtems\+\_\+status\+\_\+code}} \mbox{\hyperlink{can_8h_a7cb247297cb933520e892a5cc7de43c7}{can\+\_\+open}} (\mbox{\hyperlink{can_8h_af1d9312b540cae529df65f275750a4e8}{lpc176x\+\_\+can\+\_\+number}} minor, \mbox{\hyperlink{can_8h_afe231f2a3868e61128e83fb3da79906a}{can\+\_\+freq}} freq)
\begin{DoxyCompactList}\small\item\em Opens C\+AN device. \end{DoxyCompactList}\item 
\mbox{\hyperlink{group__ClassicStatus_ga545d41846817eaba6143d52ee4d9e9fe}{rtems\+\_\+status\+\_\+code}} \mbox{\hyperlink{can_8h_a27e3621b597182460d81367fdd4b521c}{can\+\_\+close}} (\mbox{\hyperlink{can_8h_af1d9312b540cae529df65f275750a4e8}{lpc176x\+\_\+can\+\_\+number}} minor)
\begin{DoxyCompactList}\small\item\em Closes the passed C\+AN device and shut it down. \end{DoxyCompactList}\item 
\mbox{\hyperlink{group__ClassicStatus_ga545d41846817eaba6143d52ee4d9e9fe}{rtems\+\_\+status\+\_\+code}} \mbox{\hyperlink{can_8h_a50075b069fbfcb0ce72ef3b50e535b84}{can\+\_\+read}} (const \mbox{\hyperlink{can_8h_af1d9312b540cae529df65f275750a4e8}{lpc176x\+\_\+can\+\_\+number}} minor, \mbox{\hyperlink{unioncan__message}{can\+\_\+message}} $\ast$\mbox{\hyperlink{structmessage}{message}})
\begin{DoxyCompactList}\small\item\em Reads the C\+AN device. \end{DoxyCompactList}\item 
\mbox{\hyperlink{group__ClassicStatus_ga545d41846817eaba6143d52ee4d9e9fe}{rtems\+\_\+status\+\_\+code}} \mbox{\hyperlink{can_8h_a92d9588bdebf059779da0a9c0bb0f636}{can\+\_\+write}} (const \mbox{\hyperlink{can_8h_af1d9312b540cae529df65f275750a4e8}{lpc176x\+\_\+can\+\_\+number}} minor, const \mbox{\hyperlink{unioncan__message}{can\+\_\+message}} $\ast$const \mbox{\hyperlink{structmessage}{message}})
\begin{DoxyCompactList}\small\item\em Writes the passed C\+AN message into the selected C\+AN device. \end{DoxyCompactList}\item 
\mbox{\hyperlink{group__ClassicStatus_ga545d41846817eaba6143d52ee4d9e9fe}{rtems\+\_\+status\+\_\+code}} \mbox{\hyperlink{can_8h_aabdd9f78ce7049a501396c952e17e750}{can\+\_\+register\+\_\+isr}} (const \mbox{\hyperlink{can_8h_af1d9312b540cae529df65f275750a4e8}{lpc176x\+\_\+can\+\_\+number}} number, const \mbox{\hyperlink{can_8h_a48f6392916516610c57cf75f9d047479}{can\+\_\+irq\+\_\+type}} type, const \mbox{\hyperlink{can_8h_aa87a69bb1a8f612d67c7f50ddd466f79}{lpc176x\+\_\+can\+\_\+isr}} isr)
\begin{DoxyCompactList}\small\item\em Registers an isr in the driver vector, and enables the interrupt in the device. \end{DoxyCompactList}\item 
\mbox{\hyperlink{group__ClassicStatus_ga545d41846817eaba6143d52ee4d9e9fe}{rtems\+\_\+status\+\_\+code}} \mbox{\hyperlink{can_8h_ad498ae858ce30c297bc242b388cf937c}{create\+\_\+can\+\_\+message}} (\mbox{\hyperlink{unioncan__message}{can\+\_\+message}} $\ast$const \mbox{\hyperlink{structmsg}{msg}}, const int \+\_\+id, const char $\ast$const \+\_\+data, const char \+\_\+len)
\begin{DoxyCompactList}\small\item\em Creates a C\+AN message. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
C\+AN controller for the mbed lpc1768 board. 



\subsection{Typedef Documentation}
\mbox{\Hypertarget{can_8h_aa87a69bb1a8f612d67c7f50ddd466f79}\label{can_8h_aa87a69bb1a8f612d67c7f50ddd466f79}} 
\index{can.h@{can.h}!lpc176x\_can\_isr@{lpc176x\_can\_isr}}
\index{lpc176x\_can\_isr@{lpc176x\_can\_isr}!can.h@{can.h}}
\subsubsection{\texorpdfstring{lpc176x\_can\_isr}{lpc176x\_can\_isr}}
{\footnotesize\ttfamily typedef void($\ast$ lpc176x\+\_\+can\+\_\+isr) (\mbox{\hyperlink{can_8h_af1d9312b540cae529df65f275750a4e8}{lpc176x\+\_\+can\+\_\+number}} number)}



An isr for a C\+AN interrupt. 


\begin{DoxyParams}{Parameters}
{\em number} & The C\+AN which rised the interrupt. \\
\hline
\end{DoxyParams}


\subsection{Function Documentation}
\mbox{\Hypertarget{can_8h_a27e3621b597182460d81367fdd4b521c}\label{can_8h_a27e3621b597182460d81367fdd4b521c}} 
\index{can.h@{can.h}!can\_close@{can\_close}}
\index{can\_close@{can\_close}!can.h@{can.h}}
\subsubsection{\texorpdfstring{can\_close()}{can\_close()}}
{\footnotesize\ttfamily \mbox{\hyperlink{group__ClassicStatus_ga545d41846817eaba6143d52ee4d9e9fe}{rtems\+\_\+status\+\_\+code}} can\+\_\+close (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{can_8h_af1d9312b540cae529df65f275750a4e8}{lpc176x\+\_\+can\+\_\+number}}}]{minor }\end{DoxyParamCaption})}



Closes the passed C\+AN device and shut it down. 


\begin{DoxyParams}{Parameters}
{\em minor} & The device to close. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
R\+T\+E\+M\+S\+\_\+\+S\+U\+C\+C\+E\+S\+S\+F\+UL if ok, R\+T\+E\+M\+S\+\_\+\+I\+N\+V\+A\+L\+I\+D\+\_\+\+N\+U\+M\+B\+ER for a bad parameter. 
\end{DoxyReturn}
\mbox{\Hypertarget{can_8h_a7cb247297cb933520e892a5cc7de43c7}\label{can_8h_a7cb247297cb933520e892a5cc7de43c7}} 
\index{can.h@{can.h}!can\_open@{can\_open}}
\index{can\_open@{can\_open}!can.h@{can.h}}
\subsubsection{\texorpdfstring{can\_open()}{can\_open()}}
{\footnotesize\ttfamily \mbox{\hyperlink{group__ClassicStatus_ga545d41846817eaba6143d52ee4d9e9fe}{rtems\+\_\+status\+\_\+code}} can\+\_\+open (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{can_8h_af1d9312b540cae529df65f275750a4e8}{lpc176x\+\_\+can\+\_\+number}}}]{minor,  }\item[{\mbox{\hyperlink{can_8h_afe231f2a3868e61128e83fb3da79906a}{can\+\_\+freq}}}]{freq }\end{DoxyParamCaption})}



Opens C\+AN device. 

It enables the module and gives it a clock, sets the pins, disables the interrupts, sets the frequency and bypasses the acceptance filter.


\begin{DoxyParams}{Parameters}
{\em minor} & The device to open. \\
\hline
{\em freq} & The desired frequency. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
R\+T\+E\+M\+S\+\_\+\+S\+U\+C\+C\+E\+S\+F\+UL on success. 
\end{DoxyReturn}
\mbox{\Hypertarget{can_8h_a50075b069fbfcb0ce72ef3b50e535b84}\label{can_8h_a50075b069fbfcb0ce72ef3b50e535b84}} 
\index{can.h@{can.h}!can\_read@{can\_read}}
\index{can\_read@{can\_read}!can.h@{can.h}}
\subsubsection{\texorpdfstring{can\_read()}{can\_read()}}
{\footnotesize\ttfamily \mbox{\hyperlink{group__ClassicStatus_ga545d41846817eaba6143d52ee4d9e9fe}{rtems\+\_\+status\+\_\+code}} can\+\_\+read (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{can_8h_af1d9312b540cae529df65f275750a4e8}{lpc176x\+\_\+can\+\_\+number}}}]{minor,  }\item[{\mbox{\hyperlink{unioncan__message}{can\+\_\+message}} $\ast$}]{message }\end{DoxyParamCaption})}



Reads the C\+AN device. 


\begin{DoxyParams}{Parameters}
{\em minor} & The C\+AN device to read. \\
\hline
{\em message} & The read message. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
R\+T\+E\+M\+S\+\_\+\+S\+U\+C\+C\+E\+S\+S\+F\+UL if read ok, R\+T\+E\+M\+S\+\_\+\+I\+O\+\_\+\+E\+R\+R\+OR otherwise. 
\end{DoxyReturn}
\mbox{\Hypertarget{can_8h_aabdd9f78ce7049a501396c952e17e750}\label{can_8h_aabdd9f78ce7049a501396c952e17e750}} 
\index{can.h@{can.h}!can\_register\_isr@{can\_register\_isr}}
\index{can\_register\_isr@{can\_register\_isr}!can.h@{can.h}}
\subsubsection{\texorpdfstring{can\_register\_isr()}{can\_register\_isr()}}
{\footnotesize\ttfamily \mbox{\hyperlink{group__ClassicStatus_ga545d41846817eaba6143d52ee4d9e9fe}{rtems\+\_\+status\+\_\+code}} can\+\_\+register\+\_\+isr (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{can_8h_af1d9312b540cae529df65f275750a4e8}{lpc176x\+\_\+can\+\_\+number}}}]{number,  }\item[{const \mbox{\hyperlink{can_8h_a48f6392916516610c57cf75f9d047479}{can\+\_\+irq\+\_\+type}}}]{type,  }\item[{const \mbox{\hyperlink{can_8h_aa87a69bb1a8f612d67c7f50ddd466f79}{lpc176x\+\_\+can\+\_\+isr}}}]{isr }\end{DoxyParamCaption})}



Registers an isr in the driver vector, and enables the interrupt in the device. 


\begin{DoxyParams}{Parameters}
{\em number} & The C\+AN device to set \\
\hline
{\em type} & The interrupt type. \\
\hline
{\em isr} & The isr to register. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
R\+T\+E\+M\+S\+\_\+\+S\+U\+C\+C\+E\+S\+S\+F\+UL if ok R\+T\+E\+M\+S\+\_\+\+I\+N\+V\+A\+L\+I\+D\+\_\+\+N\+U\+M\+B\+ER otherwise. 
\end{DoxyReturn}
\mbox{\Hypertarget{can_8h_a92d9588bdebf059779da0a9c0bb0f636}\label{can_8h_a92d9588bdebf059779da0a9c0bb0f636}} 
\index{can.h@{can.h}!can\_write@{can\_write}}
\index{can\_write@{can\_write}!can.h@{can.h}}
\subsubsection{\texorpdfstring{can\_write()}{can\_write()}}
{\footnotesize\ttfamily \mbox{\hyperlink{group__ClassicStatus_ga545d41846817eaba6143d52ee4d9e9fe}{rtems\+\_\+status\+\_\+code}} can\+\_\+write (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{can_8h_af1d9312b540cae529df65f275750a4e8}{lpc176x\+\_\+can\+\_\+number}}}]{minor,  }\item[{const \mbox{\hyperlink{unioncan__message}{can\+\_\+message}} $\ast$const}]{message }\end{DoxyParamCaption})}



Writes the passed C\+AN message into the selected C\+AN device. 


\begin{DoxyParams}{Parameters}
{\em minor} & The device to write. \\
\hline
{\em message} & The message to write. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
R\+T\+E\+M\+S\+\_\+\+S\+U\+C\+C\+E\+S\+F\+UL if write ok. R\+T\+E\+M\+S\+\_\+\+I\+O\+\_\+\+E\+R\+R\+OR otherwise. 
\end{DoxyReturn}
\mbox{\Hypertarget{can_8h_ad498ae858ce30c297bc242b388cf937c}\label{can_8h_ad498ae858ce30c297bc242b388cf937c}} 
\index{can.h@{can.h}!create\_can\_message@{create\_can\_message}}
\index{create\_can\_message@{create\_can\_message}!can.h@{can.h}}
\subsubsection{\texorpdfstring{create\_can\_message()}{create\_can\_message()}}
{\footnotesize\ttfamily \mbox{\hyperlink{group__ClassicStatus_ga545d41846817eaba6143d52ee4d9e9fe}{rtems\+\_\+status\+\_\+code}} create\+\_\+can\+\_\+message (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{unioncan__message}{can\+\_\+message}} $\ast$const}]{msg,  }\item[{const int}]{\+\_\+id,  }\item[{const char $\ast$const}]{\+\_\+data,  }\item[{const char}]{\+\_\+len }\end{DoxyParamCaption})}



Creates a C\+AN message. 

\mbox{[}long description\mbox{]}


\begin{DoxyParams}{Parameters}
{\em msg} & The created message. \\
\hline
{\em \+\_\+id} & The can id for the message. \\
\hline
{\em \+\_\+data} & The data of the message. \\
\hline
{\em \+\_\+len} & The length of the message. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
R\+T\+E\+M\+S\+\_\+\+S\+U\+C\+C\+E\+S\+F\+UL if created, R\+T\+E\+M\+S\+\_\+\+I\+N\+V\+A\+L\+I\+D\+\_\+\+N\+U\+M\+B\+ER otherwise. 
\end{DoxyReturn}
