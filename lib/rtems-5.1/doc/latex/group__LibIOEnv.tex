\hypertarget{group__LibIOEnv}{}\section{User Environment}
\label{group__LibIOEnv}\index{User Environment@{User Environment}}


Provides a P\+O\+S\+IX like user environment for tasks.  


\subsection*{Files}
\begin{DoxyCompactItemize}
\item 
file \mbox{\hyperlink{userenv_8h}{userenv.\+h}}
\begin{DoxyCompactList}\small\item\em User Environment Support. \end{DoxyCompactList}\item 
file \mbox{\hyperlink{privateenv_8c}{privateenv.\+c}}
\begin{DoxyCompactList}\small\item\em Instantiate a Private User Environment. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Data Structures}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{structrtems__user__env__t}{rtems\+\_\+user\+\_\+env\+\_\+t}}
\begin{DoxyCompactList}\small\item\em User environment. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{group__LibIOEnv_gaf3b7f7833ae69cac7adf84f5973715fe}\label{group__LibIOEnv_gaf3b7f7833ae69cac7adf84f5973715fe}} 
\#define {\bfseries L\+O\+G\+I\+N\+\_\+\+N\+A\+M\+E\+\_\+\+M\+AX}~9
\item 
\mbox{\Hypertarget{group__LibIOEnv_ga80974059633963836d87937ad5ca4c03}\label{group__LibIOEnv_ga80974059633963836d87937ad5ca4c03}} 
\#define {\bfseries rtems\+\_\+current\+\_\+user\+\_\+env}~\mbox{\hyperlink{group__LibIOEnv_gae0ea3b12bb890c1f272b6d049a486160}{rtems\+\_\+current\+\_\+user\+\_\+env\+\_\+get}}()
\item 
\mbox{\Hypertarget{group__LibIOEnv_gac8997d6970f349dfc2bb75994ff94dce}\label{group__LibIOEnv_gac8997d6970f349dfc2bb75994ff94dce}} 
\#define {\bfseries rtems\+\_\+filesystem\+\_\+current}~(rtems\+\_\+current\+\_\+user\+\_\+env-\/$>$current\+\_\+directory)
\item 
\mbox{\Hypertarget{group__LibIOEnv_ga55916fd629c21ee981c970a6b524fdde}\label{group__LibIOEnv_ga55916fd629c21ee981c970a6b524fdde}} 
\#define {\bfseries rtems\+\_\+filesystem\+\_\+root}~(rtems\+\_\+current\+\_\+user\+\_\+env-\/$>$root\+\_\+directory)
\item 
\mbox{\Hypertarget{group__LibIOEnv_gaa8c61c8b38f039f9e01cc91da158ccab}\label{group__LibIOEnv_gaa8c61c8b38f039f9e01cc91da158ccab}} 
\#define {\bfseries rtems\+\_\+filesystem\+\_\+umask}~(rtems\+\_\+current\+\_\+user\+\_\+env-\/$>$\mbox{\hyperlink{umask_8c_a29eb55ccd23d386835c640026954ac93}{umask}})
\item 
\mbox{\Hypertarget{group__LibIOEnv_ga7d19d804976ab7a6b8fbf7615f752960}\label{group__LibIOEnv_ga7d19d804976ab7a6b8fbf7615f752960}} 
\#define {\bfseries \+\_\+\+P\+O\+S\+I\+X\+\_\+types\+\_\+\+Uid}~(rtems\+\_\+current\+\_\+user\+\_\+env-\/$>$uid)
\item 
\mbox{\Hypertarget{group__LibIOEnv_ga3fb39fb00ec0d020acec7c8fb2a5d3c3}\label{group__LibIOEnv_ga3fb39fb00ec0d020acec7c8fb2a5d3c3}} 
\#define {\bfseries \+\_\+\+P\+O\+S\+I\+X\+\_\+types\+\_\+\+Gid}~(rtems\+\_\+current\+\_\+user\+\_\+env-\/$>$gid)
\item 
\mbox{\Hypertarget{group__LibIOEnv_ga4df9de9abb57693ec7644bd62181a62b}\label{group__LibIOEnv_ga4df9de9abb57693ec7644bd62181a62b}} 
\#define {\bfseries \+\_\+\+P\+O\+S\+I\+X\+\_\+types\+\_\+\+Euid}~(rtems\+\_\+current\+\_\+user\+\_\+env-\/$>$euid)
\item 
\mbox{\Hypertarget{group__LibIOEnv_ga7f64205904a3de49f010515dd02cee9a}\label{group__LibIOEnv_ga7f64205904a3de49f010515dd02cee9a}} 
\#define {\bfseries \+\_\+\+P\+O\+S\+I\+X\+\_\+types\+\_\+\+Egid}~(rtems\+\_\+current\+\_\+user\+\_\+env-\/$>$egid)
\item 
\mbox{\Hypertarget{group__LibIOEnv_ga20e68f243902ace9fb67097381034db4}\label{group__LibIOEnv_ga20e68f243902ace9fb67097381034db4}} 
\#define {\bfseries \+\_\+\+P\+O\+S\+I\+X\+\_\+types\+\_\+\+Getlogin\+\_\+buffer}~(rtems\+\_\+current\+\_\+user\+\_\+env-\/$>$login\+\_\+buffer)
\end{DoxyCompactItemize}
\subsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{group__LibIOEnv_ga35f3d5ba64979aa819534ff684974df4}\label{group__LibIOEnv_ga35f3d5ba64979aa819534ff684974df4}} 
typedef struct \mbox{\hyperlink{structrtems__user__env__t}{rtems\+\_\+user\+\_\+env\+\_\+t}} {\bfseries rtems\+\_\+user\+\_\+env\+\_\+t}
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{structrtems__user__env__t}{rtems\+\_\+user\+\_\+env\+\_\+t}} $\ast$ \mbox{\hyperlink{group__LibIOEnv_gae0ea3b12bb890c1f272b6d049a486160}{rtems\+\_\+current\+\_\+user\+\_\+env\+\_\+get}} (void)
\begin{DoxyCompactList}\small\item\em Fetch the pointer to the current user environment. \end{DoxyCompactList}\item 
\mbox{\hyperlink{group__ClassicStatus_ga545d41846817eaba6143d52ee4d9e9fe}{rtems\+\_\+status\+\_\+code}} \mbox{\hyperlink{group__LibIOEnv_ga2026f741b68624a75d0cfc1957f75f62}{rtems\+\_\+libio\+\_\+set\+\_\+private\+\_\+env}} (void)
\begin{DoxyCompactList}\small\item\em Creates a private environment. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{group__LibIOEnv_ga549907ac3a4bf0a2434bc55dda57b5ef}{rtems\+\_\+libio\+\_\+use\+\_\+global\+\_\+env}} (void)
\begin{DoxyCompactList}\small\item\em Use the global environment. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{group__LibIOEnv_ga24e63d00d8f74b3bf2a6d86f0b26a826}{rtems\+\_\+current\+\_\+user\+\_\+env\+\_\+getgroups}} (void)
\begin{DoxyCompactList}\small\item\em Gets the supplementary group I\+Ds using the current user ID and updates the table of supplementary group I\+Ds in the current user environment. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{group__LibIOEnv_gaf6306cec81547b5129203e798117d18b}\label{group__LibIOEnv_gaf6306cec81547b5129203e798117d18b}} 
\mbox{\hyperlink{structrtems__user__env__t}{rtems\+\_\+user\+\_\+env\+\_\+t}} {\bfseries rtems\+\_\+global\+\_\+user\+\_\+env}
\end{DoxyCompactItemize}


\subsection{Detailed Description}
Provides a P\+O\+S\+IX like user environment for tasks. 



\subsection{Function Documentation}
\mbox{\Hypertarget{group__LibIOEnv_gae0ea3b12bb890c1f272b6d049a486160}\label{group__LibIOEnv_gae0ea3b12bb890c1f272b6d049a486160}} 
\index{User Environment@{User Environment}!rtems\_current\_user\_env\_get@{rtems\_current\_user\_env\_get}}
\index{rtems\_current\_user\_env\_get@{rtems\_current\_user\_env\_get}!User Environment@{User Environment}}
\subsubsection{\texorpdfstring{rtems\_current\_user\_env\_get()}{rtems\_current\_user\_env\_get()}}
{\footnotesize\ttfamily \mbox{\hyperlink{structrtems__user__env__t}{rtems\+\_\+user\+\_\+env\+\_\+t}}$\ast$ rtems\+\_\+current\+\_\+user\+\_\+env\+\_\+get (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Fetch the pointer to the current user environment. 

If the task has a private user environment the pointer to it will be returned. Otherwise the pointer to rtems\+\_\+global\+\_\+user\+\_\+env will be returned. \mbox{\Hypertarget{group__LibIOEnv_ga24e63d00d8f74b3bf2a6d86f0b26a826}\label{group__LibIOEnv_ga24e63d00d8f74b3bf2a6d86f0b26a826}} 
\index{User Environment@{User Environment}!rtems\_current\_user\_env\_getgroups@{rtems\_current\_user\_env\_getgroups}}
\index{rtems\_current\_user\_env\_getgroups@{rtems\_current\_user\_env\_getgroups}!User Environment@{User Environment}}
\subsubsection{\texorpdfstring{rtems\_current\_user\_env\_getgroups()}{rtems\_current\_user\_env\_getgroups()}}
{\footnotesize\ttfamily void rtems\+\_\+current\+\_\+user\+\_\+env\+\_\+getgroups (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Gets the supplementary group I\+Ds using the current user ID and updates the table of supplementary group I\+Ds in the current user environment. 

In case of an error, the count of supplementary group I\+Ds is set to zero. \mbox{\Hypertarget{group__LibIOEnv_ga2026f741b68624a75d0cfc1957f75f62}\label{group__LibIOEnv_ga2026f741b68624a75d0cfc1957f75f62}} 
\index{User Environment@{User Environment}!rtems\_libio\_set\_private\_env@{rtems\_libio\_set\_private\_env}}
\index{rtems\_libio\_set\_private\_env@{rtems\_libio\_set\_private\_env}!User Environment@{User Environment}}
\subsubsection{\texorpdfstring{rtems\_libio\_set\_private\_env()}{rtems\_libio\_set\_private\_env()}}
{\footnotesize\ttfamily \mbox{\hyperlink{group__ClassicStatus_ga545d41846817eaba6143d52ee4d9e9fe}{rtems\+\_\+status\+\_\+code}} rtems\+\_\+libio\+\_\+set\+\_\+private\+\_\+env (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Creates a private environment. 

If the task has already a private environment nothing will be changed. This function must be called from normal thread context and may block on a mutex. Thread dispatching is disabled to protect some critical sections.

The private environment internally uses a P\+O\+S\+IX key. The key is added to the configuration implicitly. But for each thread that uses a private environment a key value pair has to be configured by the application. If only the global environment is used there is no need to configure a key value pair.


\begin{DoxyRetVals}{Return values}
{\em R\+T\+E\+M\+S\+\_\+\+S\+U\+C\+C\+E\+S\+S\+F\+UL} & Successful operation. \\
\hline
{\em R\+T\+E\+M\+S\+\_\+\+N\+O\+\_\+\+M\+E\+M\+O\+RY} & Not enough memory. \\
\hline
{\em R\+T\+E\+M\+S\+\_\+\+U\+N\+S\+A\+T\+I\+S\+F\+I\+ED} & Cloning of the current environment failed. \\
\hline
{\em R\+T\+E\+M\+S\+\_\+\+T\+O\+O\+\_\+\+M\+A\+NY} & Cannot register the private environment. \\
\hline
\end{DoxyRetVals}
\mbox{\Hypertarget{group__LibIOEnv_ga549907ac3a4bf0a2434bc55dda57b5ef}\label{group__LibIOEnv_ga549907ac3a4bf0a2434bc55dda57b5ef}} 
\index{User Environment@{User Environment}!rtems\_libio\_use\_global\_env@{rtems\_libio\_use\_global\_env}}
\index{rtems\_libio\_use\_global\_env@{rtems\_libio\_use\_global\_env}!User Environment@{User Environment}}
\subsubsection{\texorpdfstring{rtems\_libio\_use\_global\_env()}{rtems\_libio\_use\_global\_env()}}
{\footnotesize\ttfamily void rtems\+\_\+libio\+\_\+use\+\_\+global\+\_\+env (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Use the global environment. 

A private environment will be released. This function may be called from every thread context. Thread dispatching is disabled to protect the critical sections. 