\hypertarget{group__rtems__sparse__disk}{}\section{Sparse Disk Device}
\label{group__rtems__sparse__disk}\index{Sparse Disk Device@{Sparse Disk Device}}
\subsection*{Files}
\begin{DoxyCompactItemize}
\item 
file \mbox{\hyperlink{sparse-disk_8h}{sparse-\/disk.\+h}}
\begin{DoxyCompactList}\small\item\em Sparse disk block device A\+PI. \end{DoxyCompactList}\item 
file \mbox{\hyperlink{sparse-disk_8c}{sparse-\/disk.\+c}}
\begin{DoxyCompactList}\small\item\em Sparse disk block device implementation. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Data Structures}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{structrtems__sparse__disk__key}{rtems\+\_\+sparse\+\_\+disk\+\_\+key}}
\item 
struct \mbox{\hyperlink{structrtems__sparse__disk}{rtems\+\_\+sparse\+\_\+disk}}
\end{DoxyCompactItemize}
\subsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{group__rtems__sparse__disk_ga388a563eaac0a9ef73b4024fa22034cd}\label{group__rtems__sparse__disk_ga388a563eaac0a9ef73b4024fa22034cd}} 
typedef struct \mbox{\hyperlink{structrtems__sparse__disk}{rtems\+\_\+sparse\+\_\+disk}} {\bfseries rtems\+\_\+sparse\+\_\+disk}
\item 
\mbox{\Hypertarget{group__rtems__sparse__disk_gae88d27a1876f9afe62ca9e81f48e3d9e}\label{group__rtems__sparse__disk_gae88d27a1876f9afe62ca9e81f48e3d9e}} 
typedef void($\ast$ {\bfseries rtems\+\_\+sparse\+\_\+disk\+\_\+delete\+\_\+handler}) (\mbox{\hyperlink{structrtems__sparse__disk}{rtems\+\_\+sparse\+\_\+disk}} $\ast$sparse\+\_\+disk)
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{group__ClassicStatus_ga545d41846817eaba6143d52ee4d9e9fe}{rtems\+\_\+status\+\_\+code}} \mbox{\hyperlink{group__rtems__sparse__disk_ga520bd068988717a02e0832c115760ef4}{rtems\+\_\+sparse\+\_\+disk\+\_\+create\+\_\+and\+\_\+register}} (const char $\ast$device\+\_\+file\+\_\+name, uint32\+\_\+t media\+\_\+block\+\_\+size, \mbox{\hyperlink{group__rtems__disk_ga5fbcfd40b657bff6c54d9e393fab3274}{rtems\+\_\+blkdev\+\_\+bnum}} blocks\+\_\+with\+\_\+buffer, \mbox{\hyperlink{group__rtems__disk_ga5fbcfd40b657bff6c54d9e393fab3274}{rtems\+\_\+blkdev\+\_\+bnum}} media\+\_\+block\+\_\+count, uint8\+\_\+t fill\+\_\+pattern)
\begin{DoxyCompactList}\small\item\em Creates and registers a sparse disk. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{group__rtems__sparse__disk_gae6a3909209876365980517aa319c7f87}{rtems\+\_\+sparse\+\_\+disk\+\_\+free}} (\mbox{\hyperlink{structrtems__sparse__disk}{rtems\+\_\+sparse\+\_\+disk}} $\ast$sparse\+\_\+disk)
\begin{DoxyCompactList}\small\item\em Frees a sparse disk. \end{DoxyCompactList}\item 
\mbox{\hyperlink{group__ClassicStatus_ga545d41846817eaba6143d52ee4d9e9fe}{rtems\+\_\+status\+\_\+code}} \mbox{\hyperlink{group__rtems__sparse__disk_ga9c0612d8fec13b50359553e5efa15265}{rtems\+\_\+sparse\+\_\+disk\+\_\+register}} (const char $\ast$device\+\_\+file\+\_\+name, \mbox{\hyperlink{structrtems__sparse__disk}{rtems\+\_\+sparse\+\_\+disk}} $\ast$sparse\+\_\+disk, uint32\+\_\+t media\+\_\+block\+\_\+size, \mbox{\hyperlink{group__rtems__disk_ga5fbcfd40b657bff6c54d9e393fab3274}{rtems\+\_\+blkdev\+\_\+bnum}} blocks\+\_\+with\+\_\+buffer, \mbox{\hyperlink{group__rtems__disk_ga5fbcfd40b657bff6c54d9e393fab3274}{rtems\+\_\+blkdev\+\_\+bnum}} media\+\_\+block\+\_\+count, uint8\+\_\+t fill\+\_\+pattern, rtems\+\_\+sparse\+\_\+disk\+\_\+delete\+\_\+handler sparse\+\_\+disk\+\_\+delete)
\begin{DoxyCompactList}\small\item\em Initializes and registers a sparse disk. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}


\subsection{Function Documentation}
\mbox{\Hypertarget{group__rtems__sparse__disk_ga520bd068988717a02e0832c115760ef4}\label{group__rtems__sparse__disk_ga520bd068988717a02e0832c115760ef4}} 
\index{Sparse Disk Device@{Sparse Disk Device}!rtems\_sparse\_disk\_create\_and\_register@{rtems\_sparse\_disk\_create\_and\_register}}
\index{rtems\_sparse\_disk\_create\_and\_register@{rtems\_sparse\_disk\_create\_and\_register}!Sparse Disk Device@{Sparse Disk Device}}
\subsubsection{\texorpdfstring{rtems\_sparse\_disk\_create\_and\_register()}{rtems\_sparse\_disk\_create\_and\_register()}}
{\footnotesize\ttfamily \mbox{\hyperlink{group__ClassicStatus_ga545d41846817eaba6143d52ee4d9e9fe}{rtems\+\_\+status\+\_\+code}} rtems\+\_\+sparse\+\_\+disk\+\_\+create\+\_\+and\+\_\+register (\begin{DoxyParamCaption}\item[{const char $\ast$}]{device\+\_\+file\+\_\+name,  }\item[{uint32\+\_\+t}]{media\+\_\+block\+\_\+size,  }\item[{\mbox{\hyperlink{group__rtems__disk_ga5fbcfd40b657bff6c54d9e393fab3274}{rtems\+\_\+blkdev\+\_\+bnum}}}]{blocks\+\_\+with\+\_\+buffer,  }\item[{\mbox{\hyperlink{group__rtems__disk_ga5fbcfd40b657bff6c54d9e393fab3274}{rtems\+\_\+blkdev\+\_\+bnum}}}]{media\+\_\+block\+\_\+count,  }\item[{uint8\+\_\+t}]{fill\+\_\+pattern }\end{DoxyParamCaption})}



Creates and registers a sparse disk. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em device\+\_\+file\+\_\+name} & The device file name path. \\
\hline
\mbox{\texttt{ in}}  & {\em media\+\_\+block\+\_\+size} & The media block size in bytes. \\
\hline
\mbox{\texttt{ in}}  & {\em blocks\+\_\+with\+\_\+buffer} & Blocks of the device with a buffer. Other blocks can store only fill pattern value bytes. \\
\hline
\mbox{\texttt{ in}}  & {\em block\+\_\+count} & The media block count of the device. It is the sum of blocks with buffer and blocks that contain only fill pattern value bytes. \\
\hline
\mbox{\texttt{ in}}  & {\em fill\+\_\+pattern} & The fill pattern specifies the byte value of blocks without a buffer. It is also the initial value for blocks with a buffer.\\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Return values}
{\em R\+T\+E\+M\+S\+\_\+\+S\+U\+C\+C\+E\+S\+S\+F\+UL} & Successful operation. \\
\hline
{\em R\+T\+E\+M\+S\+\_\+\+I\+N\+V\+A\+L\+I\+D\+\_\+\+N\+U\+M\+B\+ER} & Media block size or media block count is not positive. The blocks with buffer count is greater than the media block count. \\
\hline
{\em R\+T\+E\+M\+S\+\_\+\+N\+O\+\_\+\+M\+E\+M\+O\+RY} & Not enough memory. \\
\hline
{\em R\+T\+E\+M\+S\+\_\+\+T\+O\+O\+\_\+\+M\+A\+NY} & Cannot create semaphore. \\
\hline
{\em R\+T\+E\+M\+S\+\_\+\+U\+N\+S\+A\+T\+I\+S\+F\+I\+ED} & Cannot create generic device node.\\
\hline
\end{DoxyRetVals}
\begin{DoxySeeAlso}{See also}
\mbox{\hyperlink{group__rtems__sparse__disk_ga9c0612d8fec13b50359553e5efa15265}{rtems\+\_\+sparse\+\_\+disk\+\_\+register()}}. 
\end{DoxySeeAlso}
\mbox{\Hypertarget{group__rtems__sparse__disk_gae6a3909209876365980517aa319c7f87}\label{group__rtems__sparse__disk_gae6a3909209876365980517aa319c7f87}} 
\index{Sparse Disk Device@{Sparse Disk Device}!rtems\_sparse\_disk\_free@{rtems\_sparse\_disk\_free}}
\index{rtems\_sparse\_disk\_free@{rtems\_sparse\_disk\_free}!Sparse Disk Device@{Sparse Disk Device}}
\subsubsection{\texorpdfstring{rtems\_sparse\_disk\_free()}{rtems\_sparse\_disk\_free()}}
{\footnotesize\ttfamily void rtems\+\_\+sparse\+\_\+disk\+\_\+free (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structrtems__sparse__disk}{rtems\+\_\+sparse\+\_\+disk}} $\ast$}]{sparse\+\_\+disk }\end{DoxyParamCaption})}



Frees a sparse disk. 

Calls free() on the sparse disk pointer. \mbox{\Hypertarget{group__rtems__sparse__disk_ga9c0612d8fec13b50359553e5efa15265}\label{group__rtems__sparse__disk_ga9c0612d8fec13b50359553e5efa15265}} 
\index{Sparse Disk Device@{Sparse Disk Device}!rtems\_sparse\_disk\_register@{rtems\_sparse\_disk\_register}}
\index{rtems\_sparse\_disk\_register@{rtems\_sparse\_disk\_register}!Sparse Disk Device@{Sparse Disk Device}}
\subsubsection{\texorpdfstring{rtems\_sparse\_disk\_register()}{rtems\_sparse\_disk\_register()}}
{\footnotesize\ttfamily \mbox{\hyperlink{group__ClassicStatus_ga545d41846817eaba6143d52ee4d9e9fe}{rtems\+\_\+status\+\_\+code}} rtems\+\_\+sparse\+\_\+disk\+\_\+register (\begin{DoxyParamCaption}\item[{const char $\ast$}]{device\+\_\+file\+\_\+name,  }\item[{\mbox{\hyperlink{structrtems__sparse__disk}{rtems\+\_\+sparse\+\_\+disk}} $\ast$}]{sparse\+\_\+disk,  }\item[{uint32\+\_\+t}]{media\+\_\+block\+\_\+size,  }\item[{\mbox{\hyperlink{group__rtems__disk_ga5fbcfd40b657bff6c54d9e393fab3274}{rtems\+\_\+blkdev\+\_\+bnum}}}]{blocks\+\_\+with\+\_\+buffer,  }\item[{\mbox{\hyperlink{group__rtems__disk_ga5fbcfd40b657bff6c54d9e393fab3274}{rtems\+\_\+blkdev\+\_\+bnum}}}]{media\+\_\+block\+\_\+count,  }\item[{uint8\+\_\+t}]{fill\+\_\+pattern,  }\item[{rtems\+\_\+sparse\+\_\+disk\+\_\+delete\+\_\+handler}]{sparse\+\_\+disk\+\_\+delete }\end{DoxyParamCaption})}



Initializes and registers a sparse disk. 

This will create one semaphore for mutual exclusion.


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em device\+\_\+file\+\_\+name} & The device file name path. \\
\hline
\mbox{\texttt{ in,out}}  & {\em sparse\+\_\+disk} & The sparse disk. \\
\hline
\mbox{\texttt{ in}}  & {\em media\+\_\+block\+\_\+size} & The media block size in bytes. \\
\hline
\mbox{\texttt{ in}}  & {\em blocks\+\_\+with\+\_\+buffer} & Blocks of the device with a buffer. Other blocks can store only fill pattern value bytes. \\
\hline
\mbox{\texttt{ in}}  & {\em block\+\_\+count} & The media block count of the device. It is the sum of blocks with buffer and blocks that contain only fill pattern value bytes. \\
\hline
\mbox{\texttt{ in}}  & {\em fill\+\_\+pattern} & The fill pattern specifies the byte value of blocks without a buffer. It is also the initial value for blocks with a buffer. \\
\hline
\mbox{\texttt{ in}}  & {\em sparse\+\_\+disk\+\_\+delete} & The sparse disk delete handler.\\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Return values}
{\em R\+T\+E\+M\+S\+\_\+\+S\+U\+C\+C\+E\+S\+S\+F\+UL} & Successful operation. \\
\hline
{\em R\+T\+E\+M\+S\+\_\+\+I\+N\+V\+A\+L\+I\+D\+\_\+\+N\+U\+M\+B\+ER} & Media block size or media block count is not positive. The blocks with buffer count is greater than the media block count. \\
\hline
{\em R\+T\+E\+M\+S\+\_\+\+I\+N\+V\+A\+L\+I\+D\+\_\+\+A\+D\+D\+R\+E\+SS} & Invalid sparse disk address. \\
\hline
{\em R\+T\+E\+M\+S\+\_\+\+T\+O\+O\+\_\+\+M\+A\+NY} & Cannot create semaphore. \\
\hline
{\em R\+T\+E\+M\+S\+\_\+\+U\+N\+S\+A\+T\+I\+S\+F\+I\+ED} & Cannot create generic device node. \\
\hline
\end{DoxyRetVals}
