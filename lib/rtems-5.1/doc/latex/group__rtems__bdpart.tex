\hypertarget{group__rtems__bdpart}{}\section{Block Device Partition Management}
\label{group__rtems__bdpart}\index{Block Device Partition Management@{Block Device Partition Management}}


This module provides functions to manage partitions of a disk device.  


\subsection*{Files}
\begin{DoxyCompactItemize}
\item 
file \mbox{\hyperlink{bdpart_8h}{bdpart.\+h}}
\begin{DoxyCompactList}\small\item\em Block Device Partition Management. \end{DoxyCompactList}\item 
file \mbox{\hyperlink{bdpart-create_8c}{bdpart-\/create.\+c}}
\begin{DoxyCompactList}\small\item\em Manage Partitions of a Disk Device. \end{DoxyCompactList}\item 
file \mbox{\hyperlink{bdpart-dump_8c}{bdpart-\/dump.\+c}}
\begin{DoxyCompactList}\small\item\em Prints the Partition Table {\itshape Partitions} with {\itshape Count} Partitions. \end{DoxyCompactList}\item 
file \mbox{\hyperlink{bdpart-mount_8c}{bdpart-\/mount.\+c}}
\begin{DoxyCompactList}\small\item\em Block Device Partition Management. \end{DoxyCompactList}\item 
file \mbox{\hyperlink{bdpart-read_8c}{bdpart-\/read.\+c}}
\begin{DoxyCompactList}\small\item\em Block Device Partition Management. \end{DoxyCompactList}\item 
file \mbox{\hyperlink{bdpart-register_8c}{bdpart-\/register.\+c}}
\begin{DoxyCompactList}\small\item\em Block Device Partition Management. \end{DoxyCompactList}\item 
file \mbox{\hyperlink{bdpart-sort_8c}{bdpart-\/sort.\+c}}
\begin{DoxyCompactList}\small\item\em Block Device Partition Management. \end{DoxyCompactList}\item 
file \mbox{\hyperlink{bdpart-write_8c}{bdpart-\/write.\+c}}
\begin{DoxyCompactList}\small\item\em Block Device Partition Management. \end{DoxyCompactList}\item 
file \mbox{\hyperlink{show__bdbuf_8c}{show\+\_\+bdbuf.\+c}}
\begin{DoxyCompactList}\small\item\em Enable the Monitor to Show bdbuf Information. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Data Structures}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{structrtems__bdpart__partition}{rtems\+\_\+bdpart\+\_\+partition}}
\item 
union \mbox{\hyperlink{unionrtems__bdpart__format}{rtems\+\_\+bdpart\+\_\+format}}
\end{DoxyCompactItemize}
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \mbox{\hyperlink{group__rtems__bdpart_gadd7733262575d66342e79ebafbd3ec78}{R\+T\+E\+M\+S\+\_\+\+B\+D\+P\+A\+R\+T\+\_\+\+P\+A\+R\+T\+I\+T\+I\+O\+N\+\_\+\+N\+U\+M\+B\+E\+R\+\_\+\+H\+I\+NT}}~16
\end{DoxyCompactItemize}
\subsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
typedef struct \mbox{\hyperlink{structrtems__bdpart__partition}{rtems\+\_\+bdpart\+\_\+partition}} \mbox{\hyperlink{group__rtems__bdpart_ga332cb2d1be444f20c2daa9d7382f8e2c}{rtems\+\_\+bdpart\+\_\+partition}}
\end{DoxyCompactItemize}
\subsection*{Enumerations}
\begin{DoxyCompactItemize}
\item 
enum \mbox{\hyperlink{group__rtems__bdpart_ga688bdae263560502610c958bd45ff8af}{rtems\+\_\+bdpart\+\_\+format\+\_\+type}} \{ \mbox{\hyperlink{group__rtems__bdpart_gga688bdae263560502610c958bd45ff8afa1438658ed9ac308090fcfd6f671ed512}{R\+T\+E\+M\+S\+\_\+\+B\+D\+P\+A\+R\+T\+\_\+\+F\+O\+R\+M\+A\+T\+\_\+\+M\+BR}}, 
\mbox{\hyperlink{group__rtems__bdpart_gga688bdae263560502610c958bd45ff8afaa83a46115f9a9145ba010d99f67c128c}{R\+T\+E\+M\+S\+\_\+\+B\+D\+P\+A\+R\+T\+\_\+\+F\+O\+R\+M\+A\+T\+\_\+\+G\+PT}}
 \}
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{group__ClassicStatus_ga545d41846817eaba6143d52ee4d9e9fe}{rtems\+\_\+status\+\_\+code}} \mbox{\hyperlink{group__rtems__bdpart_ga1ffdc1b7fc86d324faa9b93500ab0e63}{rtems\+\_\+bdpart\+\_\+read}} (const char $\ast$disk\+\_\+name, \mbox{\hyperlink{unionrtems__bdpart__format}{rtems\+\_\+bdpart\+\_\+format}} $\ast$\mbox{\hyperlink{structformat}{format}}, \mbox{\hyperlink{structrtems__bdpart__partition}{rtems\+\_\+bdpart\+\_\+partition}} $\ast$partitions, size\+\_\+t $\ast$count)
\begin{DoxyCompactList}\small\item\em Reads the partition information from the physical disk device with name {\itshape disk\+\_\+name}. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{group__rtems__bdpart_gaec68d844510e8516ae962f29d1cdd384}\label{group__rtems__bdpart_gaec68d844510e8516ae962f29d1cdd384}} 
void \mbox{\hyperlink{group__rtems__bdpart_gaec68d844510e8516ae962f29d1cdd384}{rtems\+\_\+bdpart\+\_\+sort}} (\mbox{\hyperlink{structrtems__bdpart__partition}{rtems\+\_\+bdpart\+\_\+partition}} $\ast$partitions, size\+\_\+t count)
\begin{DoxyCompactList}\small\item\em Sorts the partition table {\itshape partitions} with {\itshape count} partitions to have ascending begin blocks. \end{DoxyCompactList}\item 
\mbox{\hyperlink{group__ClassicStatus_ga545d41846817eaba6143d52ee4d9e9fe}{rtems\+\_\+status\+\_\+code}} \mbox{\hyperlink{group__rtems__bdpart_gaa8b69004c352fe7867bdcb551453beb0}{rtems\+\_\+bdpart\+\_\+write}} (const char $\ast$disk\+\_\+name, const \mbox{\hyperlink{unionrtems__bdpart__format}{rtems\+\_\+bdpart\+\_\+format}} $\ast$\mbox{\hyperlink{structformat}{format}}, const \mbox{\hyperlink{structrtems__bdpart__partition}{rtems\+\_\+bdpart\+\_\+partition}} $\ast$partitions, size\+\_\+t count)
\begin{DoxyCompactList}\small\item\em Writes the partition table to the physical disk device with name {\itshape disk\+\_\+name}. \end{DoxyCompactList}\item 
\mbox{\hyperlink{group__ClassicStatus_ga545d41846817eaba6143d52ee4d9e9fe}{rtems\+\_\+status\+\_\+code}} \mbox{\hyperlink{group__rtems__bdpart_ga208abbe74a399a6e38115ab8eeab6eb5}{rtems\+\_\+bdpart\+\_\+create}} (const char $\ast$disk\+\_\+name, const \mbox{\hyperlink{unionrtems__bdpart__format}{rtems\+\_\+bdpart\+\_\+format}} $\ast$\mbox{\hyperlink{structformat}{format}}, \mbox{\hyperlink{structrtems__bdpart__partition}{rtems\+\_\+bdpart\+\_\+partition}} $\ast$partitions, const unsigned $\ast$distribution, size\+\_\+t count)
\begin{DoxyCompactList}\small\item\em Creates a partition table in {\itshape partitions} with {\itshape count} partitions for the physical disk device with name {\itshape disk\+\_\+name}. \end{DoxyCompactList}\item 
\mbox{\hyperlink{group__ClassicStatus_ga545d41846817eaba6143d52ee4d9e9fe}{rtems\+\_\+status\+\_\+code}} \mbox{\hyperlink{group__rtems__bdpart_ga36d215715c22ca86ce71f977ed760f4c}{rtems\+\_\+bdpart\+\_\+register}} (const char $\ast$disk\+\_\+name, const \mbox{\hyperlink{structrtems__bdpart__partition}{rtems\+\_\+bdpart\+\_\+partition}} $\ast$partitions, size\+\_\+t count)
\begin{DoxyCompactList}\small\item\em Registers the partitions as logical disks for the physical disk device with name {\itshape disk\+\_\+name}. \end{DoxyCompactList}\item 
\mbox{\hyperlink{group__ClassicStatus_ga545d41846817eaba6143d52ee4d9e9fe}{rtems\+\_\+status\+\_\+code}} \mbox{\hyperlink{group__rtems__bdpart_ga9b0517982a75560e134c808e70885b81}{rtems\+\_\+bdpart\+\_\+register\+\_\+from\+\_\+disk}} (const char $\ast$disk\+\_\+name)
\item 
\mbox{\hyperlink{group__ClassicStatus_ga545d41846817eaba6143d52ee4d9e9fe}{rtems\+\_\+status\+\_\+code}} \mbox{\hyperlink{group__rtems__bdpart_ga927be713792520f358b760d0e04fb5bf}{rtems\+\_\+bdpart\+\_\+unregister}} (const char $\ast$disk\+\_\+name, const \mbox{\hyperlink{structrtems__bdpart__partition}{rtems\+\_\+bdpart\+\_\+partition}} $\ast$partitions, size\+\_\+t count)
\begin{DoxyCompactList}\small\item\em Deletes the logical disks associated with the partitions of the disk device with name {\itshape disk\+\_\+name}. \end{DoxyCompactList}\item 
\mbox{\hyperlink{group__ClassicStatus_ga545d41846817eaba6143d52ee4d9e9fe}{rtems\+\_\+status\+\_\+code}} \mbox{\hyperlink{group__rtems__bdpart_gaac90511f26e1d224e9e821d4b5c1d064}{rtems\+\_\+bdpart\+\_\+mount}} (const char $\ast$disk\+\_\+name, const \mbox{\hyperlink{structrtems__bdpart__partition}{rtems\+\_\+bdpart\+\_\+partition}} $\ast$partitions, size\+\_\+t count, const char $\ast$mount\+\_\+base)
\begin{DoxyCompactList}\small\item\em Mounts all supported file systems inside the logical disks derived from the partitions of the physical disk device with name {\itshape disk\+\_\+name}. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{group__rtems__bdpart_ga8240aed18861975cded42f606f4e9107}\label{group__rtems__bdpart_ga8240aed18861975cded42f606f4e9107}} 
\mbox{\hyperlink{group__ClassicStatus_ga545d41846817eaba6143d52ee4d9e9fe}{rtems\+\_\+status\+\_\+code}} \mbox{\hyperlink{group__rtems__bdpart_ga8240aed18861975cded42f606f4e9107}{rtems\+\_\+bdpart\+\_\+unmount}} (const char $\ast$disk\+\_\+name, const \mbox{\hyperlink{structrtems__bdpart__partition}{rtems\+\_\+bdpart\+\_\+partition}} $\ast$partitions, size\+\_\+t count, const char $\ast$mount\+\_\+base)
\begin{DoxyCompactList}\small\item\em Unmounts all file systems mounted with \mbox{\hyperlink{group__rtems__bdpart_gaac90511f26e1d224e9e821d4b5c1d064}{rtems\+\_\+bdpart\+\_\+mount()}}. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{group__rtems__bdpart_gabd436124677aaeaaf2ae4c9f2bb031d2}\label{group__rtems__bdpart_gabd436124677aaeaaf2ae4c9f2bb031d2}} 
void \mbox{\hyperlink{group__rtems__bdpart_gabd436124677aaeaaf2ae4c9f2bb031d2}{rtems\+\_\+bdpart\+\_\+dump}} (const \mbox{\hyperlink{structrtems__bdpart__partition}{rtems\+\_\+bdpart\+\_\+partition}} $\ast$partitions, size\+\_\+t count)
\begin{DoxyCompactList}\small\item\em Prints the partition table {\itshape partitions} with {\itshape count} partitions to standard output. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{group__rtems__bdpart_ga1620402cb457ec28f7712296fa66c04b}\label{group__rtems__bdpart_ga1620402cb457ec28f7712296fa66c04b}} 
void \mbox{\hyperlink{group__rtems__bdpart_ga1620402cb457ec28f7712296fa66c04b}{rtems\+\_\+bdpart\+\_\+to\+\_\+partition\+\_\+type}} (uint8\+\_\+t mbr\+\_\+type, uuid\+\_\+t type)
\begin{DoxyCompactList}\small\item\em Returns the partition type for the M\+BR partition type value {\itshape mbr\+\_\+type} in {\itshape type}. \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{group__rtems__bdpart_ga13ba144439be58871fa6c7e26854f11a}{rtems\+\_\+bdpart\+\_\+to\+\_\+mbr\+\_\+partition\+\_\+type}} (const uuid\+\_\+t type, uint8\+\_\+t $\ast$mbr\+\_\+type)
\begin{DoxyCompactList}\small\item\em Converts the partition type in {\itshape type} to the M\+BR partition type. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{M\+BR Partition Types and Flags}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{group__rtems__bdpart_gaf186b3495fabb51c41aa873b8f1c3a88}\label{group__rtems__bdpart_gaf186b3495fabb51c41aa873b8f1c3a88}} 
\#define {\bfseries R\+T\+E\+M\+S\+\_\+\+B\+D\+P\+A\+R\+T\+\_\+\+M\+B\+R\+\_\+\+E\+M\+P\+TY}~0x0U
\item 
\mbox{\Hypertarget{group__rtems__bdpart_gafef6706a7af508914bfd38bcb5ec6ab5}\label{group__rtems__bdpart_gafef6706a7af508914bfd38bcb5ec6ab5}} 
\#define {\bfseries R\+T\+E\+M\+S\+\_\+\+B\+D\+P\+A\+R\+T\+\_\+\+M\+B\+R\+\_\+\+F\+A\+T\+\_\+12}~0x1U
\item 
\mbox{\Hypertarget{group__rtems__bdpart_ga1bd23b3b634a6b78194ac369bf693ed0}\label{group__rtems__bdpart_ga1bd23b3b634a6b78194ac369bf693ed0}} 
\#define {\bfseries R\+T\+E\+M\+S\+\_\+\+B\+D\+P\+A\+R\+T\+\_\+\+M\+B\+R\+\_\+\+F\+A\+T\+\_\+16}~0x4U
\item 
\mbox{\Hypertarget{group__rtems__bdpart_ga6478427f5dff02c51b95be3445cb2f4a}\label{group__rtems__bdpart_ga6478427f5dff02c51b95be3445cb2f4a}} 
\#define {\bfseries R\+T\+E\+M\+S\+\_\+\+B\+D\+P\+A\+R\+T\+\_\+\+M\+B\+R\+\_\+\+F\+A\+T\+\_\+16\+\_\+\+L\+BA}~0xeU
\item 
\mbox{\Hypertarget{group__rtems__bdpart_ga1a32932c0e4b12fe217cfa419175cc16}\label{group__rtems__bdpart_ga1a32932c0e4b12fe217cfa419175cc16}} 
\#define {\bfseries R\+T\+E\+M\+S\+\_\+\+B\+D\+P\+A\+R\+T\+\_\+\+M\+B\+R\+\_\+\+F\+A\+T\+\_\+32}~0xbU
\item 
\mbox{\Hypertarget{group__rtems__bdpart_gab50d853cffb7c74bf4a54df4c2661ad4}\label{group__rtems__bdpart_gab50d853cffb7c74bf4a54df4c2661ad4}} 
\#define {\bfseries R\+T\+E\+M\+S\+\_\+\+B\+D\+P\+A\+R\+T\+\_\+\+M\+B\+R\+\_\+\+F\+A\+T\+\_\+32\+\_\+\+L\+BA}~0xcU
\item 
\mbox{\Hypertarget{group__rtems__bdpart_ga8fcb6a9656510ca403f689e45cc399a5}\label{group__rtems__bdpart_ga8fcb6a9656510ca403f689e45cc399a5}} 
\#define {\bfseries R\+T\+E\+M\+S\+\_\+\+B\+D\+P\+A\+R\+T\+\_\+\+M\+B\+R\+\_\+\+E\+X\+T\+E\+N\+D\+ED}~0x5U
\item 
\mbox{\Hypertarget{group__rtems__bdpart_ga110870cb90704cb4023c83d4c163cf1e}\label{group__rtems__bdpart_ga110870cb90704cb4023c83d4c163cf1e}} 
\#define {\bfseries R\+T\+E\+M\+S\+\_\+\+B\+D\+P\+A\+R\+T\+\_\+\+M\+B\+R\+\_\+\+D\+A\+TA}~0xdaU
\item 
\mbox{\Hypertarget{group__rtems__bdpart_ga2a99614bf3f74b951e2d10f089ef20cd}\label{group__rtems__bdpart_ga2a99614bf3f74b951e2d10f089ef20cd}} 
\#define {\bfseries R\+T\+E\+M\+S\+\_\+\+B\+D\+P\+A\+R\+T\+\_\+\+M\+B\+R\+\_\+\+G\+PT}~0xeeU
\item 
\mbox{\Hypertarget{group__rtems__bdpart_gab935be5ef99cc8e89ec7f7a40338a9dc}\label{group__rtems__bdpart_gab935be5ef99cc8e89ec7f7a40338a9dc}} 
\#define {\bfseries R\+T\+E\+M\+S\+\_\+\+B\+D\+P\+A\+R\+T\+\_\+\+M\+B\+R\+\_\+\+F\+L\+A\+G\+\_\+\+A\+C\+T\+I\+VE}~0x80U
\end{DoxyCompactItemize}


\subsection{Detailed Description}
This module provides functions to manage partitions of a disk device. 

A \mbox{\hyperlink{group__rtems__disk}{disk}} is a set of blocks which are identified by a consecutive set of non-\/negative integers starting at zero. There are also logical disks which contain a subset of consecutive disk blocks. The logical disks are used to represent the partitions of a disk. The disk devices are accessed via the \mbox{\hyperlink{group__rtems__disk}{block device buffer module}}.

The partition format on the physical disk will be converted to an internal representation. It is possible to convert the internal representation into a specific output format and write it to the physical disk. One of the constrains for the internal representation was to support the G\+PT format easily.

Currently two physical partition formats are supported. These are the M\+BR and the G\+PT format. Please note that the G\+PT support is not implemented. With M\+BR format we mean the partition format of the wide spread I\+BM P\+C-\/compatible systems. The G\+PT format is defined in the Extensible Firmware Interface (E\+FI).

The most common task will be to read the partition information of a disk and register logical disks for each partition. This can be done with the \mbox{\hyperlink{group__rtems__bdpart_ga9b0517982a75560e134c808e70885b81}{rtems\+\_\+bdpart\+\_\+register\+\_\+from\+\_\+disk()}} function. Afterwards you can \mbox{\hyperlink{group__rtems__fstab_gaa1e00bfe1aa6bce349c2c73092a39cc6}{mount}} the file systems within the partitions.

You can read the partition information from a disk with \mbox{\hyperlink{group__rtems__bdpart_ga1ffdc1b7fc86d324faa9b93500ab0e63}{rtems\+\_\+bdpart\+\_\+read()}} and write it to the disk with \mbox{\hyperlink{group__rtems__bdpart_gaa8b69004c352fe7867bdcb551453beb0}{rtems\+\_\+bdpart\+\_\+write()}}.

To create a partition table from scratch for a disk use \mbox{\hyperlink{group__rtems__bdpart_ga208abbe74a399a6e38115ab8eeab6eb5}{rtems\+\_\+bdpart\+\_\+create()}}.

You can access some disk functions with the shell command {\ttfamily fdisk}.

References used to create this module\+:
\begin{DoxyItemize}
\item \href{http://en.wikipedia.org/wiki/UUID}{\texttt{ Universally Unique Identifier}}
\item \href{http://en.wikipedia.org/wiki/Globally_Unique_Identifier}{\texttt{ Globally Unique Identifier}}
\item \href{http://en.wikipedia.org/wiki/Disk_partitioning}{\texttt{ Disk Paritioning}}
\item \href{http://en.wikipedia.org/wiki/GUID_Partition_Table}{\texttt{ G\+U\+ID Partition Table}}
\item \href{http://en.wikipedia.org/wiki/Master_boot_record}{\texttt{ Master Boot Record}}
\item \href{http://en.wikipedia.org/wiki/Extended_boot_record}{\texttt{ Extended Boot Record}}
\item \href{http://en.wikipedia.org/wiki/Cylinder-head-sector}{\texttt{ Cylinder Head Sector}}
\item \href{http://www.win.tue.nl/~aeb/partitions/partition_types-1.html}{\texttt{ Partition Types}} 
\end{DoxyItemize}

\subsection{Macro Definition Documentation}
\mbox{\Hypertarget{group__rtems__bdpart_gadd7733262575d66342e79ebafbd3ec78}\label{group__rtems__bdpart_gadd7733262575d66342e79ebafbd3ec78}} 
\index{Block Device Partition Management@{Block Device Partition Management}!RTEMS\_BDPART\_PARTITION\_NUMBER\_HINT@{RTEMS\_BDPART\_PARTITION\_NUMBER\_HINT}}
\index{RTEMS\_BDPART\_PARTITION\_NUMBER\_HINT@{RTEMS\_BDPART\_PARTITION\_NUMBER\_HINT}!Block Device Partition Management@{Block Device Partition Management}}
\subsubsection{\texorpdfstring{RTEMS\_BDPART\_PARTITION\_NUMBER\_HINT}{RTEMS\_BDPART\_PARTITION\_NUMBER\_HINT}}
{\footnotesize\ttfamily \#define R\+T\+E\+M\+S\+\_\+\+B\+D\+P\+A\+R\+T\+\_\+\+P\+A\+R\+T\+I\+T\+I\+O\+N\+\_\+\+N\+U\+M\+B\+E\+R\+\_\+\+H\+I\+NT~16}

Recommended maximum partition table size. 

\subsection{Typedef Documentation}
\mbox{\Hypertarget{group__rtems__bdpart_ga332cb2d1be444f20c2daa9d7382f8e2c}\label{group__rtems__bdpart_ga332cb2d1be444f20c2daa9d7382f8e2c}} 
\index{Block Device Partition Management@{Block Device Partition Management}!rtems\_bdpart\_partition@{rtems\_bdpart\_partition}}
\index{rtems\_bdpart\_partition@{rtems\_bdpart\_partition}!Block Device Partition Management@{Block Device Partition Management}}
\subsubsection{\texorpdfstring{rtems\_bdpart\_partition}{rtems\_bdpart\_partition}}
{\footnotesize\ttfamily typedef struct \mbox{\hyperlink{structrtems__bdpart__partition}{rtems\+\_\+bdpart\+\_\+partition}}  \mbox{\hyperlink{structrtems__bdpart__partition}{rtems\+\_\+bdpart\+\_\+partition}}}

Partition description. 

\subsection{Enumeration Type Documentation}
\mbox{\Hypertarget{group__rtems__bdpart_ga688bdae263560502610c958bd45ff8af}\label{group__rtems__bdpart_ga688bdae263560502610c958bd45ff8af}} 
\index{Block Device Partition Management@{Block Device Partition Management}!rtems\_bdpart\_format\_type@{rtems\_bdpart\_format\_type}}
\index{rtems\_bdpart\_format\_type@{rtems\_bdpart\_format\_type}!Block Device Partition Management@{Block Device Partition Management}}
\subsubsection{\texorpdfstring{rtems\_bdpart\_format\_type}{rtems\_bdpart\_format\_type}}
{\footnotesize\ttfamily enum \mbox{\hyperlink{group__rtems__bdpart_ga688bdae263560502610c958bd45ff8af}{rtems\+\_\+bdpart\+\_\+format\+\_\+type}}}

Disk format for the partition tables. \begin{DoxyEnumFields}{Enumerator}
\raisebox{\heightof{T}}[0pt][0pt]{\index{RTEMS\_BDPART\_FORMAT\_MBR@{RTEMS\_BDPART\_FORMAT\_MBR}!Block Device Partition Management@{Block Device Partition Management}}\index{Block Device Partition Management@{Block Device Partition Management}!RTEMS\_BDPART\_FORMAT\_MBR@{RTEMS\_BDPART\_FORMAT\_MBR}}}\mbox{\Hypertarget{group__rtems__bdpart_gga688bdae263560502610c958bd45ff8afa1438658ed9ac308090fcfd6f671ed512}\label{group__rtems__bdpart_gga688bdae263560502610c958bd45ff8afa1438658ed9ac308090fcfd6f671ed512}} 
R\+T\+E\+M\+S\+\_\+\+B\+D\+P\+A\+R\+T\+\_\+\+F\+O\+R\+M\+A\+T\+\_\+\+M\+BR&Type value for M\+BR format. \\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{RTEMS\_BDPART\_FORMAT\_GPT@{RTEMS\_BDPART\_FORMAT\_GPT}!Block Device Partition Management@{Block Device Partition Management}}\index{Block Device Partition Management@{Block Device Partition Management}!RTEMS\_BDPART\_FORMAT\_GPT@{RTEMS\_BDPART\_FORMAT\_GPT}}}\mbox{\Hypertarget{group__rtems__bdpart_gga688bdae263560502610c958bd45ff8afaa83a46115f9a9145ba010d99f67c128c}\label{group__rtems__bdpart_gga688bdae263560502610c958bd45ff8afaa83a46115f9a9145ba010d99f67c128c}} 
R\+T\+E\+M\+S\+\_\+\+B\+D\+P\+A\+R\+T\+\_\+\+F\+O\+R\+M\+A\+T\+\_\+\+G\+PT&Type value for G\+PT format. \\
\hline

\end{DoxyEnumFields}


\subsection{Function Documentation}
\mbox{\Hypertarget{group__rtems__bdpart_ga208abbe74a399a6e38115ab8eeab6eb5}\label{group__rtems__bdpart_ga208abbe74a399a6e38115ab8eeab6eb5}} 
\index{Block Device Partition Management@{Block Device Partition Management}!rtems\_bdpart\_create@{rtems\_bdpart\_create}}
\index{rtems\_bdpart\_create@{rtems\_bdpart\_create}!Block Device Partition Management@{Block Device Partition Management}}
\subsubsection{\texorpdfstring{rtems\_bdpart\_create()}{rtems\_bdpart\_create()}}
{\footnotesize\ttfamily \mbox{\hyperlink{group__ClassicStatus_ga545d41846817eaba6143d52ee4d9e9fe}{rtems\+\_\+status\+\_\+code}} rtems\+\_\+bdpart\+\_\+create (\begin{DoxyParamCaption}\item[{const char $\ast$}]{disk\+\_\+name,  }\item[{const \mbox{\hyperlink{unionrtems__bdpart__format}{rtems\+\_\+bdpart\+\_\+format}} $\ast$}]{format,  }\item[{\mbox{\hyperlink{structrtems__bdpart__partition}{rtems\+\_\+bdpart\+\_\+partition}} $\ast$}]{partitions,  }\item[{const unsigned $\ast$}]{distribution,  }\item[{size\+\_\+t}]{count }\end{DoxyParamCaption})}



Creates a partition table in {\itshape partitions} with {\itshape count} partitions for the physical disk device with name {\itshape disk\+\_\+name}. 

The array of positive integer weights in {\itshape distribution} must have exactly {\itshape count} elements. The weights in the distribution array are summed up. Each weight is then divided by the sum to obtain the disk fraction which forms the corresponding partition. The partition boundaries are generated with respect to the output format in {\itshape format}. \mbox{\Hypertarget{group__rtems__bdpart_gaac90511f26e1d224e9e821d4b5c1d064}\label{group__rtems__bdpart_gaac90511f26e1d224e9e821d4b5c1d064}} 
\index{Block Device Partition Management@{Block Device Partition Management}!rtems\_bdpart\_mount@{rtems\_bdpart\_mount}}
\index{rtems\_bdpart\_mount@{rtems\_bdpart\_mount}!Block Device Partition Management@{Block Device Partition Management}}
\subsubsection{\texorpdfstring{rtems\_bdpart\_mount()}{rtems\_bdpart\_mount()}}
{\footnotesize\ttfamily \mbox{\hyperlink{group__ClassicStatus_ga545d41846817eaba6143d52ee4d9e9fe}{rtems\+\_\+status\+\_\+code}} rtems\+\_\+bdpart\+\_\+mount (\begin{DoxyParamCaption}\item[{const char $\ast$}]{disk\+\_\+name,  }\item[{const \mbox{\hyperlink{structrtems__bdpart__partition}{rtems\+\_\+bdpart\+\_\+partition}} $\ast$}]{partitions,  }\item[{size\+\_\+t}]{count,  }\item[{const char $\ast$}]{mount\+\_\+base }\end{DoxyParamCaption})}



Mounts all supported file systems inside the logical disks derived from the partitions of the physical disk device with name {\itshape disk\+\_\+name}. 

For each partition in the partition table {\itshape partitions} with {\itshape count} partitions it will be checked if it contains a supported file system. In this case a mount point derived from the disk name will be created in the mount base path {\itshape mount\+\_\+base}. The file system will be mounted there. The partition number equals the partition table index plus one. The mount point name for each partition will be the concatenation of the mount base path, the disk device file name and the parition number.

\begin{DoxySeeAlso}{See also}
\mbox{\hyperlink{group__rtems__bdpart_ga1ffdc1b7fc86d324faa9b93500ab0e63}{rtems\+\_\+bdpart\+\_\+read()}}. 
\end{DoxySeeAlso}
\mbox{\Hypertarget{group__rtems__bdpart_ga1ffdc1b7fc86d324faa9b93500ab0e63}\label{group__rtems__bdpart_ga1ffdc1b7fc86d324faa9b93500ab0e63}} 
\index{Block Device Partition Management@{Block Device Partition Management}!rtems\_bdpart\_read@{rtems\_bdpart\_read}}
\index{rtems\_bdpart\_read@{rtems\_bdpart\_read}!Block Device Partition Management@{Block Device Partition Management}}
\subsubsection{\texorpdfstring{rtems\_bdpart\_read()}{rtems\_bdpart\_read()}}
{\footnotesize\ttfamily \mbox{\hyperlink{group__ClassicStatus_ga545d41846817eaba6143d52ee4d9e9fe}{rtems\+\_\+status\+\_\+code}} rtems\+\_\+bdpart\+\_\+read (\begin{DoxyParamCaption}\item[{const char $\ast$}]{disk\+\_\+name,  }\item[{\mbox{\hyperlink{unionrtems__bdpart__format}{rtems\+\_\+bdpart\+\_\+format}} $\ast$}]{format,  }\item[{\mbox{\hyperlink{structrtems__bdpart__partition}{rtems\+\_\+bdpart\+\_\+partition}} $\ast$}]{partitions,  }\item[{size\+\_\+t $\ast$}]{count }\end{DoxyParamCaption})}



Reads the partition information from the physical disk device with name {\itshape disk\+\_\+name}. 

The partition information will be stored in the partition table {\itshape partitions} with a maximum of {\itshape count} partitions. The number of actual partitions will be stored in {\itshape count}. If there are more partitions than space for storage an error status will be returned. The partition table format recognized on the disk will be stored in {\itshape format}. \mbox{\Hypertarget{group__rtems__bdpart_ga36d215715c22ca86ce71f977ed760f4c}\label{group__rtems__bdpart_ga36d215715c22ca86ce71f977ed760f4c}} 
\index{Block Device Partition Management@{Block Device Partition Management}!rtems\_bdpart\_register@{rtems\_bdpart\_register}}
\index{rtems\_bdpart\_register@{rtems\_bdpart\_register}!Block Device Partition Management@{Block Device Partition Management}}
\subsubsection{\texorpdfstring{rtems\_bdpart\_register()}{rtems\_bdpart\_register()}}
{\footnotesize\ttfamily \mbox{\hyperlink{group__ClassicStatus_ga545d41846817eaba6143d52ee4d9e9fe}{rtems\+\_\+status\+\_\+code}} rtems\+\_\+bdpart\+\_\+register (\begin{DoxyParamCaption}\item[{const char $\ast$}]{disk\+\_\+name,  }\item[{const \mbox{\hyperlink{structrtems__bdpart__partition}{rtems\+\_\+bdpart\+\_\+partition}} $\ast$}]{partitions,  }\item[{size\+\_\+t}]{count }\end{DoxyParamCaption})}



Registers the partitions as logical disks for the physical disk device with name {\itshape disk\+\_\+name}. 

For each partition of the partition table {\itshape partitions} with {\itshape count} partitions a logical disk is registered. The partition number equals the partition table index plus one. The name of the logical disk device is the concatenation of the physical disk device name and the partition number.

\begin{DoxySeeAlso}{See also}
\mbox{\hyperlink{group__rtems__blkdev_ga9271a94a55c2d58494b2a43dcb55e13e}{rtems\+\_\+blkdev\+\_\+create\+\_\+partition()}}. 
\end{DoxySeeAlso}
\mbox{\Hypertarget{group__rtems__bdpart_ga9b0517982a75560e134c808e70885b81}\label{group__rtems__bdpart_ga9b0517982a75560e134c808e70885b81}} 
\index{Block Device Partition Management@{Block Device Partition Management}!rtems\_bdpart\_register\_from\_disk@{rtems\_bdpart\_register\_from\_disk}}
\index{rtems\_bdpart\_register\_from\_disk@{rtems\_bdpart\_register\_from\_disk}!Block Device Partition Management@{Block Device Partition Management}}
\subsubsection{\texorpdfstring{rtems\_bdpart\_register\_from\_disk()}{rtems\_bdpart\_register\_from\_disk()}}
{\footnotesize\ttfamily \mbox{\hyperlink{group__ClassicStatus_ga545d41846817eaba6143d52ee4d9e9fe}{rtems\+\_\+status\+\_\+code}} rtems\+\_\+bdpart\+\_\+register\+\_\+from\+\_\+disk (\begin{DoxyParamCaption}\item[{const char $\ast$}]{disk\+\_\+name }\end{DoxyParamCaption})}

{\itshape brief} Reads the partition table from the disk device with name {\itshape disk\+\_\+name} and registers the partitions as logical disks.

\begin{DoxySeeAlso}{See also}
\mbox{\hyperlink{group__rtems__bdpart_ga36d215715c22ca86ce71f977ed760f4c}{rtems\+\_\+bdpart\+\_\+register()}} and \mbox{\hyperlink{group__rtems__fstab_gaa1e00bfe1aa6bce349c2c73092a39cc6}{rtems\+\_\+fsmount()}}. 
\end{DoxySeeAlso}
\mbox{\Hypertarget{group__rtems__bdpart_ga13ba144439be58871fa6c7e26854f11a}\label{group__rtems__bdpart_ga13ba144439be58871fa6c7e26854f11a}} 
\index{Block Device Partition Management@{Block Device Partition Management}!rtems\_bdpart\_to\_mbr\_partition\_type@{rtems\_bdpart\_to\_mbr\_partition\_type}}
\index{rtems\_bdpart\_to\_mbr\_partition\_type@{rtems\_bdpart\_to\_mbr\_partition\_type}!Block Device Partition Management@{Block Device Partition Management}}
\subsubsection{\texorpdfstring{rtems\_bdpart\_to\_mbr\_partition\_type()}{rtems\_bdpart\_to\_mbr\_partition\_type()}}
{\footnotesize\ttfamily bool rtems\+\_\+bdpart\+\_\+to\+\_\+mbr\+\_\+partition\+\_\+type (\begin{DoxyParamCaption}\item[{const uuid\+\_\+t}]{type,  }\item[{uint8\+\_\+t $\ast$}]{mbr\+\_\+type }\end{DoxyParamCaption})}



Converts the partition type in {\itshape type} to the M\+BR partition type. 

The result will be stored in {\itshape mbr\+\_\+type}. Returns {\ttfamily true} in case of a successful convertion and otherwise {\ttfamily false}. Both arguments must not be {\ttfamily N\+U\+LL}. \mbox{\Hypertarget{group__rtems__bdpart_ga927be713792520f358b760d0e04fb5bf}\label{group__rtems__bdpart_ga927be713792520f358b760d0e04fb5bf}} 
\index{Block Device Partition Management@{Block Device Partition Management}!rtems\_bdpart\_unregister@{rtems\_bdpart\_unregister}}
\index{rtems\_bdpart\_unregister@{rtems\_bdpart\_unregister}!Block Device Partition Management@{Block Device Partition Management}}
\subsubsection{\texorpdfstring{rtems\_bdpart\_unregister()}{rtems\_bdpart\_unregister()}}
{\footnotesize\ttfamily \mbox{\hyperlink{group__ClassicStatus_ga545d41846817eaba6143d52ee4d9e9fe}{rtems\+\_\+status\+\_\+code}} rtems\+\_\+bdpart\+\_\+unregister (\begin{DoxyParamCaption}\item[{const char $\ast$}]{disk\+\_\+name,  }\item[{const \mbox{\hyperlink{structrtems__bdpart__partition}{rtems\+\_\+bdpart\+\_\+partition}} $\ast$}]{partitions,  }\item[{size\+\_\+t}]{count }\end{DoxyParamCaption})}



Deletes the logical disks associated with the partitions of the disk device with name {\itshape disk\+\_\+name}. 

The partition table {\itshape partitions} with {\itshape count} partitions will be used to determine which disks need to be deleted. It may be obtained from \mbox{\hyperlink{group__rtems__bdpart_ga1ffdc1b7fc86d324faa9b93500ab0e63}{rtems\+\_\+bdpart\+\_\+read()}}. \mbox{\Hypertarget{group__rtems__bdpart_gaa8b69004c352fe7867bdcb551453beb0}\label{group__rtems__bdpart_gaa8b69004c352fe7867bdcb551453beb0}} 
\index{Block Device Partition Management@{Block Device Partition Management}!rtems\_bdpart\_write@{rtems\_bdpart\_write}}
\index{rtems\_bdpart\_write@{rtems\_bdpart\_write}!Block Device Partition Management@{Block Device Partition Management}}
\subsubsection{\texorpdfstring{rtems\_bdpart\_write()}{rtems\_bdpart\_write()}}
{\footnotesize\ttfamily \mbox{\hyperlink{group__ClassicStatus_ga545d41846817eaba6143d52ee4d9e9fe}{rtems\+\_\+status\+\_\+code}} rtems\+\_\+bdpart\+\_\+write (\begin{DoxyParamCaption}\item[{const char $\ast$}]{disk\+\_\+name,  }\item[{const \mbox{\hyperlink{unionrtems__bdpart__format}{rtems\+\_\+bdpart\+\_\+format}} $\ast$}]{format,  }\item[{const \mbox{\hyperlink{structrtems__bdpart__partition}{rtems\+\_\+bdpart\+\_\+partition}} $\ast$}]{partitions,  }\item[{size\+\_\+t}]{count }\end{DoxyParamCaption})}



Writes the partition table to the physical disk device with name {\itshape disk\+\_\+name}. 

The partition table {\itshape partitions} with {\itshape count} partitions will be written to the disk. The output format for the partition table on the disk is specified by {\itshape format}. There are some consistency checks applied to the partition table. The partition table must be sorted such that the begin blocks are in ascending order. This can be done with the \mbox{\hyperlink{group__rtems__bdpart_gaec68d844510e8516ae962f29d1cdd384}{rtems\+\_\+bdpart\+\_\+sort()}} function. The partitions must not overlap. The partitions must have a positive size. The partitions must be within the disk. Depending on the output format there are additional constrains. 