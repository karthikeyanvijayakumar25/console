\hypertarget{flashd_8h}{}\section{bsps/arm/atsam/include/libchip/include/flashd.h File Reference}
\label{flashd_8h}\index{bsps/arm/atsam/include/libchip/include/flashd.h@{bsps/arm/atsam/include/libchip/include/flashd.h}}
{\ttfamily \#include $<$stdint.\+h$>$}\newline
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{flashd_8h_aeb0926c4cf9e072dc35e844c7ae36d0b}\label{flashd_8h_aeb0926c4cf9e072dc35e844c7ae36d0b}} 
\#define {\bfseries G\+P\+N\+V\+Bit\+\_\+\+Security\+Bit}~0
\item 
\mbox{\Hypertarget{flashd_8h_a51ecf7b9e4dc965858efd21ae4e568dd}\label{flashd_8h_a51ecf7b9e4dc965858efd21ae4e568dd}} 
\#define {\bfseries G\+P\+N\+V\+Bit\+\_\+\+Boot\+Mode}~1
\item 
\mbox{\Hypertarget{flashd_8h_a9e0a5b1b96efcc7ef5ca9ec67fbfd962}\label{flashd_8h_a9e0a5b1b96efcc7ef5ca9ec67fbfd962}} 
\#define {\bfseries G\+P\+N\+V\+Bit\+\_\+\+T\+C\+M\+Bit1}~6
\item 
\mbox{\Hypertarget{flashd_8h_a26ecbef3fe34a65a36a08231c77b8142}\label{flashd_8h_a26ecbef3fe34a65a36a08231c77b8142}} 
\#define {\bfseries G\+P\+N\+V\+Bit\+\_\+\+T\+C\+M\+Bit2}~7
\item 
\mbox{\Hypertarget{flashd_8h_a3d863adc99bc8912ef28d6fe9a9fcd2c}\label{flashd_8h_a3d863adc99bc8912ef28d6fe9a9fcd2c}} 
\#define {\bfseries F\+L\+A\+S\+H\+D\+\_\+\+Is\+Security\+Bit\+Set}()~\mbox{\hyperlink{flashd_8h_a46c2aea775411f461647edd941286cf9}{F\+L\+A\+S\+H\+D\+\_\+\+Is\+G\+P\+N\+V\+M\+Set}}(0)
\item 
\mbox{\Hypertarget{flashd_8h_a14cb612065547bc15d1fd22e42a4a92c}\label{flashd_8h_a14cb612065547bc15d1fd22e42a4a92c}} 
\#define {\bfseries F\+L\+A\+S\+H\+D\+\_\+\+Set\+Security\+Bit}()~\mbox{\hyperlink{flashd_8h_afd3662ad92b776be125acdd3c053875d}{F\+L\+A\+S\+H\+D\+\_\+\+Set\+G\+P\+N\+VM}}(0)
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{flashd_8h_abcd1cf006641b2c0ffe0ef95615f6b32}{F\+L\+A\+S\+H\+D\+\_\+\+Initialize}} (uint32\+\_\+t dw\+M\+Ck, uint32\+\_\+t dw\+Use\+I\+AP)
\begin{DoxyCompactList}\small\item\em Initializes the flash driver. \end{DoxyCompactList}\item 
uint32\+\_\+t \mbox{\hyperlink{flashd_8h_a009778fe212a220f68e923e18ef14103}{F\+L\+A\+S\+H\+D\+\_\+\+Erase}} (uint32\+\_\+t dw\+Address)
\begin{DoxyCompactList}\small\item\em Erases the entire flash. \end{DoxyCompactList}\item 
uint32\+\_\+t \mbox{\hyperlink{flashd_8h_a7263e451f8b2b08eacdf89e46192c96b}{F\+L\+A\+S\+H\+D\+\_\+\+Erase\+Sector}} (uint32\+\_\+t dw\+Address)
\begin{DoxyCompactList}\small\item\em Erases flash by sector. \end{DoxyCompactList}\item 
uint32\+\_\+t \mbox{\hyperlink{flashd_8h_a454beb98ffe72e55aa69670313c4fd6c}{F\+L\+A\+S\+H\+D\+\_\+\+Erase\+Pages}} (uint32\+\_\+t dw\+Address, uint32\+\_\+t dw\+Page\+Num)
\begin{DoxyCompactList}\small\item\em Erases flash by pages. \end{DoxyCompactList}\item 
uint32\+\_\+t \mbox{\hyperlink{flashd_8h_a2bfa853dcc6963b6c053ab4e9417a12c}{F\+L\+A\+S\+H\+D\+\_\+\+Write}} (uint32\+\_\+t dw\+Address, const void $\ast$pv\+Buffer, uint32\+\_\+t dw\+Size)
\begin{DoxyCompactList}\small\item\em Writes a data buffer in the internal flash. \end{DoxyCompactList}\item 
uint32\+\_\+t \mbox{\hyperlink{flashd_8h_a0d24162d0c329727f162bfadd82d3577}{F\+L\+A\+S\+H\+D\+\_\+\+Lock}} (uint32\+\_\+t dw\+Start, uint32\+\_\+t dw\+End, uint32\+\_\+t $\ast$pdw\+Actual\+Start, uint32\+\_\+t $\ast$pdw\+Actual\+End)
\begin{DoxyCompactList}\small\item\em Locks all the regions in the given address range. The actual lock range is reported through two output parameters. \end{DoxyCompactList}\item 
uint32\+\_\+t \mbox{\hyperlink{flashd_8h_a246dfaa78f0b0263d03e00269708e564}{F\+L\+A\+S\+H\+D\+\_\+\+Unlock}} (uint32\+\_\+t dw\+Start, uint32\+\_\+t dw\+End, uint32\+\_\+t $\ast$pdw\+Actual\+Start, uint32\+\_\+t $\ast$pdw\+Actual\+End)
\begin{DoxyCompactList}\small\item\em Unlocks all the regions in the given address range. The actual unlock range is reported through two output parameters. \end{DoxyCompactList}\item 
uint32\+\_\+t \mbox{\hyperlink{flashd_8h_a5b69c1669fdef5e76ae147eb277b9834}{F\+L\+A\+S\+H\+D\+\_\+\+Is\+Locked}} (uint32\+\_\+t dw\+Start, uint32\+\_\+t dw\+End)
\begin{DoxyCompactList}\small\item\em Returns the number of locked regions inside the given address range. \end{DoxyCompactList}\item 
uint32\+\_\+t \mbox{\hyperlink{flashd_8h_afd3662ad92b776be125acdd3c053875d}{F\+L\+A\+S\+H\+D\+\_\+\+Set\+G\+P\+N\+VM}} (uint8\+\_\+t gpnvm)
\begin{DoxyCompactList}\small\item\em Sets the selected G\+P\+N\+VM bit. \end{DoxyCompactList}\item 
uint32\+\_\+t \mbox{\hyperlink{flashd_8h_acf9b33bbe1445c612908f2d42e494d56}{F\+L\+A\+S\+H\+D\+\_\+\+Clear\+G\+P\+N\+VM}} (uint8\+\_\+t gpnvm)
\begin{DoxyCompactList}\small\item\em Clears the selected G\+P\+N\+VM bit. \end{DoxyCompactList}\item 
uint32\+\_\+t \mbox{\hyperlink{flashd_8h_a46c2aea775411f461647edd941286cf9}{F\+L\+A\+S\+H\+D\+\_\+\+Is\+G\+P\+N\+V\+M\+Set}} (uint8\+\_\+t gpnvm)
\begin{DoxyCompactList}\small\item\em Check if the given G\+P\+N\+VM bit is set or not. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{flashd_8h_ad082f29bd40df2056e9bf9a678f3c206}\label{flashd_8h_ad082f29bd40df2056e9bf9a678f3c206}} 
uint32\+\_\+t {\bfseries F\+L\+A\+S\+H\+D\+\_\+\+Read\+Unique\+ID} (uint32\+\_\+t $\ast$pdw\+Unique\+ID)
\end{DoxyCompactItemize}


\subsection{Detailed Description}
The flash driver provides the unified interface for flash program operations. 

\subsection{Function Documentation}
\mbox{\Hypertarget{flashd_8h_acf9b33bbe1445c612908f2d42e494d56}\label{flashd_8h_acf9b33bbe1445c612908f2d42e494d56}} 
\index{flashd.h@{flashd.h}!FLASHD\_ClearGPNVM@{FLASHD\_ClearGPNVM}}
\index{FLASHD\_ClearGPNVM@{FLASHD\_ClearGPNVM}!flashd.h@{flashd.h}}
\subsubsection{\texorpdfstring{FLASHD\_ClearGPNVM()}{FLASHD\_ClearGPNVM()}}
{\footnotesize\ttfamily uint32\+\_\+t F\+L\+A\+S\+H\+D\+\_\+\+Clear\+G\+P\+N\+VM (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{uc\+G\+P\+N\+VM }\end{DoxyParamCaption})}



Clears the selected G\+P\+N\+VM bit. 


\begin{DoxyParams}{Parameters}
{\em gpnvm} & G\+P\+N\+VM bit index. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 if successful; otherwise returns an error code. 
\end{DoxyReturn}
\mbox{\Hypertarget{flashd_8h_a009778fe212a220f68e923e18ef14103}\label{flashd_8h_a009778fe212a220f68e923e18ef14103}} 
\index{flashd.h@{flashd.h}!FLASHD\_Erase@{FLASHD\_Erase}}
\index{FLASHD\_Erase@{FLASHD\_Erase}!flashd.h@{flashd.h}}
\subsubsection{\texorpdfstring{FLASHD\_Erase()}{FLASHD\_Erase()}}
{\footnotesize\ttfamily uint32\+\_\+t F\+L\+A\+S\+H\+D\+\_\+\+Erase (\begin{DoxyParamCaption}\item[{uint32\+\_\+t}]{dw\+Address }\end{DoxyParamCaption})}



Erases the entire flash. 


\begin{DoxyParams}{Parameters}
{\em dw\+Address} & Flash start address. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 if successful; otherwise returns an error code. 
\end{DoxyReturn}
\mbox{\Hypertarget{flashd_8h_a454beb98ffe72e55aa69670313c4fd6c}\label{flashd_8h_a454beb98ffe72e55aa69670313c4fd6c}} 
\index{flashd.h@{flashd.h}!FLASHD\_ErasePages@{FLASHD\_ErasePages}}
\index{FLASHD\_ErasePages@{FLASHD\_ErasePages}!flashd.h@{flashd.h}}
\subsubsection{\texorpdfstring{FLASHD\_ErasePages()}{FLASHD\_ErasePages()}}
{\footnotesize\ttfamily uint32\+\_\+t F\+L\+A\+S\+H\+D\+\_\+\+Erase\+Pages (\begin{DoxyParamCaption}\item[{uint32\+\_\+t}]{dw\+Address,  }\item[{uint32\+\_\+t}]{dw\+Page\+Num }\end{DoxyParamCaption})}



Erases flash by pages. 


\begin{DoxyParams}{Parameters}
{\em dw\+Address} & Start address of be erased pages. \\
\hline
{\em dw\+Page\+Num} & Number of pages to be erased with E\+PA command (4, 8, 16, 32)\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 if successful; otherwise returns an error code. 
\end{DoxyReturn}
\mbox{\Hypertarget{flashd_8h_a7263e451f8b2b08eacdf89e46192c96b}\label{flashd_8h_a7263e451f8b2b08eacdf89e46192c96b}} 
\index{flashd.h@{flashd.h}!FLASHD\_EraseSector@{FLASHD\_EraseSector}}
\index{FLASHD\_EraseSector@{FLASHD\_EraseSector}!flashd.h@{flashd.h}}
\subsubsection{\texorpdfstring{FLASHD\_EraseSector()}{FLASHD\_EraseSector()}}
{\footnotesize\ttfamily uint32\+\_\+t F\+L\+A\+S\+H\+D\+\_\+\+Erase\+Sector (\begin{DoxyParamCaption}\item[{uint32\+\_\+t}]{dw\+Address }\end{DoxyParamCaption})}



Erases flash by sector. 


\begin{DoxyParams}{Parameters}
{\em dw\+Address} & Start address of be erased sector.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 if successful; otherwise returns an error code. 
\end{DoxyReturn}
\mbox{\Hypertarget{flashd_8h_abcd1cf006641b2c0ffe0ef95615f6b32}\label{flashd_8h_abcd1cf006641b2c0ffe0ef95615f6b32}} 
\index{flashd.h@{flashd.h}!FLASHD\_Initialize@{FLASHD\_Initialize}}
\index{FLASHD\_Initialize@{FLASHD\_Initialize}!flashd.h@{flashd.h}}
\subsubsection{\texorpdfstring{FLASHD\_Initialize()}{FLASHD\_Initialize()}}
{\footnotesize\ttfamily void F\+L\+A\+S\+H\+D\+\_\+\+Initialize (\begin{DoxyParamCaption}\item[{uint32\+\_\+t}]{dw\+M\+Ck,  }\item[{uint32\+\_\+t}]{dw\+Use\+I\+AP }\end{DoxyParamCaption})}



Initializes the flash driver. 


\begin{DoxyParams}{Parameters}
{\em dw\+M\+Ck} & Master clock frequency in Hz. \\
\hline
{\em dw\+Use\+I\+AP} & 0\+: use E\+E\+FC controller interface, 1\+: use I\+AP interface. dw\+Use\+I\+AP should be set to 1 when running out of flash. \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{flashd_8h_a46c2aea775411f461647edd941286cf9}\label{flashd_8h_a46c2aea775411f461647edd941286cf9}} 
\index{flashd.h@{flashd.h}!FLASHD\_IsGPNVMSet@{FLASHD\_IsGPNVMSet}}
\index{FLASHD\_IsGPNVMSet@{FLASHD\_IsGPNVMSet}!flashd.h@{flashd.h}}
\subsubsection{\texorpdfstring{FLASHD\_IsGPNVMSet()}{FLASHD\_IsGPNVMSet()}}
{\footnotesize\ttfamily uint32\+\_\+t F\+L\+A\+S\+H\+D\+\_\+\+Is\+G\+P\+N\+V\+M\+Set (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{uc\+G\+P\+N\+VM }\end{DoxyParamCaption})}



Check if the given G\+P\+N\+VM bit is set or not. 


\begin{DoxyParams}{Parameters}
{\em gpnvm} & G\+P\+N\+VM bit index. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
1 if the given G\+P\+N\+VM bit is currently set; otherwise returns 0. 
\end{DoxyReturn}
\mbox{\Hypertarget{flashd_8h_a5b69c1669fdef5e76ae147eb277b9834}\label{flashd_8h_a5b69c1669fdef5e76ae147eb277b9834}} 
\index{flashd.h@{flashd.h}!FLASHD\_IsLocked@{FLASHD\_IsLocked}}
\index{FLASHD\_IsLocked@{FLASHD\_IsLocked}!flashd.h@{flashd.h}}
\subsubsection{\texorpdfstring{FLASHD\_IsLocked()}{FLASHD\_IsLocked()}}
{\footnotesize\ttfamily uint32\+\_\+t F\+L\+A\+S\+H\+D\+\_\+\+Is\+Locked (\begin{DoxyParamCaption}\item[{uint32\+\_\+t}]{start,  }\item[{uint32\+\_\+t}]{end }\end{DoxyParamCaption})}



Returns the number of locked regions inside the given address range. 


\begin{DoxyParams}{Parameters}
{\em start} & Start address of range \\
\hline
{\em end} & End address of range. \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{flashd_8h_a0d24162d0c329727f162bfadd82d3577}\label{flashd_8h_a0d24162d0c329727f162bfadd82d3577}} 
\index{flashd.h@{flashd.h}!FLASHD\_Lock@{FLASHD\_Lock}}
\index{FLASHD\_Lock@{FLASHD\_Lock}!flashd.h@{flashd.h}}
\subsubsection{\texorpdfstring{FLASHD\_Lock()}{FLASHD\_Lock()}}
{\footnotesize\ttfamily uint32\+\_\+t F\+L\+A\+S\+H\+D\+\_\+\+Lock (\begin{DoxyParamCaption}\item[{uint32\+\_\+t}]{start,  }\item[{uint32\+\_\+t}]{end,  }\item[{uint32\+\_\+t $\ast$}]{p\+Actual\+Start,  }\item[{uint32\+\_\+t $\ast$}]{p\+Actual\+End }\end{DoxyParamCaption})}



Locks all the regions in the given address range. The actual lock range is reported through two output parameters. 


\begin{DoxyParams}{Parameters}
{\em start} & Start address of lock range. \\
\hline
{\em end} & End address of lock range. \\
\hline
{\em p\+Actual\+Start} & Start address of the actual lock range (optional). \\
\hline
{\em p\+Actual\+End} & End address of the actual lock range (optional). \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 if successful, otherwise returns an error code. 
\end{DoxyReturn}
\mbox{\Hypertarget{flashd_8h_afd3662ad92b776be125acdd3c053875d}\label{flashd_8h_afd3662ad92b776be125acdd3c053875d}} 
\index{flashd.h@{flashd.h}!FLASHD\_SetGPNVM@{FLASHD\_SetGPNVM}}
\index{FLASHD\_SetGPNVM@{FLASHD\_SetGPNVM}!flashd.h@{flashd.h}}
\subsubsection{\texorpdfstring{FLASHD\_SetGPNVM()}{FLASHD\_SetGPNVM()}}
{\footnotesize\ttfamily uint32\+\_\+t F\+L\+A\+S\+H\+D\+\_\+\+Set\+G\+P\+N\+VM (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{uc\+G\+P\+N\+VM }\end{DoxyParamCaption})}



Sets the selected G\+P\+N\+VM bit. 


\begin{DoxyParams}{Parameters}
{\em gpnvm} & G\+P\+N\+VM bit index. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 if successful; otherwise returns an error code. 
\end{DoxyReturn}
\mbox{\Hypertarget{flashd_8h_a246dfaa78f0b0263d03e00269708e564}\label{flashd_8h_a246dfaa78f0b0263d03e00269708e564}} 
\index{flashd.h@{flashd.h}!FLASHD\_Unlock@{FLASHD\_Unlock}}
\index{FLASHD\_Unlock@{FLASHD\_Unlock}!flashd.h@{flashd.h}}
\subsubsection{\texorpdfstring{FLASHD\_Unlock()}{FLASHD\_Unlock()}}
{\footnotesize\ttfamily uint32\+\_\+t F\+L\+A\+S\+H\+D\+\_\+\+Unlock (\begin{DoxyParamCaption}\item[{uint32\+\_\+t}]{start,  }\item[{uint32\+\_\+t}]{end,  }\item[{uint32\+\_\+t $\ast$}]{p\+Actual\+Start,  }\item[{uint32\+\_\+t $\ast$}]{p\+Actual\+End }\end{DoxyParamCaption})}



Unlocks all the regions in the given address range. The actual unlock range is reported through two output parameters. 


\begin{DoxyParams}{Parameters}
{\em start} & Start address of unlock range. \\
\hline
{\em end} & End address of unlock range. \\
\hline
{\em p\+Actual\+Start} & Start address of the actual unlock range (optional). \\
\hline
{\em p\+Actual\+End} & End address of the actual unlock range (optional). \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 if successful, otherwise returns an error code. 
\end{DoxyReturn}
\mbox{\Hypertarget{flashd_8h_a2bfa853dcc6963b6c053ab4e9417a12c}\label{flashd_8h_a2bfa853dcc6963b6c053ab4e9417a12c}} 
\index{flashd.h@{flashd.h}!FLASHD\_Write@{FLASHD\_Write}}
\index{FLASHD\_Write@{FLASHD\_Write}!flashd.h@{flashd.h}}
\subsubsection{\texorpdfstring{FLASHD\_Write()}{FLASHD\_Write()}}
{\footnotesize\ttfamily uint32\+\_\+t F\+L\+A\+S\+H\+D\+\_\+\+Write (\begin{DoxyParamCaption}\item[{uint32\+\_\+t}]{dw\+Address,  }\item[{const void $\ast$}]{pv\+Buffer,  }\item[{uint32\+\_\+t}]{dw\+Size }\end{DoxyParamCaption})}



Writes a data buffer in the internal flash. 

\begin{DoxyNote}{Note}
This function works in polling mode, and thus only returns when the data has been effectively written. 
\end{DoxyNote}

\begin{DoxyParams}{Parameters}
{\em address} & Write address. \\
\hline
{\em p\+Buffer} & Data buffer. \\
\hline
{\em size} & Size of data buffer in bytes. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 if successful, otherwise returns an error code. 
\end{DoxyReturn}
