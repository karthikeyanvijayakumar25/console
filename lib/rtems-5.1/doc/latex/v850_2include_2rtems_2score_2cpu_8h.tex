\hypertarget{v850_2include_2rtems_2score_2cpu_8h}{}\section{cpukit/score/cpu/v850/include/rtems/score/cpu.h File Reference}
\label{v850_2include_2rtems_2score_2cpu_8h}\index{cpukit/score/cpu/v850/include/rtems/score/cpu.h@{cpukit/score/cpu/v850/include/rtems/score/cpu.h}}


V850 C\+PU Department Source.  


{\ttfamily \#include $<$rtems/score/basedefs.\+h$>$}\newline
{\ttfamily \#include $<$rtems/score/v850.\+h$>$}\newline
\subsection*{Data Structures}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{structContext__Control}{Context\+\_\+\+Control}}
\begin{DoxyCompactList}\small\item\em Thread register context. \end{DoxyCompactList}\item 
struct \mbox{\hyperlink{structCPU__Interrupt__frame}{C\+P\+U\+\_\+\+Interrupt\+\_\+frame}}
\begin{DoxyCompactList}\small\item\em Interrupt stack frame (I\+SF). \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \mbox{\hyperlink{v850_2include_2rtems_2score_2cpu_8h_a1eca01dbb1ef2873349cc4e222509f0a}{C\+P\+U\+\_\+\+S\+I\+M\+P\+L\+E\+\_\+\+V\+E\+C\+T\+O\+R\+E\+D\+\_\+\+I\+N\+T\+E\+R\+R\+U\+P\+TS}}~\mbox{\hyperlink{group__RTEMSScoreBaseDefs_gaa93f0eb578d23995850d61f7d61c55c1}{F\+A\+L\+SE}}
\item 
\mbox{\Hypertarget{v850_2include_2rtems_2score_2cpu_8h_a112f88f13afe8bb8f1b13f1ca7e09b8d}\label{v850_2include_2rtems_2score_2cpu_8h_a112f88f13afe8bb8f1b13f1ca7e09b8d}} 
\#define {\bfseries C\+P\+U\+\_\+\+H\+A\+R\+D\+W\+A\+R\+E\+\_\+\+FP}~\mbox{\hyperlink{group__RTEMSScoreBaseDefs_gaa93f0eb578d23995850d61f7d61c55c1}{F\+A\+L\+SE}}
\item 
\mbox{\Hypertarget{v850_2include_2rtems_2score_2cpu_8h_a304f78c61edce38bb88e909f90a326dc}\label{v850_2include_2rtems_2score_2cpu_8h_a304f78c61edce38bb88e909f90a326dc}} 
\#define {\bfseries C\+P\+U\+\_\+\+S\+O\+F\+T\+W\+A\+R\+E\+\_\+\+FP}~\mbox{\hyperlink{group__RTEMSScoreBaseDefs_gaa93f0eb578d23995850d61f7d61c55c1}{F\+A\+L\+SE}}
\item 
\mbox{\Hypertarget{v850_2include_2rtems_2score_2cpu_8h_a225de03a8647bf307a73cf907969778d}\label{v850_2include_2rtems_2score_2cpu_8h_a225de03a8647bf307a73cf907969778d}} 
\#define {\bfseries C\+P\+U\+\_\+\+A\+L\+L\+\_\+\+T\+A\+S\+K\+S\+\_\+\+A\+R\+E\+\_\+\+FP}~\mbox{\hyperlink{group__RTEMSScoreBaseDefs_gaa93f0eb578d23995850d61f7d61c55c1}{F\+A\+L\+SE}}
\item 
\mbox{\Hypertarget{v850_2include_2rtems_2score_2cpu_8h_af1c906c8ee4c3d012dc456285e42d3ee}\label{v850_2include_2rtems_2score_2cpu_8h_af1c906c8ee4c3d012dc456285e42d3ee}} 
\#define {\bfseries C\+P\+U\+\_\+\+I\+D\+L\+E\+\_\+\+T\+A\+S\+K\+\_\+\+I\+S\+\_\+\+FP}~\mbox{\hyperlink{group__RTEMSScoreBaseDefs_gaa93f0eb578d23995850d61f7d61c55c1}{F\+A\+L\+SE}}
\item 
\mbox{\Hypertarget{v850_2include_2rtems_2score_2cpu_8h_a155bcf88149016c6c58f30eeab9f1598}\label{v850_2include_2rtems_2score_2cpu_8h_a155bcf88149016c6c58f30eeab9f1598}} 
\#define {\bfseries C\+P\+U\+\_\+\+U\+S\+E\+\_\+\+D\+E\+F\+E\+R\+R\+E\+D\+\_\+\+F\+P\+\_\+\+S\+W\+I\+T\+CH}~\mbox{\hyperlink{group__RTEMSScoreBaseDefs_gaa93f0eb578d23995850d61f7d61c55c1}{F\+A\+L\+SE}}
\item 
\mbox{\Hypertarget{v850_2include_2rtems_2score_2cpu_8h_a0c634f4a6bc9236bcacafc9b6119e011}\label{v850_2include_2rtems_2score_2cpu_8h_a0c634f4a6bc9236bcacafc9b6119e011}} 
\#define {\bfseries C\+P\+U\+\_\+\+E\+N\+A\+B\+L\+E\+\_\+\+R\+O\+B\+U\+S\+T\+\_\+\+T\+H\+R\+E\+A\+D\+\_\+\+D\+I\+S\+P\+A\+T\+CH}~\mbox{\hyperlink{group__RTEMSScoreBaseDefs_gaa93f0eb578d23995850d61f7d61c55c1}{F\+A\+L\+SE}}
\item 
\#define \mbox{\hyperlink{v850_2include_2rtems_2score_2cpu_8h_ac40d98a563f63934a5775f1366ba1b67}{C\+P\+U\+\_\+\+S\+T\+A\+C\+K\+\_\+\+G\+R\+O\+W\+S\+\_\+\+UP}}~\mbox{\hyperlink{group__RTEMSScoreBaseDefs_gaa93f0eb578d23995850d61f7d61c55c1}{F\+A\+L\+SE}}
\item 
\mbox{\Hypertarget{v850_2include_2rtems_2score_2cpu_8h_aafa1399e268a9ae6adf6d6aad4371688}\label{v850_2include_2rtems_2score_2cpu_8h_aafa1399e268a9ae6adf6d6aad4371688}} 
\#define {\bfseries C\+P\+U\+\_\+\+C\+A\+C\+H\+E\+\_\+\+L\+I\+N\+E\+\_\+\+B\+Y\+T\+ES}~32
\item 
\mbox{\Hypertarget{v850_2include_2rtems_2score_2cpu_8h_acd43704c7821a2c042d212801156584e}\label{v850_2include_2rtems_2score_2cpu_8h_acd43704c7821a2c042d212801156584e}} 
\#define {\bfseries C\+P\+U\+\_\+\+S\+T\+R\+U\+C\+T\+U\+R\+E\+\_\+\+A\+L\+I\+G\+N\+M\+E\+NT}
\item 
\mbox{\Hypertarget{v850_2include_2rtems_2score_2cpu_8h_af8823e651e33b9683e0d89e5a8054ee6}\label{v850_2include_2rtems_2score_2cpu_8h_af8823e651e33b9683e0d89e5a8054ee6}} 
\#define {\bfseries C\+P\+U\+\_\+\+M\+O\+D\+E\+S\+\_\+\+I\+N\+T\+E\+R\+R\+U\+P\+T\+\_\+\+M\+A\+SK}~0x00000001
\item 
\mbox{\Hypertarget{v850_2include_2rtems_2score_2cpu_8h_adea68a7fa02909edcebee08748f94223}\label{v850_2include_2rtems_2score_2cpu_8h_adea68a7fa02909edcebee08748f94223}} 
\#define {\bfseries C\+P\+U\+\_\+\+M\+A\+X\+I\+M\+U\+M\+\_\+\+P\+R\+O\+C\+E\+S\+S\+O\+RS}~32
\item 
\#define \mbox{\hyperlink{group__RTEMSScoreCPUV850CPUContext_ga896055157b72692a6141f7c0039eabdf}{\+\_\+\+C\+P\+U\+\_\+\+Context\+\_\+\+Get\+\_\+\+SP}}(\+\_\+context)~(\+\_\+context)-\/$>$r3\+\_\+stack\+\_\+pointer
\item 
\#define \mbox{\hyperlink{group__RTEMSScoreCPUV850CPUInterrupt_gab94869be93a41da88a10fa59771ce2c9}{C\+P\+U\+\_\+\+M\+P\+C\+I\+\_\+\+R\+E\+C\+E\+I\+V\+E\+\_\+\+S\+E\+R\+V\+E\+R\+\_\+\+E\+X\+T\+R\+A\+\_\+\+S\+T\+A\+CK}}~0
\item 
\#define \mbox{\hyperlink{group__RTEMSScoreCPUV850CPUInterrupt_ga47f6e4d60c72b5f65fc775b0b5dd14ec}{C\+P\+U\+\_\+\+P\+R\+O\+V\+I\+D\+E\+S\+\_\+\+I\+S\+R\+\_\+\+I\+S\+\_\+\+I\+N\+\_\+\+P\+R\+O\+G\+R\+E\+SS}}~\mbox{\hyperlink{group__RTEMSScoreBaseDefs_gaa93f0eb578d23995850d61f7d61c55c1}{F\+A\+L\+SE}}
\item 
\mbox{\Hypertarget{v850_2include_2rtems_2score_2cpu_8h_a4c92ceea7549cc7b21db2c466916b733}\label{v850_2include_2rtems_2score_2cpu_8h_a4c92ceea7549cc7b21db2c466916b733}} 
\#define {\bfseries C\+P\+U\+\_\+\+S\+T\+A\+C\+K\+\_\+\+M\+I\+N\+I\+M\+U\+M\+\_\+\+S\+I\+ZE}~(1024$\ast$4)
\item 
\mbox{\Hypertarget{v850_2include_2rtems_2score_2cpu_8h_aea4bd2905092d69bc92fbff6103ced8b}\label{v850_2include_2rtems_2score_2cpu_8h_aea4bd2905092d69bc92fbff6103ced8b}} 
\#define {\bfseries C\+P\+U\+\_\+\+S\+I\+Z\+E\+O\+F\+\_\+\+P\+O\+I\+N\+T\+ER}~4
\item 
\#define \mbox{\hyperlink{v850_2include_2rtems_2score_2cpu_8h_ae526a309e32001688261048b19cdb7d8}{C\+P\+U\+\_\+\+A\+L\+I\+G\+N\+M\+E\+NT}}~8
\item 
\#define \mbox{\hyperlink{v850_2include_2rtems_2score_2cpu_8h_ac71c1e0159c32144a04f18646ede252b}{C\+P\+U\+\_\+\+H\+E\+A\+P\+\_\+\+A\+L\+I\+G\+N\+M\+E\+NT}}~\mbox{\hyperlink{v850_2include_2rtems_2score_2cpu_8h_ae526a309e32001688261048b19cdb7d8}{C\+P\+U\+\_\+\+A\+L\+I\+G\+N\+M\+E\+NT}}
\item 
\#define \mbox{\hyperlink{v850_2include_2rtems_2score_2cpu_8h_a8aed43eb1b3c346772c127482b4b5372}{C\+P\+U\+\_\+\+S\+T\+A\+C\+K\+\_\+\+A\+L\+I\+G\+N\+M\+E\+NT}}~4
\item 
\mbox{\Hypertarget{v850_2include_2rtems_2score_2cpu_8h_a6a578627686e1020a28f5a295703ca74}\label{v850_2include_2rtems_2score_2cpu_8h_a6a578627686e1020a28f5a295703ca74}} 
\#define {\bfseries C\+P\+U\+\_\+\+I\+N\+T\+E\+R\+R\+U\+P\+T\+\_\+\+S\+T\+A\+C\+K\+\_\+\+A\+L\+I\+G\+N\+M\+E\+NT}~\mbox{\hyperlink{no__cpu_2include_2rtems_2score_2cpu_8h_aafa1399e268a9ae6adf6d6aad4371688}{C\+P\+U\+\_\+\+C\+A\+C\+H\+E\+\_\+\+L\+I\+N\+E\+\_\+\+B\+Y\+T\+ES}}
\item 
\#define \mbox{\hyperlink{group__RTEMSScoreCPUV850CPUInterrupt_gaca3fde6f372ee51fdd893c260e7d7146}{\+\_\+\+C\+P\+U\+\_\+\+I\+S\+R\+\_\+\+Disable}}(\+\_\+isr\+\_\+cookie)
\item 
\#define \mbox{\hyperlink{group__RTEMSScoreCPUV850CPUInterrupt_gae3b1e2cd1ea4020d229e759569459664}{\+\_\+\+C\+P\+U\+\_\+\+I\+S\+R\+\_\+\+Enable}}(\+\_\+isr\+\_\+cookie)
\item 
\#define \mbox{\hyperlink{group__RTEMSScoreCPUV850CPUInterrupt_gac7e58e16c6b558daf31fe8f9dbec5a69}{\+\_\+\+C\+P\+U\+\_\+\+I\+S\+R\+\_\+\+Flash}}(\+\_\+isr\+\_\+cookie)
\item 
\#define \mbox{\hyperlink{group__RTEMSScoreCPUV850CPUInterrupt_gaed8717a2f15938d954c7124cd11e899f}{\+\_\+\+C\+P\+U\+\_\+\+I\+S\+R\+\_\+\+Set\+\_\+level}}(new\+\_\+level)
\item 
\#define \mbox{\hyperlink{v850_2include_2rtems_2score_2cpu_8h_a3fb67e174d7b61251322cd32126acd1a}{\+\_\+\+C\+P\+U\+\_\+\+Context\+\_\+\+Restart\+\_\+self}}(\+\_\+the\+\_\+context)~\mbox{\hyperlink{group__RTEMSScoreCPUARM_ga80726ebfe00f31a88b086cc4474c472f}{\+\_\+\+C\+P\+U\+\_\+\+Context\+\_\+restore}}( (\+\_\+the\+\_\+context) );
\item 
\#define \mbox{\hyperlink{v850_2include_2rtems_2score_2cpu_8h_a4c07c0150ec7894dd128993e931ceee5}{\+\_\+\+C\+P\+U\+\_\+\+Fatal\+\_\+halt}}(\+\_\+source,  \+\_\+error)
\item 
\mbox{\Hypertarget{v850_2include_2rtems_2score_2cpu_8h_ab0aff7a561b9c030a4d88eff201f4688}\label{v850_2include_2rtems_2score_2cpu_8h_ab0aff7a561b9c030a4d88eff201f4688}} 
\#define {\bfseries C\+P\+U\+\_\+\+U\+S\+E\+\_\+\+G\+E\+N\+E\+R\+I\+C\+\_\+\+B\+I\+T\+F\+I\+E\+L\+D\+\_\+\+C\+O\+DE}~\mbox{\hyperlink{group__RTEMSScoreBaseDefs_gaa8cecfc5c5c054d2875c03e77b7be15d}{T\+R\+UE}}
\end{DoxyCompactItemize}
\subsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{v850_2include_2rtems_2score_2cpu_8h_a09f1943559c701e24e5057e9aaea0d13}\label{v850_2include_2rtems_2score_2cpu_8h_a09f1943559c701e24e5057e9aaea0d13}} 
typedef \mbox{\hyperlink{structCPU__Interrupt__frame}{C\+P\+U\+\_\+\+Interrupt\+\_\+frame}} {\bfseries C\+P\+U\+\_\+\+Exception\+\_\+frame}
\item 
\mbox{\Hypertarget{v850_2include_2rtems_2score_2cpu_8h_a67f8550aad58bccb6fcb4589894444ad}\label{v850_2include_2rtems_2score_2cpu_8h_a67f8550aad58bccb6fcb4589894444ad}} 
typedef uint32\+\_\+t {\bfseries C\+P\+U\+\_\+\+Counter\+\_\+ticks}
\item 
typedef uintptr\+\_\+t \mbox{\hyperlink{v850_2include_2rtems_2score_2cpu_8h_a9fca17f81f850e128fcc8ed5b87ff2ab}{C\+P\+U\+\_\+\+Uint32ptr}}
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{group__RTEMSScoreBaseDefs_gac216239df231d5dbd15e3520b0b9313f}{R\+T\+E\+M\+S\+\_\+\+I\+N\+L\+I\+N\+E\+\_\+\+R\+O\+U\+T\+I\+NE}} bool \mbox{\hyperlink{group__RTEMSScoreCPUV850CPUInterrupt_ga5254669b54a06e96ebb585fd50a02c4d}{\+\_\+\+C\+P\+U\+\_\+\+I\+S\+R\+\_\+\+Is\+\_\+enabled}} (uint32\+\_\+t level)
\begin{DoxyCompactList}\small\item\em Returns true if interrupts are enabled in the specified I\+SR level, otherwise returns false. \end{DoxyCompactList}\item 
uint32\+\_\+t \mbox{\hyperlink{group__RTEMSScoreCPUV850CPUInterrupt_ga1d9dcab9170d532b6634a5620385adbd}{\+\_\+\+C\+P\+U\+\_\+\+I\+S\+R\+\_\+\+Get\+\_\+level}} (void)
\begin{DoxyCompactList}\small\item\em Returns the interrupt level of the executing thread. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{v850_2include_2rtems_2score_2cpu_8h_aff386644c2f5a1d6e8b57fd8f290cadc}{\+\_\+\+C\+P\+U\+\_\+\+Context\+\_\+\+Initialize}} (\mbox{\hyperlink{structContext__Control}{Context\+\_\+\+Control}} $\ast$the\+\_\+context, uint32\+\_\+t $\ast$stack\+\_\+base, uint32\+\_\+t \mbox{\hyperlink{sun4u_2tte_8h_a245260f6f74972558f61b85227df5aae}{size}}, uint32\+\_\+t new\+\_\+level, void $\ast$entry\+\_\+point, bool is\+\_\+fp, void $\ast$tls\+\_\+area)
\item 
void \mbox{\hyperlink{group__RTEMSScoreCPUARM_ga869484e3d851b032fd826c69ff21fc72}{\+\_\+\+C\+P\+U\+\_\+\+Initialize}} (void)
\begin{DoxyCompactList}\small\item\em C\+PU initialize. This routine performs C\+PU dependent initialization. \end{DoxyCompactList}\item 
void $\ast$ \mbox{\hyperlink{group__RTEMSScoreCPUARM_ga903a802003c95d6ef5206cb330424a1b}{\+\_\+\+C\+P\+U\+\_\+\+Thread\+\_\+\+Idle\+\_\+body}} (uintptr\+\_\+t ignored)
\item 
void \mbox{\hyperlink{group__RTEMSScoreCPUV850CPUContext_gaa9f8cc989454b28232e5375e30c90970}{\+\_\+\+C\+P\+U\+\_\+\+Context\+\_\+switch}} (\mbox{\hyperlink{structContext__Control}{Context\+\_\+\+Control}} $\ast$run, \mbox{\hyperlink{structContext__Control}{Context\+\_\+\+Control}} $\ast$heir)
\begin{DoxyCompactList}\small\item\em C\+PU switch context. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{group__RTEMSScoreCPUV850CPUContext_ga80726ebfe00f31a88b086cc4474c472f}{\+\_\+\+C\+P\+U\+\_\+\+Context\+\_\+restore}} (\mbox{\hyperlink{structContext__Control}{Context\+\_\+\+Control}} $\ast$new\+\_\+context) \mbox{\hyperlink{group__RTEMSScoreBaseDefs_gaa2f0ed67aa174f684bb31b7e8bdb386f}{R\+T\+E\+M\+S\+\_\+\+N\+O\+\_\+\+R\+E\+T\+U\+RN}}
\begin{DoxyCompactList}\small\item\em S\+P\+A\+RC specific context restore. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{group__RTEMSScoreCPUARM_gaa34a35de496258577c1454ba1ee07ce0}{\+\_\+\+C\+P\+U\+\_\+\+Exception\+\_\+frame\+\_\+print}} (const \mbox{\hyperlink{structCPU__Exception__frame}{C\+P\+U\+\_\+\+Exception\+\_\+frame}} $\ast$frame)
\begin{DoxyCompactList}\small\item\em Prints the exception frame via \mbox{\hyperlink{bspIo_8h_a380cfecc8035cec8a13b68c0cb90f32f}{printk()}}. \end{DoxyCompactList}\item 
uint32\+\_\+t \mbox{\hyperlink{group__RTEMSScoreCPUARM_gaa675150e5d00169c99410a82011b6117}{\+\_\+\+C\+P\+U\+\_\+\+Counter\+\_\+frequency}} (void)
\begin{DoxyCompactList}\small\item\em Returns the current C\+PU counter frequency in Hz. \end{DoxyCompactList}\item 
\mbox{\hyperlink{no__cpu_2include_2rtems_2score_2cpu_8h_a67f8550aad58bccb6fcb4589894444ad}{C\+P\+U\+\_\+\+Counter\+\_\+ticks}} \mbox{\hyperlink{group__RTEMSScoreCPUARM_gac016ae4ed92ed2607bd65408a36d908b}{\+\_\+\+C\+P\+U\+\_\+\+Counter\+\_\+read}} (void)
\begin{DoxyCompactList}\small\item\em Returns the current C\+PU counter value. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
V850 C\+PU Department Source. 

This include file contains information pertaining to the v850 processor. 

\subsection{Macro Definition Documentation}
\mbox{\Hypertarget{v850_2include_2rtems_2score_2cpu_8h_a3fb67e174d7b61251322cd32126acd1a}\label{v850_2include_2rtems_2score_2cpu_8h_a3fb67e174d7b61251322cd32126acd1a}} 
\index{cpu.h@{cpu.h}!\_CPU\_Context\_Restart\_self@{\_CPU\_Context\_Restart\_self}}
\index{\_CPU\_Context\_Restart\_self@{\_CPU\_Context\_Restart\_self}!cpu.h@{cpu.h}}
\subsubsection{\texorpdfstring{\_CPU\_Context\_Restart\_self}{\_CPU\_Context\_Restart\_self}}
{\footnotesize\ttfamily \#define \+\_\+\+C\+P\+U\+\_\+\+Context\+\_\+\+Restart\+\_\+self(\begin{DoxyParamCaption}\item[{}]{\+\_\+the\+\_\+context }\end{DoxyParamCaption})~\mbox{\hyperlink{group__RTEMSScoreCPUARM_ga80726ebfe00f31a88b086cc4474c472f}{\+\_\+\+C\+P\+U\+\_\+\+Context\+\_\+restore}}( (\+\_\+the\+\_\+context) );}

This routine is responsible for somehow restarting the currently executing task. If you are lucky, then all that is necessary is restoring the context. Otherwise, there will need to be a special assembly routine which does something special in this case. For many ports, simply adding a label to the restore path of \mbox{\hyperlink{group__RTEMSScoreCPUARM_gaa9f8cc989454b28232e5375e30c90970}{\+\_\+\+C\+P\+U\+\_\+\+Context\+\_\+switch}} will work. On other ports, it may be possibly to load a few arguments and jump to the restore path. It will not work if restarting self conflicts with the stack frame assumptions of restoring a context.

Port Specific Information\+:

On the v850, we require a special entry point to restart a task. \mbox{\Hypertarget{v850_2include_2rtems_2score_2cpu_8h_a4c07c0150ec7894dd128993e931ceee5}\label{v850_2include_2rtems_2score_2cpu_8h_a4c07c0150ec7894dd128993e931ceee5}} 
\index{cpu.h@{cpu.h}!\_CPU\_Fatal\_halt@{\_CPU\_Fatal\_halt}}
\index{\_CPU\_Fatal\_halt@{\_CPU\_Fatal\_halt}!cpu.h@{cpu.h}}
\subsubsection{\texorpdfstring{\_CPU\_Fatal\_halt}{\_CPU\_Fatal\_halt}}
{\footnotesize\ttfamily \#define \+\_\+\+C\+P\+U\+\_\+\+Fatal\+\_\+halt(\begin{DoxyParamCaption}\item[{}]{\+\_\+source,  }\item[{}]{\+\_\+error }\end{DoxyParamCaption})}

{\bfseries Value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keywordflow}{do} \{ \(\backslash\)}
\DoxyCodeLine{    \_\_asm\_\_ \_\_volatile\_\_ ( \textcolor{stringliteral}{"di"} ); \(\backslash\)}
\DoxyCodeLine{    \_\_asm\_\_ \_\_volatile\_\_ ( \textcolor{stringliteral}{"mov \%0, r10; "} : \textcolor{stringliteral}{"=r"} ((\_error)) ); \(\backslash\)}
\DoxyCodeLine{    \_\_asm\_\_ \_\_volatile\_\_ ( \textcolor{stringliteral}{"halt"} ); \(\backslash\)}
\DoxyCodeLine{  \} \textcolor{keywordflow}{while} (0)}

\end{DoxyCode}
This routine copies \+\_\+error into a known place -- typically a stack location or a register, optionally disables interrupts, and halts/stops the C\+PU.

Port Specific Information\+:

Move the error code into r10, disable interrupts and halt. \mbox{\Hypertarget{v850_2include_2rtems_2score_2cpu_8h_ae526a309e32001688261048b19cdb7d8}\label{v850_2include_2rtems_2score_2cpu_8h_ae526a309e32001688261048b19cdb7d8}} 
\index{cpu.h@{cpu.h}!CPU\_ALIGNMENT@{CPU\_ALIGNMENT}}
\index{CPU\_ALIGNMENT@{CPU\_ALIGNMENT}!cpu.h@{cpu.h}}
\subsubsection{\texorpdfstring{CPU\_ALIGNMENT}{CPU\_ALIGNMENT}}
{\footnotesize\ttfamily \#define C\+P\+U\+\_\+\+A\+L\+I\+G\+N\+M\+E\+NT~8}

C\+PU\textquotesingle{}s worst alignment requirement for data types on a byte boundary. This alignment does not take into account the requirements for the stack.

Port Specific Information\+:

There is no apparent reason why this should be larger than 8. \mbox{\Hypertarget{v850_2include_2rtems_2score_2cpu_8h_ac71c1e0159c32144a04f18646ede252b}\label{v850_2include_2rtems_2score_2cpu_8h_ac71c1e0159c32144a04f18646ede252b}} 
\index{cpu.h@{cpu.h}!CPU\_HEAP\_ALIGNMENT@{CPU\_HEAP\_ALIGNMENT}}
\index{CPU\_HEAP\_ALIGNMENT@{CPU\_HEAP\_ALIGNMENT}!cpu.h@{cpu.h}}
\subsubsection{\texorpdfstring{CPU\_HEAP\_ALIGNMENT}{CPU\_HEAP\_ALIGNMENT}}
{\footnotesize\ttfamily \#define C\+P\+U\+\_\+\+H\+E\+A\+P\+\_\+\+A\+L\+I\+G\+N\+M\+E\+NT~\mbox{\hyperlink{v850_2include_2rtems_2score_2cpu_8h_ae526a309e32001688261048b19cdb7d8}{C\+P\+U\+\_\+\+A\+L\+I\+G\+N\+M\+E\+NT}}}

This number corresponds to the byte alignment requirement for the heap handler. This alignment requirement may be stricter than that for the data types alignment specified by \mbox{\hyperlink{v850_2include_2rtems_2score_2cpu_8h_ae526a309e32001688261048b19cdb7d8}{C\+P\+U\+\_\+\+A\+L\+I\+G\+N\+M\+E\+NT}}. It is common for the heap to follow the same alignment requirement as \mbox{\hyperlink{v850_2include_2rtems_2score_2cpu_8h_ae526a309e32001688261048b19cdb7d8}{C\+P\+U\+\_\+\+A\+L\+I\+G\+N\+M\+E\+NT}}. If the \mbox{\hyperlink{v850_2include_2rtems_2score_2cpu_8h_ae526a309e32001688261048b19cdb7d8}{C\+P\+U\+\_\+\+A\+L\+I\+G\+N\+M\+E\+NT}} is strict enough for the heap, then this should be set to \mbox{\hyperlink{v850_2include_2rtems_2score_2cpu_8h_ae526a309e32001688261048b19cdb7d8}{C\+P\+U\+\_\+\+A\+L\+I\+G\+N\+M\+E\+NT}}.

\begin{DoxyNote}{Note}
This does not have to be a power of 2 although it should be a multiple of 2 greater than or equal to 2. The requirement to be a multiple of 2 is because the heap uses the least significant field of the front and back flags to indicate that a block is in use or free. So you do not want any odd length blocks really putting length data in that bit.
\end{DoxyNote}
On byte oriented architectures, \mbox{\hyperlink{v850_2include_2rtems_2score_2cpu_8h_ac71c1e0159c32144a04f18646ede252b}{C\+P\+U\+\_\+\+H\+E\+A\+P\+\_\+\+A\+L\+I\+G\+N\+M\+E\+NT}} normally will have to be greater or equal to than \mbox{\hyperlink{v850_2include_2rtems_2score_2cpu_8h_ae526a309e32001688261048b19cdb7d8}{C\+P\+U\+\_\+\+A\+L\+I\+G\+N\+M\+E\+NT}} to ensure that elements allocated from the heap meet all restrictions.

Port Specific Information\+:

There is no apparent reason why this should be larger than C\+P\+U\+\_\+\+A\+L\+I\+G\+N\+M\+E\+NT. \mbox{\Hypertarget{v850_2include_2rtems_2score_2cpu_8h_a1eca01dbb1ef2873349cc4e222509f0a}\label{v850_2include_2rtems_2score_2cpu_8h_a1eca01dbb1ef2873349cc4e222509f0a}} 
\index{cpu.h@{cpu.h}!CPU\_SIMPLE\_VECTORED\_INTERRUPTS@{CPU\_SIMPLE\_VECTORED\_INTERRUPTS}}
\index{CPU\_SIMPLE\_VECTORED\_INTERRUPTS@{CPU\_SIMPLE\_VECTORED\_INTERRUPTS}!cpu.h@{cpu.h}}
\subsubsection{\texorpdfstring{CPU\_SIMPLE\_VECTORED\_INTERRUPTS}{CPU\_SIMPLE\_VECTORED\_INTERRUPTS}}
{\footnotesize\ttfamily \#define C\+P\+U\+\_\+\+S\+I\+M\+P\+L\+E\+\_\+\+V\+E\+C\+T\+O\+R\+E\+D\+\_\+\+I\+N\+T\+E\+R\+R\+U\+P\+TS~\mbox{\hyperlink{group__RTEMSScoreBaseDefs_gaa93f0eb578d23995850d61f7d61c55c1}{F\+A\+L\+SE}}}

Does the C\+PU follow the simple vectored interrupt model?

If T\+R\+UE, then R\+T\+E\+MS allocates the vector table it internally manages. If F\+A\+L\+SE, then the B\+SP is assumed to allocate and manage the vector table

Port Specific Information\+:

This port uses the Progammable Interrupt Controller interrupt model. \mbox{\Hypertarget{v850_2include_2rtems_2score_2cpu_8h_a8aed43eb1b3c346772c127482b4b5372}\label{v850_2include_2rtems_2score_2cpu_8h_a8aed43eb1b3c346772c127482b4b5372}} 
\index{cpu.h@{cpu.h}!CPU\_STACK\_ALIGNMENT@{CPU\_STACK\_ALIGNMENT}}
\index{CPU\_STACK\_ALIGNMENT@{CPU\_STACK\_ALIGNMENT}!cpu.h@{cpu.h}}
\subsubsection{\texorpdfstring{CPU\_STACK\_ALIGNMENT}{CPU\_STACK\_ALIGNMENT}}
{\footnotesize\ttfamily \#define C\+P\+U\+\_\+\+S\+T\+A\+C\+K\+\_\+\+A\+L\+I\+G\+N\+M\+E\+NT~4}

This number corresponds to the byte alignment requirement for the stack. This alignment requirement may be stricter than that for the data types alignment specified by \mbox{\hyperlink{v850_2include_2rtems_2score_2cpu_8h_ae526a309e32001688261048b19cdb7d8}{C\+P\+U\+\_\+\+A\+L\+I\+G\+N\+M\+E\+NT}}. If the \mbox{\hyperlink{v850_2include_2rtems_2score_2cpu_8h_ae526a309e32001688261048b19cdb7d8}{C\+P\+U\+\_\+\+A\+L\+I\+G\+N\+M\+E\+NT}} is strict enough for the stack, then this should be set to 0.

\begin{DoxyNote}{Note}
This must be a power of 2 either 0 or greater than \mbox{\hyperlink{v850_2include_2rtems_2score_2cpu_8h_ae526a309e32001688261048b19cdb7d8}{C\+P\+U\+\_\+\+A\+L\+I\+G\+N\+M\+E\+NT}}.
\end{DoxyNote}
Port Specific Information\+:

The v850 has enough R\+AM where alignment to 16 may be desirable depending on the cache properties. But this remains to be demonstrated. \mbox{\Hypertarget{v850_2include_2rtems_2score_2cpu_8h_ac40d98a563f63934a5775f1366ba1b67}\label{v850_2include_2rtems_2score_2cpu_8h_ac40d98a563f63934a5775f1366ba1b67}} 
\index{cpu.h@{cpu.h}!CPU\_STACK\_GROWS\_UP@{CPU\_STACK\_GROWS\_UP}}
\index{CPU\_STACK\_GROWS\_UP@{CPU\_STACK\_GROWS\_UP}!cpu.h@{cpu.h}}
\subsubsection{\texorpdfstring{CPU\_STACK\_GROWS\_UP}{CPU\_STACK\_GROWS\_UP}}
{\footnotesize\ttfamily \#define C\+P\+U\+\_\+\+S\+T\+A\+C\+K\+\_\+\+G\+R\+O\+W\+S\+\_\+\+UP~\mbox{\hyperlink{group__RTEMSScoreBaseDefs_gaa93f0eb578d23995850d61f7d61c55c1}{F\+A\+L\+SE}}}

Does the stack grow up (toward higher addresses) or down (toward lower addresses)?

If T\+R\+UE, then the grows upward. If F\+A\+L\+SE, then the grows toward smaller addresses.

Port Specific Information\+:

The v850 stack grows from high addresses to low addresses. 

\subsection{Typedef Documentation}
\mbox{\Hypertarget{v850_2include_2rtems_2score_2cpu_8h_a9fca17f81f850e128fcc8ed5b87ff2ab}\label{v850_2include_2rtems_2score_2cpu_8h_a9fca17f81f850e128fcc8ed5b87ff2ab}} 
\index{cpu.h@{cpu.h}!CPU\_Uint32ptr@{CPU\_Uint32ptr}}
\index{CPU\_Uint32ptr@{CPU\_Uint32ptr}!cpu.h@{cpu.h}}
\subsubsection{\texorpdfstring{CPU\_Uint32ptr}{CPU\_Uint32ptr}}
{\footnotesize\ttfamily typedef uintptr\+\_\+t \mbox{\hyperlink{group__RTEMSScoreCPUARM_ga9fca17f81f850e128fcc8ed5b87ff2ab}{C\+P\+U\+\_\+\+Uint32ptr}}}

Type that can store a 32-\/bit integer or a pointer. 

\subsection{Function Documentation}
\mbox{\Hypertarget{v850_2include_2rtems_2score_2cpu_8h_aff386644c2f5a1d6e8b57fd8f290cadc}\label{v850_2include_2rtems_2score_2cpu_8h_aff386644c2f5a1d6e8b57fd8f290cadc}} 
\index{cpu.h@{cpu.h}!\_CPU\_Context\_Initialize@{\_CPU\_Context\_Initialize}}
\index{\_CPU\_Context\_Initialize@{\_CPU\_Context\_Initialize}!cpu.h@{cpu.h}}
\subsubsection{\texorpdfstring{\_CPU\_Context\_Initialize()}{\_CPU\_Context\_Initialize()}}
{\footnotesize\ttfamily void \+\_\+\+C\+P\+U\+\_\+\+Context\+\_\+\+Initialize (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structContext__Control}{Context\+\_\+\+Control}} $\ast$}]{the\+\_\+context,  }\item[{uint32\+\_\+t $\ast$}]{stack\+\_\+base,  }\item[{uint32\+\_\+t}]{size,  }\item[{uint32\+\_\+t}]{new\+\_\+level,  }\item[{void $\ast$}]{entry\+\_\+point,  }\item[{bool}]{is\+\_\+fp,  }\item[{void $\ast$}]{tls\+\_\+area }\end{DoxyParamCaption})}

Initialize the context to a state suitable for starting a task after a context restore operation. Generally, this involves\+:


\begin{DoxyItemize}
\item setting a starting address
\item preparing the stack
\item preparing the stack and frame pointers
\item setting the proper interrupt level in the context
\item initializing the floating point context
\end{DoxyItemize}


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em the\+\_\+context} & points to the context area \\
\hline
\mbox{\texttt{ in}}  & {\em stack\+\_\+base} & is the low address of the allocated stack area \\
\hline
\mbox{\texttt{ in}}  & {\em size} & is the size of the stack area in bytes \\
\hline
\mbox{\texttt{ in}}  & {\em new\+\_\+level} & is the interrupt level for the task \\
\hline
\mbox{\texttt{ in}}  & {\em entry\+\_\+point} & is the task\textquotesingle{}s entry point \\
\hline
\mbox{\texttt{ in}}  & {\em is\+\_\+fp} & is set to T\+R\+UE if the task is a floating point task \\
\hline
\mbox{\texttt{ in}}  & {\em tls\+\_\+area} & is the thread-\/local storage (T\+LS) area\\
\hline
\end{DoxyParams}
N\+O\+TE\+: Implemented as a subroutine for the S\+P\+A\+RC port. 