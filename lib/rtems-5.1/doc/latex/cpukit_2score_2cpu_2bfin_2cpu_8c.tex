\hypertarget{cpukit_2score_2cpu_2bfin_2cpu_8c}{}\section{cpukit/score/cpu/bfin/cpu.c File Reference}
\label{cpukit_2score_2cpu_2bfin_2cpu_8c}\index{cpukit/score/cpu/bfin/cpu.c@{cpukit/score/cpu/bfin/cpu.c}}


Blackfin C\+PU Dependent Source.  


{\ttfamily \#include $<$rtems/score/isr.\+h$>$}\newline
{\ttfamily \#include $<$rtems/score/wkspace.\+h$>$}\newline
{\ttfamily \#include $<$rtems/score/bfin.\+h$>$}\newline
{\ttfamily \#include $<$rtems/bfin/bfin.\+h$>$}\newline
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{cpukit_2score_2cpu_2bfin_2cpu_8c_af0cbe3665d7e368bfa03267613c696ac}\label{cpukit_2score_2cpu_2bfin_2cpu_8c_af0cbe3665d7e368bfa03267613c696ac}} 
void {\bfseries \+\_\+\+I\+S\+R15\+\_\+\+Handler} (void)
\item 
\mbox{\Hypertarget{cpukit_2score_2cpu_2bfin_2cpu_8c_ada0f7f0ad1c0161523802fe89fbab095}\label{cpukit_2score_2cpu_2bfin_2cpu_8c_ada0f7f0ad1c0161523802fe89fbab095}} 
void {\bfseries \+\_\+\+C\+P\+U\+\_\+\+Emulation\+\_\+handler} (void)
\item 
\mbox{\Hypertarget{cpukit_2score_2cpu_2bfin_2cpu_8c_a506d6bf0a0a8ba4e3e4698bedc019830}\label{cpukit_2score_2cpu_2bfin_2cpu_8c_a506d6bf0a0a8ba4e3e4698bedc019830}} 
void {\bfseries \+\_\+\+C\+P\+U\+\_\+\+Reset\+\_\+handler} (void)
\item 
\mbox{\Hypertarget{cpukit_2score_2cpu_2bfin_2cpu_8c_adbcd0651b356b349242ded867e509afc}\label{cpukit_2score_2cpu_2bfin_2cpu_8c_adbcd0651b356b349242ded867e509afc}} 
void {\bfseries \+\_\+\+C\+P\+U\+\_\+\+N\+M\+I\+\_\+handler} (void)
\item 
\mbox{\Hypertarget{cpukit_2score_2cpu_2bfin_2cpu_8c_a144d5241f171f8149c15d6fe50496909}\label{cpukit_2score_2cpu_2bfin_2cpu_8c_a144d5241f171f8149c15d6fe50496909}} 
void {\bfseries \+\_\+\+C\+P\+U\+\_\+\+Exception\+\_\+handler} (void)
\item 
\mbox{\Hypertarget{cpukit_2score_2cpu_2bfin_2cpu_8c_a6e5fc03feace017b3454ab90b334a324}\label{cpukit_2score_2cpu_2bfin_2cpu_8c_a6e5fc03feace017b3454ab90b334a324}} 
void {\bfseries \+\_\+\+C\+P\+U\+\_\+\+Unhandled\+\_\+\+Interrupt\+\_\+handler} (void)
\item 
void \mbox{\hyperlink{group__RTEMSScoreCPUARM_ga869484e3d851b032fd826c69ff21fc72}{\+\_\+\+C\+P\+U\+\_\+\+Initialize}} (void)
\begin{DoxyCompactList}\small\item\em C\+PU initialization. \end{DoxyCompactList}\item 
uint32\+\_\+t \mbox{\hyperlink{group__RTEMSScoreCPUARM_ga1d9dcab9170d532b6634a5620385adbd}{\+\_\+\+C\+P\+U\+\_\+\+I\+S\+R\+\_\+\+Get\+\_\+level}} (void)
\begin{DoxyCompactList}\small\item\em Returns the interrupt level of the executing thread. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{cpukit_2score_2cpu_2bfin_2cpu_8c_a7258763c945f775b17e48ebafa288e62}{\+\_\+\+C\+P\+U\+\_\+\+I\+S\+R\+\_\+install\+\_\+raw\+\_\+handler}} (uint32\+\_\+t vector, C\+P\+U\+\_\+\+I\+S\+R\+\_\+raw\+\_\+handler new\+\_\+handler, C\+P\+U\+\_\+\+I\+S\+R\+\_\+raw\+\_\+handler $\ast$old\+\_\+handler)
\begin{DoxyCompactList}\small\item\em S\+P\+A\+RC specific raw I\+SR installer. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{group__RTEMSScoreCPUARM_gaa3480454768ad843ce97909111a48a1f}{\+\_\+\+C\+P\+U\+\_\+\+I\+S\+R\+\_\+install\+\_\+vector}} (uint32\+\_\+t vector, C\+P\+U\+\_\+\+I\+S\+R\+\_\+handler new\+\_\+handler, C\+P\+U\+\_\+\+I\+S\+R\+\_\+handler $\ast$old\+\_\+handler)
\begin{DoxyCompactList}\small\item\em S\+P\+A\+RC specific R\+T\+E\+MS I\+SR installer. \end{DoxyCompactList}\item 
void $\ast$ \mbox{\hyperlink{group__RTEMSScoreCPUARM_ga903a802003c95d6ef5206cb330424a1b}{\+\_\+\+C\+P\+U\+\_\+\+Thread\+\_\+\+Idle\+\_\+body}} (uintptr\+\_\+t ignored)
\item 
void \mbox{\hyperlink{cpukit_2score_2cpu_2bfin_2cpu_8c_aff386644c2f5a1d6e8b57fd8f290cadc}{\+\_\+\+C\+P\+U\+\_\+\+Context\+\_\+\+Initialize}} (\mbox{\hyperlink{structContext__Control}{Context\+\_\+\+Control}} $\ast$the\+\_\+context, uint32\+\_\+t $\ast$stack\+\_\+base, uint32\+\_\+t \mbox{\hyperlink{sun4u_2tte_8h_a245260f6f74972558f61b85227df5aae}{size}}, uint32\+\_\+t new\+\_\+level, void $\ast$entry\+\_\+point, bool is\+\_\+fp, void $\ast$tls\+\_\+area)
\end{DoxyCompactItemize}


\subsection{Detailed Description}
Blackfin C\+PU Dependent Source. 



\subsection{Function Documentation}
\mbox{\Hypertarget{cpukit_2score_2cpu_2bfin_2cpu_8c_aff386644c2f5a1d6e8b57fd8f290cadc}\label{cpukit_2score_2cpu_2bfin_2cpu_8c_aff386644c2f5a1d6e8b57fd8f290cadc}} 
\index{cpu.c@{cpu.c}!\_CPU\_Context\_Initialize@{\_CPU\_Context\_Initialize}}
\index{\_CPU\_Context\_Initialize@{\_CPU\_Context\_Initialize}!cpu.c@{cpu.c}}
\subsubsection{\texorpdfstring{\_CPU\_Context\_Initialize()}{\_CPU\_Context\_Initialize()}}
{\footnotesize\ttfamily void \+\_\+\+C\+P\+U\+\_\+\+Context\+\_\+\+Initialize (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structContext__Control}{Context\+\_\+\+Control}} $\ast$}]{the\+\_\+context,  }\item[{uint32\+\_\+t $\ast$}]{stack\+\_\+base,  }\item[{uint32\+\_\+t}]{size,  }\item[{uint32\+\_\+t}]{new\+\_\+level,  }\item[{void $\ast$}]{entry\+\_\+point,  }\item[{bool}]{is\+\_\+fp,  }\item[{void $\ast$}]{tls\+\_\+area }\end{DoxyParamCaption})}

Initialize the context to a state suitable for starting a task after a context restore operation. Generally, this involves\+:


\begin{DoxyItemize}
\item setting a starting address
\item preparing the stack
\item preparing the stack and frame pointers
\item setting the proper interrupt level in the context
\item initializing the floating point context
\end{DoxyItemize}


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em the\+\_\+context} & points to the context area \\
\hline
\mbox{\texttt{ in}}  & {\em stack\+\_\+base} & is the low address of the allocated stack area \\
\hline
\mbox{\texttt{ in}}  & {\em size} & is the size of the stack area in bytes \\
\hline
\mbox{\texttt{ in}}  & {\em new\+\_\+level} & is the interrupt level for the task \\
\hline
\mbox{\texttt{ in}}  & {\em entry\+\_\+point} & is the task\textquotesingle{}s entry point \\
\hline
\mbox{\texttt{ in}}  & {\em is\+\_\+fp} & is set to T\+R\+UE if the task is a floating point task \\
\hline
\mbox{\texttt{ in}}  & {\em tls\+\_\+area} & is the thread-\/local storage (T\+LS) area\\
\hline
\end{DoxyParams}
N\+O\+TE\+: Implemented as a subroutine for the S\+P\+A\+RC port. \mbox{\Hypertarget{cpukit_2score_2cpu_2bfin_2cpu_8c_a7258763c945f775b17e48ebafa288e62}\label{cpukit_2score_2cpu_2bfin_2cpu_8c_a7258763c945f775b17e48ebafa288e62}} 
\index{cpu.c@{cpu.c}!\_CPU\_ISR\_install\_raw\_handler@{\_CPU\_ISR\_install\_raw\_handler}}
\index{\_CPU\_ISR\_install\_raw\_handler@{\_CPU\_ISR\_install\_raw\_handler}!cpu.c@{cpu.c}}
\subsubsection{\texorpdfstring{\_CPU\_ISR\_install\_raw\_handler()}{\_CPU\_ISR\_install\_raw\_handler()}}
{\footnotesize\ttfamily void \+\_\+\+C\+P\+U\+\_\+\+I\+S\+R\+\_\+install\+\_\+raw\+\_\+handler (\begin{DoxyParamCaption}\item[{uint32\+\_\+t}]{vector,  }\item[{C\+P\+U\+\_\+\+I\+S\+R\+\_\+raw\+\_\+handler}]{new\+\_\+handler,  }\item[{C\+P\+U\+\_\+\+I\+S\+R\+\_\+raw\+\_\+handler $\ast$}]{old\+\_\+handler }\end{DoxyParamCaption})}



S\+P\+A\+RC specific raw I\+SR installer. 

This routine installs {\itshape new\+\_\+handler} to be directly called from the trap table.


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em vector} & is the vector number \\
\hline
\mbox{\texttt{ in}}  & {\em new\+\_\+handler} & is the new I\+SR handler \\
\hline
\mbox{\texttt{ in}}  & {\em old\+\_\+handler} & will contain the old I\+SR handler \\
\hline
\end{DoxyParams}
