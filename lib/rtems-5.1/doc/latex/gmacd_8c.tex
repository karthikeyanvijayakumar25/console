\hypertarget{gmacd_8c}{}\section{bsps/arm/atsam/contrib/libraries/libchip/source/gmacd.c File Reference}
\label{gmacd_8c}\index{bsps/arm/atsam/contrib/libraries/libchip/source/gmacd.c@{bsps/arm/atsam/contrib/libraries/libchip/source/gmacd.c}}
{\ttfamily \#include \char`\"{}chip.\+h\char`\"{}}\newline
{\ttfamily \#include $<$string.\+h$>$}\newline
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \mbox{\hyperlink{group__gmacd__defines_gaf979fcaac59bf6578901fc3fa40c7255}{G\+C\+I\+R\+C\+\_\+\+C\+NT}}(head,  tail,  \mbox{\hyperlink{sun4u_2tte_8h_a245260f6f74972558f61b85227df5aae}{size}})~\mbox{\hyperlink{group__gmacd__defines_gaf792223e30acf40b9e7a67f080f807e8}{fixed\+\_\+mod}}((head) -\/ (tail), (\mbox{\hyperlink{sun4u_2tte_8h_a245260f6f74972558f61b85227df5aae}{size}}))
\item 
\#define \mbox{\hyperlink{group__gmacd__defines_gad48958fa52a1e9dc9a08d33210bcd9e0}{G\+C\+I\+R\+C\+\_\+\+S\+P\+A\+CE}}(head,  tail,  \mbox{\hyperlink{sun4u_2tte_8h_a245260f6f74972558f61b85227df5aae}{size}})~\mbox{\hyperlink{group__gmacd__defines_gaf979fcaac59bf6578901fc3fa40c7255}{G\+C\+I\+R\+C\+\_\+\+C\+NT}}((tail),((head)+1),(\mbox{\hyperlink{sun4u_2tte_8h_a245260f6f74972558f61b85227df5aae}{size}}))
\item 
\#define \mbox{\hyperlink{group__gmacd__defines_gac9926ea92f8ad62f870aaf51552e3cd9}{G\+C\+I\+R\+C\+\_\+\+C\+N\+T\+\_\+\+T\+O\+\_\+\+E\+ND}}(head,  tail,  \mbox{\hyperlink{sun4u_2tte_8h_a245260f6f74972558f61b85227df5aae}{size}})
\item 
\#define \mbox{\hyperlink{group__gmacd__defines_ga41636c36b658013d2c0ff5e525a5af0e}{G\+C\+I\+R\+C\+\_\+\+S\+P\+A\+C\+E\+\_\+\+T\+O\+\_\+\+E\+ND}}(head,  tail,  \mbox{\hyperlink{sun4u_2tte_8h_a245260f6f74972558f61b85227df5aae}{size}})
\item 
\#define \mbox{\hyperlink{group__gmacd__defines_gafd62a355f7480b793be721ba4c754813}{G\+C\+I\+R\+C\+\_\+\+I\+NC}}(headortail,  \mbox{\hyperlink{sun4u_2tte_8h_a245260f6f74972558f61b85227df5aae}{size}})
\item 
\#define \mbox{\hyperlink{group__gmacd__defines_gafa316fca6188ee1324fca3acb10326a5}{G\+C\+I\+R\+C\+\_\+\+E\+M\+P\+TY}}(head,  tail)~(head == tail)
\item 
\#define \mbox{\hyperlink{group__gmacd__defines_ga65fb546208f7516e381b6535c899979a}{G\+C\+I\+R\+C\+\_\+\+C\+L\+E\+AR}}(head,  tail)~(head = tail = 0)
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\+\_\+\+\_\+\+S\+T\+A\+T\+I\+C\+\_\+\+I\+N\+L\+I\+NE int \mbox{\hyperlink{group__gmacd__defines_gaf792223e30acf40b9e7a67f080f807e8}{fixed\+\_\+mod}} (int a, int b)
\item 
void {\bfseries G\+M\+A\+C\+D\+\_\+\+Tx\+Ptp\+Evt\+Msg\+C\+B\+Register} (\mbox{\hyperlink{group__gmacd__types_gaa8760917079000a5ee7fbc7fab992dd3}{s\+Gmacd}} $\ast$p\+Gmacd, \mbox{\hyperlink{group__gmacd__types_gad3329dfe65f5877f50ee8a4fd8e63f08}{f\+Gmacd\+Tx\+Ptp\+Evt\+Call\+Back}} p\+Tx\+Ptp\+Evt\+Cb, gmac\+Que\+List\+\_\+t que\+Idx)
\item 
void \mbox{\hyperlink{group__gmacd__defines_ga782194c9b7163c22016beabc6101856c}{G\+M\+A\+C\+D\+\_\+\+Handler}} (\mbox{\hyperlink{group__gmacd__types_gaa8760917079000a5ee7fbc7fab992dd3}{s\+Gmacd}} $\ast$p\+Gmacd, gmac\+Que\+List\+\_\+t que\+Idx)
\begin{DoxyCompactList}\small\item\em G\+M\+AC Interrupt handler. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{group__gmacd__defines_ga8706caf686e1d073851111db1ba2663c}{G\+M\+A\+C\+D\+\_\+\+Init}} (\mbox{\hyperlink{group__gmacd__types_gaa8760917079000a5ee7fbc7fab992dd3}{s\+Gmacd}} $\ast$p\+Gmacd, \mbox{\hyperlink{structGmac}{Gmac}} $\ast$p\+Hw, uint8\+\_\+t b\+ID, uint8\+\_\+t enable\+C\+AF, uint8\+\_\+t enable\+N\+BC)
\begin{DoxyCompactList}\small\item\em Initialize the G\+M\+AC with the \mbox{\hyperlink{structGmac}{Gmac}} controller address. \end{DoxyCompactList}\item 
uint8\+\_\+t \mbox{\hyperlink{group__gmacd__defines_ga418589cbbef19de6084670d572b6ae27}{G\+M\+A\+C\+D\+\_\+\+Init\+Transfer}} (\mbox{\hyperlink{group__gmacd__types_gaa8760917079000a5ee7fbc7fab992dd3}{s\+Gmacd}} $\ast$p\+Gmacd, const \mbox{\hyperlink{group__gmacd__types_ga5ab53aef1a598e4d862677f8f1928b20}{s\+Gmac\+Init}} $\ast$p\+Init, gmac\+Que\+List\+\_\+t que\+Idx)
\item 
void \mbox{\hyperlink{group__gmacd__defines_gaede5219eb9101a760ecb266722825318}{G\+M\+A\+C\+D\+\_\+\+Reset}} (\mbox{\hyperlink{group__gmacd__types_gaa8760917079000a5ee7fbc7fab992dd3}{s\+Gmacd}} $\ast$p\+Gmacd)
\item 
uint8\+\_\+t \mbox{\hyperlink{group__gmacd__defines_ga4dade176be1ff02c5dfb6371d873b5ed}{G\+M\+A\+C\+D\+\_\+\+Send\+SG}} (\mbox{\hyperlink{group__gmacd__types_gaa8760917079000a5ee7fbc7fab992dd3}{s\+Gmacd}} $\ast$p\+Gmacd, const \mbox{\hyperlink{group__gmacd__types_ga97ea4785757f8d33d38ed0563d84bfa4}{s\+Gmac\+S\+G\+List}} $\ast$sgl, \mbox{\hyperlink{group__gmacd__types_ga64979042bf43f697de166e864e3259de}{f\+Gmacd\+Transfer\+Callback}} f\+Tx\+Cb, gmac\+Que\+List\+\_\+t que\+Idx)
\begin{DoxyCompactList}\small\item\em Send a frame split into buffers. If the frame size is larger than transfer buffer size error returned. If frame transfer status is monitored, specify callback for each frame. \end{DoxyCompactList}\item 
uint8\+\_\+t \mbox{\hyperlink{group__gmacd__defines_ga2f3e029556b9627258a2eb1dc4919d95}{G\+M\+A\+C\+D\+\_\+\+Send}} (\mbox{\hyperlink{group__gmacd__types_gaa8760917079000a5ee7fbc7fab992dd3}{s\+Gmacd}} $\ast$p\+Gmacd, void $\ast$p\+Buffer, uint32\+\_\+t \mbox{\hyperlink{sun4u_2tte_8h_a245260f6f74972558f61b85227df5aae}{size}}, \mbox{\hyperlink{group__gmacd__types_ga64979042bf43f697de166e864e3259de}{f\+Gmacd\+Transfer\+Callback}} f\+Tx\+Cb, gmac\+Que\+List\+\_\+t que\+Idx)
\begin{DoxyCompactList}\small\item\em Send a packet with G\+M\+AC. If the packet size is larger than transfer buffer size error returned. If packet transfer status is monitored, specify callback for each packet. \end{DoxyCompactList}\item 
uint32\+\_\+t \mbox{\hyperlink{group__gmacd__defines_ga1bd3fe40e63537dce59dd4368dce4253}{G\+M\+A\+C\+D\+\_\+\+Tx\+Load}} (\mbox{\hyperlink{group__gmacd__types_gaa8760917079000a5ee7fbc7fab992dd3}{s\+Gmacd}} $\ast$p\+Gmacd, gmac\+Que\+List\+\_\+t que\+Idx)
\item 
uint8\+\_\+t \mbox{\hyperlink{group__gmacd__defines_gaa45b1118c5a1147bde4e3026194bc965}{G\+M\+A\+C\+D\+\_\+\+Poll}} (\mbox{\hyperlink{group__gmacd__types_gaa8760917079000a5ee7fbc7fab992dd3}{s\+Gmacd}} $\ast$p\+Gmacd, uint8\+\_\+t $\ast$p\+Frame, uint32\+\_\+t frame\+Size, uint32\+\_\+t $\ast$p\+Rcv\+Size, gmac\+Que\+List\+\_\+t que\+Idx)
\begin{DoxyCompactList}\small\item\em Receive a packet with G\+M\+AC. If not enough buffer for the packet, the remaining data is lost but right frame length is returned. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{group__gmacd__defines_ga3ea0884def476f9698f1cdbae6b6f3e2}{G\+M\+A\+C\+D\+\_\+\+Set\+Rx\+Callback}} (\mbox{\hyperlink{group__gmacd__types_gaa8760917079000a5ee7fbc7fab992dd3}{s\+Gmacd}} $\ast$p\+Gmacd, \mbox{\hyperlink{group__gmacd__types_ga64979042bf43f697de166e864e3259de}{f\+Gmacd\+Transfer\+Callback}} f\+Rx\+Cb, gmac\+Que\+List\+\_\+t que\+Idx)
\begin{DoxyCompactList}\small\item\em Registers p\+Rx\+Cb callback. Callback will be invoked after the next received frame. When G\+M\+A\+C\+\_\+\+Poll() returns G\+M\+A\+C\+\_\+\+R\+X\+\_\+\+N\+O\+\_\+\+D\+A\+TA the application task call G\+M\+A\+C\+\_\+\+Set\+\_\+\+Rx\+Cb() to register p\+Rx\+Cb() callback and enters suspend state. The callback is in charge to resume the task once a new frame has been received. The next time G\+M\+A\+C\+\_\+\+Poll() is called, it will be successful. \end{DoxyCompactList}\item 
uint8\+\_\+t \mbox{\hyperlink{group__gmacd__defines_ga0806a8a23ffb3180d3404ec6d7fbfa1d}{G\+M\+A\+C\+D\+\_\+\+Set\+Tx\+Wakeup\+Callback}} (\mbox{\hyperlink{group__gmacd__types_gaa8760917079000a5ee7fbc7fab992dd3}{s\+Gmacd}} $\ast$p\+Gmacd, \mbox{\hyperlink{group__gmacd__types_ga44e6be4bb53db0660baf6cb50b20a684}{f\+Gmacd\+Wakeup\+Callback}} f\+Wakeup, uint8\+\_\+t b\+Threshold, gmac\+Que\+List\+\_\+t que\+Idx)
\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
uint8\+\_\+t {\bfseries ptp\+Tx\+Que\+Write\+Idx} = 0u
\item 
uint8\+\_\+t {\bfseries ptp\+Tx\+Que\+Read\+Idx} = 0u
\item 
ptp\+Msg\+Type {\bfseries g\+Ptp\+Msg\+Tx\+Que} \mbox{[}E\+F\+R\+S\+\_\+\+B\+U\+F\+F\+E\+R\+\_\+\+L\+EN\mbox{]}
\item 
uint16\+\_\+t {\bfseries g\+Ptp\+Msg\+Tx\+Seq\+Id} \mbox{[}E\+F\+R\+S\+\_\+\+B\+U\+F\+F\+E\+R\+\_\+\+L\+EN\mbox{]}
\item 
const uint32\+\_\+t {\bfseries isr\+Masks} \mbox{[}$\,$\mbox{]}
\end{DoxyCompactItemize}
