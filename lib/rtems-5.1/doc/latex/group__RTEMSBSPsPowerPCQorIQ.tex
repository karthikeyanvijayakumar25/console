\hypertarget{group__RTEMSBSPsPowerPCQorIQ}{}\section{N\+XP Qor\+IQ}
\label{group__RTEMSBSPsPowerPCQorIQ}\index{NXP QorIQ@{NXP QorIQ}}


N\+XP Qor\+IQ Board Support Package.  


\subsection*{Modules}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{group__QorIQInterCom}{Qor\+I\+Q -\/ Inter-\/\+Processor Communication Support}}
\begin{DoxyCompactList}\small\item\em Inter-\/processor communication support. \end{DoxyCompactList}\item 
\mbox{\hyperlink{group__RTEMSBSPsPowerPCQorIQInterrupt}{Qor\+I\+Q -\/ Interrupt Support}}
\begin{DoxyCompactList}\small\item\em Interrupt support. \end{DoxyCompactList}\item 
\mbox{\hyperlink{group__QorIQMMU}{Qor\+I\+Q -\/ M\+M\+U Support}}
\begin{DoxyCompactList}\small\item\em M\+MU support. \end{DoxyCompactList}\item 
\mbox{\hyperlink{group__QorIQUartBridge}{Qor\+I\+Q -\/ U\+A\+R\+T to Intercom Bridge Support}}
\begin{DoxyCompactList}\small\item\em U\+A\+RT to Intercom bridge support. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Files}
\begin{DoxyCompactItemize}
\item 
file \mbox{\hyperlink{powerpc_2qoriq_2btimer_2btimer_8c}{btimer.\+c}}
\begin{DoxyCompactList}\small\item\em Qor\+IQ benchmark timer. \end{DoxyCompactList}\item 
file \mbox{\hyperlink{qoriq_2clock_2clock-config_8c}{clock-\/config.\+c}}
\begin{DoxyCompactList}\small\item\em Qor\+IQ clock configuration. \end{DoxyCompactList}\item 
file \mbox{\hyperlink{powerpc_2qoriq_2console_2console-config_8c}{console-\/config.\+c}}
\begin{DoxyCompactList}\small\item\em Console configuration. \end{DoxyCompactList}\item 
file \mbox{\hyperlink{qoriq_8h}{qoriq.\+h}}
\begin{DoxyCompactList}\small\item\em Qor\+IQ Configuration, Control and Status Registers. \end{DoxyCompactList}\item 
file \mbox{\hyperlink{qoriq_2include_2bsp_2tsec-config_8h}{tsec-\/config.\+h}}
\begin{DoxyCompactList}\small\item\em T\+S\+EC configuration. \end{DoxyCompactList}\item 
file \mbox{\hyperlink{bsps_2powerpc_2qoriq_2include_2bsp_8h}{bsp.\+h}}
\begin{DoxyCompactList}\small\item\em Global B\+SP definitions. \end{DoxyCompactList}\item 
file \mbox{\hyperlink{powerpc_2qoriq_2include_2tm27_8h}{tm27.\+h}}
\begin{DoxyCompactList}\small\item\em Support file for Timer Test 27. \end{DoxyCompactList}\item 
file \mbox{\hyperlink{bsps_2powerpc_2qoriq_2irq_2irq_8c}{irq.\+c}}
\begin{DoxyCompactList}\small\item\em Interrupt implementation. \end{DoxyCompactList}\item 
file \mbox{\hyperlink{powerpc_2qoriq_2net_2network_8c}{network.\+c}}
\begin{DoxyCompactList}\small\item\em Network configuration. \end{DoxyCompactList}\item 
file \mbox{\hyperlink{powerpc_2qoriq_2rtc_2rtc-config_8c}{rtc-\/config.\+c}}
\begin{DoxyCompactList}\small\item\em R\+TC configuration. \end{DoxyCompactList}\item 
file \mbox{\hyperlink{powerpc_2qoriq_2start_2bspreset_8c}{bspreset.\+c}}
\begin{DoxyCompactList}\small\item\em B\+SP reset. \end{DoxyCompactList}\item 
file \mbox{\hyperlink{qoriq_2start_2bsprestart_8c}{bsprestart.\+c}}
\begin{DoxyCompactList}\small\item\em B\+SP restart. \end{DoxyCompactList}\item 
file \mbox{\hyperlink{powerpc_2qoriq_2start_2bspstart_8c}{bspstart.\+c}}
\begin{DoxyCompactList}\small\item\em B\+SP startup. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Data Structures}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{structqoriq__start__spin__table}{qoriq\+\_\+start\+\_\+spin\+\_\+table}}
\end{DoxyCompactItemize}
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{group__RTEMSBSPsPowerPCQorIQ_gafdba0ab6c3165e18a9eb2e47231a949f}\label{group__RTEMSBSPsPowerPCQorIQ_gafdba0ab6c3165e18a9eb2e47231a949f}} 
\#define {\bfseries Q\+O\+R\+I\+Q\+\_\+\+T\+H\+R\+E\+A\+D\+\_\+\+C\+O\+U\+NT}~Q\+O\+R\+I\+Q\+\_\+\+P\+H\+Y\+S\+I\+C\+A\+L\+\_\+\+T\+H\+R\+E\+A\+D\+\_\+\+C\+O\+U\+NT
\item 
\mbox{\Hypertarget{group__RTEMSBSPsPowerPCQorIQ_ga5d7d631d3a14b7554160f14eb42f351b}\label{group__RTEMSBSPsPowerPCQorIQ_ga5d7d631d3a14b7554160f14eb42f351b}} 
\#define {\bfseries B\+S\+P\+\_\+\+F\+E\+A\+T\+U\+R\+E\+\_\+\+I\+R\+Q\+\_\+\+E\+X\+T\+E\+N\+S\+I\+ON}
\item 
\mbox{\Hypertarget{group__RTEMSBSPsPowerPCQorIQ_gaa5b7b5182d829e65400cf5cb27253ad8}\label{group__RTEMSBSPsPowerPCQorIQ_gaa5b7b5182d829e65400cf5cb27253ad8}} 
\#define {\bfseries B\+S\+P\+\_\+\+F\+D\+T\+\_\+\+I\+S\+\_\+\+S\+U\+P\+P\+O\+R\+T\+ED}
\item 
\mbox{\Hypertarget{group__RTEMSBSPsPowerPCQorIQ_ga6e28b7050bfc7239cfee77ec3290f36a}\label{group__RTEMSBSPsPowerPCQorIQ_ga6e28b7050bfc7239cfee77ec3290f36a}} 
\#define {\bfseries Q\+O\+R\+I\+Q\+\_\+\+C\+H\+IP}(alpha,  num)~((alpha) $\ast$ 10000 + (num))
\item 
\mbox{\Hypertarget{group__RTEMSBSPsPowerPCQorIQ_ga1478bc90448122c0cfdbcf618074e030}\label{group__RTEMSBSPsPowerPCQorIQ_ga1478bc90448122c0cfdbcf618074e030}} 
\#define {\bfseries Q\+O\+R\+I\+Q\+\_\+\+C\+H\+I\+P\+\_\+\+P1020}~Q\+O\+R\+I\+Q\+\_\+\+C\+H\+IP(\textquotesingle{}P\textquotesingle{}, 1020)
\item 
\mbox{\Hypertarget{group__RTEMSBSPsPowerPCQorIQ_ga8370a6b9546e5a9986084bcd44f361c5}\label{group__RTEMSBSPsPowerPCQorIQ_ga8370a6b9546e5a9986084bcd44f361c5}} 
\#define {\bfseries Q\+O\+R\+I\+Q\+\_\+\+C\+H\+I\+P\+\_\+\+T2080}~Q\+O\+R\+I\+Q\+\_\+\+C\+H\+IP(\textquotesingle{}T\textquotesingle{}, 2080)
\item 
\mbox{\Hypertarget{group__RTEMSBSPsPowerPCQorIQ_ga8072178e0376ce7de46033aea6cbfdd5}\label{group__RTEMSBSPsPowerPCQorIQ_ga8072178e0376ce7de46033aea6cbfdd5}} 
\#define {\bfseries Q\+O\+R\+I\+Q\+\_\+\+C\+H\+I\+P\+\_\+\+T4240}~Q\+O\+R\+I\+Q\+\_\+\+C\+H\+IP(\textquotesingle{}T\textquotesingle{}, 4240)
\item 
\mbox{\Hypertarget{group__RTEMSBSPsPowerPCQorIQ_ga4139e6657a375c51da5b308fdd6a2793}\label{group__RTEMSBSPsPowerPCQorIQ_ga4139e6657a375c51da5b308fdd6a2793}} 
\#define {\bfseries Q\+O\+R\+I\+Q\+\_\+\+C\+H\+I\+P\+\_\+\+V\+A\+R\+I\+A\+NT}~Q\+O\+R\+I\+Q\+\_\+\+C\+H\+IP(Q\+O\+R\+I\+Q\+\_\+\+C\+H\+I\+P\+\_\+\+S\+E\+R\+I\+ES, Q\+O\+R\+I\+Q\+\_\+\+C\+H\+I\+P\+\_\+\+N\+U\+M\+B\+ER)
\item 
\mbox{\Hypertarget{group__RTEMSBSPsPowerPCQorIQ_gade226f23e1c6769c734b9025938ee888}\label{group__RTEMSBSPsPowerPCQorIQ_gade226f23e1c6769c734b9025938ee888}} 
\#define {\bfseries Q\+O\+R\+I\+Q\+\_\+\+C\+H\+I\+P\+\_\+\+I\+S\+\_\+\+T\+\_\+\+V\+A\+R\+I\+A\+NT}(variant)~((variant) / 10000 == \textquotesingle{}T\textquotesingle{})
\item 
\mbox{\Hypertarget{group__RTEMSBSPsPowerPCQorIQ_ga4aa606d0badadcc28e8054cb60f13b56}\label{group__RTEMSBSPsPowerPCQorIQ_ga4aa606d0badadcc28e8054cb60f13b56}} 
\#define {\bfseries B\+S\+P\+\_\+\+I\+D\+L\+E\+\_\+\+T\+A\+S\+K\+\_\+\+B\+O\+DY}~\mbox{\hyperlink{group__RTEMSBSPsSPARCLEON3_ga301be7085b80c41a9c5887247003c662}{bsp\+\_\+idle\+\_\+thread}}
\item 
\mbox{\Hypertarget{group__RTEMSBSPsPowerPCQorIQ_gadde0d66aef9442971dde465292ac14e6}\label{group__RTEMSBSPsPowerPCQorIQ_gadde0d66aef9442971dde465292ac14e6}} 
\#define {\bfseries R\+T\+E\+M\+S\+\_\+\+B\+S\+P\+\_\+\+N\+E\+T\+W\+O\+R\+K\+\_\+\+D\+R\+I\+V\+E\+R\+\_\+\+A\+T\+T\+A\+CH}~B\+S\+P\+\_\+tsec\+\_\+attach
\item 
\mbox{\Hypertarget{group__RTEMSBSPsPowerPCQorIQ_gad973dd6c2146284a02f4062b8dea89c6}\label{group__RTEMSBSPsPowerPCQorIQ_gad973dd6c2146284a02f4062b8dea89c6}} 
\#define {\bfseries R\+T\+E\+M\+S\+\_\+\+B\+S\+P\+\_\+\+N\+E\+T\+W\+O\+R\+K\+\_\+\+D\+R\+I\+V\+E\+R\+\_\+\+A\+T\+T\+A\+C\+H4}~qoriq\+\_\+if\+\_\+intercom\+\_\+attach\+\_\+detach
\item 
\mbox{\Hypertarget{group__RTEMSBSPsPowerPCQorIQ_ga86d4f9aa98431100692e31068070a8df}\label{group__RTEMSBSPsPowerPCQorIQ_ga86d4f9aa98431100692e31068070a8df}} 
\#define {\bfseries R\+T\+E\+M\+S\+\_\+\+B\+S\+P\+\_\+\+N\+E\+T\+W\+O\+R\+K\+\_\+\+D\+R\+I\+V\+E\+R\+\_\+\+N\+A\+ME}~\char`\"{}tsec1\char`\"{}
\item 
\mbox{\Hypertarget{group__RTEMSBSPsPowerPCQorIQ_ga9c7a480d4bd0eabe6766c4c6e24a340b}\label{group__RTEMSBSPsPowerPCQorIQ_ga9c7a480d4bd0eabe6766c4c6e24a340b}} 
\#define {\bfseries R\+T\+E\+M\+S\+\_\+\+B\+S\+P\+\_\+\+N\+E\+T\+W\+O\+R\+K\+\_\+\+D\+R\+I\+V\+E\+R\+\_\+\+N\+A\+M\+E2}~\char`\"{}tsec2\char`\"{}
\item 
\mbox{\Hypertarget{group__RTEMSBSPsPowerPCQorIQ_gaefc5005ef7d470fee5123087709f486b}\label{group__RTEMSBSPsPowerPCQorIQ_gaefc5005ef7d470fee5123087709f486b}} 
\#define {\bfseries R\+T\+E\+M\+S\+\_\+\+B\+S\+P\+\_\+\+N\+E\+T\+W\+O\+R\+K\+\_\+\+D\+R\+I\+V\+E\+R\+\_\+\+N\+A\+M\+E3}~\char`\"{}tsec3\char`\"{}
\item 
\mbox{\Hypertarget{group__RTEMSBSPsPowerPCQorIQ_gac8ba5fb611ecf605e6222a30769119b6}\label{group__RTEMSBSPsPowerPCQorIQ_gac8ba5fb611ecf605e6222a30769119b6}} 
\#define {\bfseries R\+T\+E\+M\+S\+\_\+\+B\+S\+P\+\_\+\+N\+E\+T\+W\+O\+R\+K\+\_\+\+D\+R\+I\+V\+E\+R\+\_\+\+N\+A\+M\+E4}~\char`\"{}intercom1\char`\"{}
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{group__RTEMSBSPsPowerPCQorIQ_ga59edc02dc610b58bf9fb879f63424bdc}\label{group__RTEMSBSPsPowerPCQorIQ_ga59edc02dc610b58bf9fb879f63424bdc}} 
int {\bfseries B\+S\+P\+\_\+tsec\+\_\+attach} (struct rtems\+\_\+bsdnet\+\_\+ifconfig $\ast$\mbox{\hyperlink{structconfig__s}{config}}, int attaching)
\item 
\mbox{\Hypertarget{group__RTEMSBSPsPowerPCQorIQ_gae5bffca5ba917b71a755973d4356039f}\label{group__RTEMSBSPsPowerPCQorIQ_gae5bffca5ba917b71a755973d4356039f}} 
int {\bfseries qoriq\+\_\+if\+\_\+intercom\+\_\+attach\+\_\+detach} (struct rtems\+\_\+bsdnet\+\_\+ifconfig $\ast$\mbox{\hyperlink{structconfig__s}{config}}, int attaching)
\item 
\mbox{\Hypertarget{group__RTEMSBSPsPowerPCQorIQ_ga20f06be1d6abc4fb2d0e988b4e7746ed}\label{group__RTEMSBSPsPowerPCQorIQ_ga20f06be1d6abc4fb2d0e988b4e7746ed}} 
void {\bfseries bsp\+\_\+restart} (void $\ast$addr) \mbox{\hyperlink{group__RTEMSScoreBaseDefs_gaa2f0ed67aa174f684bb31b7e8bdb386f}{R\+T\+E\+M\+S\+\_\+\+N\+O\+\_\+\+R\+E\+T\+U\+RN}}
\item 
void $\ast$ \mbox{\hyperlink{group__RTEMSBSPsPowerPCQorIQ_ga301be7085b80c41a9c5887247003c662}{bsp\+\_\+idle\+\_\+thread}} (uintptr\+\_\+t ignored)
\begin{DoxyCompactList}\small\item\em Optimized idle task. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{group__RTEMSBSPsPowerPCQorIQ_ga741f4e4d8408ff42c72dffd75cba8602}\label{group__RTEMSBSPsPowerPCQorIQ_ga741f4e4d8408ff42c72dffd75cba8602}} 
void {\bfseries qoriq\+\_\+start\+\_\+thread} (struct \mbox{\hyperlink{structPer__CPU__Control}{Per\+\_\+\+C\+P\+U\+\_\+\+Control}} $\ast$)
\item 
\mbox{\Hypertarget{group__RTEMSBSPsPowerPCQorIQ_gaee24f3de33d2de8aafee0ac659d03aca}\label{group__RTEMSBSPsPowerPCQorIQ_gaee24f3de33d2de8aafee0ac659d03aca}} 
void {\bfseries qoriq\+\_\+restart\+\_\+secondary\+\_\+processor} (const \mbox{\hyperlink{structqoriq__start__spin__table}{qoriq\+\_\+start\+\_\+spin\+\_\+table}} $\ast$spin\+\_\+table) \mbox{\hyperlink{group__RTEMSScoreBaseDefs_gaa2f0ed67aa174f684bb31b7e8bdb386f}{R\+T\+E\+M\+S\+\_\+\+N\+O\+\_\+\+R\+E\+T\+U\+RN}}
\item 
\mbox{\Hypertarget{group__RTEMSBSPsPowerPCQorIQ_ga9b9d1a2e6a914a7ba9dc761200eb161e}\label{group__RTEMSBSPsPowerPCQorIQ_ga9b9d1a2e6a914a7ba9dc761200eb161e}} 
void {\bfseries qoriq\+\_\+initialize\+\_\+exceptions} (void $\ast$interrupt\+\_\+stack\+\_\+begin)
\item 
\mbox{\Hypertarget{group__RTEMSBSPsPowerPCQorIQ_ga2b7f28db2a0274eee04f81e435c6fa6b}\label{group__RTEMSBSPsPowerPCQorIQ_ga2b7f28db2a0274eee04f81e435c6fa6b}} 
void {\bfseries qoriq\+\_\+decrementer\+\_\+dispatch} (void)
\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{group__RTEMSBSPsPowerPCQorIQ_gad76aba6c1c189e00e4d1cd583b52a18e}\label{group__RTEMSBSPsPowerPCQorIQ_gad76aba6c1c189e00e4d1cd583b52a18e}} 
unsigned {\bfseries B\+S\+P\+\_\+bus\+\_\+frequency}
\item 
\mbox{\Hypertarget{group__RTEMSBSPsPowerPCQorIQ_ga468c5e4d03ce999f1d60d0bcece15a34}\label{group__RTEMSBSPsPowerPCQorIQ_ga468c5e4d03ce999f1d60d0bcece15a34}} 
\mbox{\hyperlink{structqoriq__start__spin__table}{qoriq\+\_\+start\+\_\+spin\+\_\+table}} $\ast$ {\bfseries qoriq\+\_\+start\+\_\+spin\+\_\+table\+\_\+addr} \mbox{[}Q\+O\+R\+I\+Q\+\_\+\+C\+P\+U\+\_\+\+C\+O\+U\+NT/Q\+O\+R\+I\+Q\+\_\+\+T\+H\+R\+E\+A\+D\+\_\+\+C\+O\+U\+NT\mbox{]}
\item 
\mbox{\Hypertarget{group__RTEMSBSPsPowerPCQorIQ_ga90264c44b2ad45b187acedda94154541}\label{group__RTEMSBSPsPowerPCQorIQ_ga90264c44b2ad45b187acedda94154541}} 
uint32\+\_\+t {\bfseries bsp\+\_\+time\+\_\+base\+\_\+frequency}
\item 
\mbox{\Hypertarget{group__RTEMSBSPsPowerPCQorIQ_gadc6f75ea71ae3caeb42c9443a4a85ba3}\label{group__RTEMSBSPsPowerPCQorIQ_gadc6f75ea71ae3caeb42c9443a4a85ba3}} 
uint32\+\_\+t {\bfseries qoriq\+\_\+clock\+\_\+frequency}
\end{DoxyCompactItemize}


\subsection{Detailed Description}
N\+XP Qor\+IQ Board Support Package. 



\subsection{Function Documentation}
\mbox{\Hypertarget{group__RTEMSBSPsPowerPCQorIQ_ga301be7085b80c41a9c5887247003c662}\label{group__RTEMSBSPsPowerPCQorIQ_ga301be7085b80c41a9c5887247003c662}} 
\index{NXP QorIQ@{NXP QorIQ}!bsp\_idle\_thread@{bsp\_idle\_thread}}
\index{bsp\_idle\_thread@{bsp\_idle\_thread}!NXP QorIQ@{NXP QorIQ}}
\subsubsection{\texorpdfstring{bsp\_idle\_thread()}{bsp\_idle\_thread()}}
{\footnotesize\ttfamily void$\ast$ bsp\+\_\+idle\+\_\+thread (\begin{DoxyParamCaption}\item[{uintptr\+\_\+t}]{ignored }\end{DoxyParamCaption})}



Optimized idle task. 

This B\+SP provides its own I\+D\+LE thread to override the R\+T\+E\+MS one.

This idle task sets the power mode to idle. This causes the processor clock to be stopped, while on-\/chip peripherals remain active. Any enabled interrupt from a peripheral or an external interrupt source will cause the processor to resume execution.

To enable the idle task use the following in the system configuration\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{preprocessor}{\#include <bsp.h>}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{preprocessor}{\#define CONFIGURE\_INIT}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{preprocessor}{\#define CONFIGURE\_IDLE\_TASK\_BODY bsp\_idle\_thread}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{preprocessor}{\#include <\mbox{\hyperlink{confdefs_8h}{confdefs.h}}>}}
\end{DoxyCode}


This B\+SP provides its own I\+D\+LE thread to override the R\+T\+E\+MS one.

Optimized idle task.

The M\+SR\mbox{[}P\+OW\mbox{]} bit is set to put the C\+PU into the low power mode defined in H\+I\+D0. H\+I\+D0 is set during starup in start.\+S.

This B\+SP provides its own I\+D\+LE thread to override the R\+T\+E\+MS one.

This idle task sets the power mode to idle. This causes the processor clock to be stopped, while on-\/chip peripherals remain active. Any enabled interrupt from a peripheral or an external interrupt source will cause the processor to resume execution.

To enable the idle task use the following in the system configuration\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{preprocessor}{\#include <bsp.h>}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{preprocessor}{\#define CONFIGURE\_INIT}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{preprocessor}{\#define CONFIGURE\_IDLE\_TASK\_BODY bsp\_idle\_thread}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{preprocessor}{\#include <\mbox{\hyperlink{confdefs_8h}{confdefs.h}}>}}
\end{DoxyCode}


Optimized idle task.

The M\+SR\mbox{[}P\+OW\mbox{]} bit is set to put the C\+PU into the low power mode defined in H\+I\+D0. H\+I\+D0 is set during starup in start.\+S. 