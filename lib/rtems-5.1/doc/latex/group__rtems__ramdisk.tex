\hypertarget{group__rtems__ramdisk}{}\section{R\+AM Disk Device}
\label{group__rtems__ramdisk}\index{RAM Disk Device@{RAM Disk Device}}
\subsection*{Files}
\begin{DoxyCompactItemize}
\item 
file \mbox{\hyperlink{ramdisk-config_8c}{ramdisk-\/config.\+c}}
\begin{DoxyCompactList}\small\item\em R\+AM disk block device implementation. \end{DoxyCompactList}\item 
file \mbox{\hyperlink{ramdisk-driver_8c}{ramdisk-\/driver.\+c}}
\begin{DoxyCompactList}\small\item\em R\+AM disk block device implementation. \end{DoxyCompactList}\item 
file \mbox{\hyperlink{ramdisk-init_8c}{ramdisk-\/init.\+c}}
\begin{DoxyCompactList}\small\item\em R\+AM disk block device implementation. \end{DoxyCompactList}\item 
file \mbox{\hyperlink{ramdisk-register_8c}{ramdisk-\/register.\+c}}
\begin{DoxyCompactList}\small\item\em R\+AM disk block device implementation. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Data Structures}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{structrtems__ramdisk__config}{rtems\+\_\+ramdisk\+\_\+config}}
\begin{DoxyCompactList}\small\item\em R\+AM disk configuration table entry. \end{DoxyCompactList}\item 
struct \mbox{\hyperlink{structramdisk}{ramdisk}}
\begin{DoxyCompactList}\small\item\em R\+AM disk descriptor. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Static Configuration}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{group__rtems__ramdisk_ga33fc56e07aab97922543593c689203a8}\label{group__rtems__ramdisk_ga33fc56e07aab97922543593c689203a8}} 
typedef struct \mbox{\hyperlink{structrtems__ramdisk__config}{rtems\+\_\+ramdisk\+\_\+config}} \mbox{\hyperlink{group__rtems__ramdisk_ga33fc56e07aab97922543593c689203a8}{rtems\+\_\+ramdisk\+\_\+config}}
\begin{DoxyCompactList}\small\item\em R\+AM disk configuration table entry. \end{DoxyCompactList}\item 
\mbox{\hyperlink{structrtems__ramdisk__config}{rtems\+\_\+ramdisk\+\_\+config}} \mbox{\hyperlink{group__rtems__ramdisk_ga3f3e285d9218984555c395ae54250e1e}{rtems\+\_\+ramdisk\+\_\+configuration}} \mbox{[}$\,$\mbox{]}
\begin{DoxyCompactList}\small\item\em External reference to the R\+AM disk configuration table describing each R\+AM disk in the system. \end{DoxyCompactList}\item 
size\+\_\+t \mbox{\hyperlink{group__rtems__ramdisk_gae3749836b518adac705d1872e2e2e649}{rtems\+\_\+ramdisk\+\_\+configuration\+\_\+size}}
\begin{DoxyCompactList}\small\item\em External reference the size of the R\+AM disk configuration table \mbox{\hyperlink{group__rtems__ramdisk_ga3f3e285d9218984555c395ae54250e1e}{rtems\+\_\+ramdisk\+\_\+configuration}}. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{group__rtems__ramdisk_ga8ca1a815fa8cba467668c77eef317d76}\label{group__rtems__ramdisk_ga8ca1a815fa8cba467668c77eef317d76}} 
\mbox{\hyperlink{group__ClassicStatus_ga545d41846817eaba6143d52ee4d9e9fe}{rtems\+\_\+device\+\_\+driver}} \mbox{\hyperlink{group__rtems__ramdisk_ga8ca1a815fa8cba467668c77eef317d76}{ramdisk\+\_\+initialize}} (rtems\+\_\+device\+\_\+major\+\_\+number major, rtems\+\_\+device\+\_\+minor\+\_\+number minor, void $\ast$arg)
\begin{DoxyCompactList}\small\item\em R\+AM disk driver initialization entry point. \end{DoxyCompactList}\item 
\#define \mbox{\hyperlink{group__rtems__ramdisk_gae871d43a008058aca401c72b2f7f2ccd}{R\+A\+M\+D\+I\+S\+K\+\_\+\+D\+R\+I\+V\+E\+R\+\_\+\+T\+A\+B\+L\+E\+\_\+\+E\+N\+T\+RY}}
\item 
\mbox{\Hypertarget{group__rtems__ramdisk_ga28d31813af566fa597e1aff5c5b068a3}\label{group__rtems__ramdisk_ga28d31813af566fa597e1aff5c5b068a3}} 
\#define {\bfseries R\+A\+M\+D\+I\+S\+K\+\_\+\+D\+E\+V\+I\+C\+E\+\_\+\+B\+A\+S\+E\+\_\+\+N\+A\+ME}~\char`\"{}/dev/rd\char`\"{}
\end{DoxyCompactItemize}
\subsection*{Runtime Configuration}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{group__rtems__ramdisk_ga15e8cae26f73519967429dcfc38d8efd}\label{group__rtems__ramdisk_ga15e8cae26f73519967429dcfc38d8efd}} 
typedef struct \mbox{\hyperlink{structramdisk}{ramdisk}} \mbox{\hyperlink{group__rtems__ramdisk_ga15e8cae26f73519967429dcfc38d8efd}{ramdisk}}
\begin{DoxyCompactList}\small\item\em R\+AM disk descriptor. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{group__rtems__ramdisk_ga7038c2c976bd632ecdb9a0662ab65a4b}\label{group__rtems__ramdisk_ga7038c2c976bd632ecdb9a0662ab65a4b}} 
int {\bfseries ramdisk\+\_\+ioctl} (\mbox{\hyperlink{structrtems__disk__device}{rtems\+\_\+disk\+\_\+device}} $\ast$dd, uint32\+\_\+t req, void $\ast$argp)
\item 
\mbox{\hyperlink{structramdisk}{ramdisk}} $\ast$ \mbox{\hyperlink{group__rtems__ramdisk_gac6c99eed9f3b92bb4cf5184b25972e65}{ramdisk\+\_\+allocate}} (void $\ast$area\+\_\+begin, uint32\+\_\+t media\+\_\+block\+\_\+size, \mbox{\hyperlink{group__rtems__disk_ga5fbcfd40b657bff6c54d9e393fab3274}{rtems\+\_\+blkdev\+\_\+bnum}} media\+\_\+block\+\_\+count, bool trace)
\begin{DoxyCompactList}\small\item\em Allocates and initializes a R\+AM disk descriptor. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{group__rtems__ramdisk_gac1ac2e67477fcd42c3f0837382542727}\label{group__rtems__ramdisk_gac1ac2e67477fcd42c3f0837382542727}} 
void {\bfseries ramdisk\+\_\+free} (\mbox{\hyperlink{structramdisk}{ramdisk}} $\ast$rd)
\item 
\mbox{\hyperlink{group__ClassicStatus_ga545d41846817eaba6143d52ee4d9e9fe}{rtems\+\_\+status\+\_\+code}} \mbox{\hyperlink{group__rtems__ramdisk_ga22e8a306b2cac6ab0dd029788e33641e}{ramdisk\+\_\+register}} (uint32\+\_\+t media\+\_\+block\+\_\+size, \mbox{\hyperlink{group__rtems__disk_ga5fbcfd40b657bff6c54d9e393fab3274}{rtems\+\_\+blkdev\+\_\+bnum}} media\+\_\+block\+\_\+count, bool trace, const char $\ast$disk)
\begin{DoxyCompactList}\small\item\em Allocates, initializes and registers a R\+AM disk. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}


\subsection{Macro Definition Documentation}
\mbox{\Hypertarget{group__rtems__ramdisk_gae871d43a008058aca401c72b2f7f2ccd}\label{group__rtems__ramdisk_gae871d43a008058aca401c72b2f7f2ccd}} 
\index{RAM Disk Device@{RAM Disk Device}!RAMDISK\_DRIVER\_TABLE\_ENTRY@{RAMDISK\_DRIVER\_TABLE\_ENTRY}}
\index{RAMDISK\_DRIVER\_TABLE\_ENTRY@{RAMDISK\_DRIVER\_TABLE\_ENTRY}!RAM Disk Device@{RAM Disk Device}}
\subsubsection{\texorpdfstring{RAMDISK\_DRIVER\_TABLE\_ENTRY}{RAMDISK\_DRIVER\_TABLE\_ENTRY}}
{\footnotesize\ttfamily \#define R\+A\+M\+D\+I\+S\+K\+\_\+\+D\+R\+I\+V\+E\+R\+\_\+\+T\+A\+B\+L\+E\+\_\+\+E\+N\+T\+RY}

{\bfseries Value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{\{ \(\backslash\)}
\DoxyCodeLine{    ramdisk\_initialize, \(\backslash\)}
\DoxyCodeLine{    NULL, \mbox{\hyperlink{bestcomm__api_8h_a872bb74de61c3689ccd5b41873fce42c}{NULL}}, \mbox{\hyperlink{bestcomm__api_8h_a872bb74de61c3689ccd5b41873fce42c}{NULL}}, \mbox{\hyperlink{bestcomm__api_8h_a872bb74de61c3689ccd5b41873fce42c}{NULL}}, \mbox{\hyperlink{bestcomm__api_8h_a872bb74de61c3689ccd5b41873fce42c}{NULL}} \(\backslash\)}
\DoxyCodeLine{  \}}

\end{DoxyCode}
R\+AM disk driver table entry. 

\subsection{Function Documentation}
\mbox{\Hypertarget{group__rtems__ramdisk_gac6c99eed9f3b92bb4cf5184b25972e65}\label{group__rtems__ramdisk_gac6c99eed9f3b92bb4cf5184b25972e65}} 
\index{RAM Disk Device@{RAM Disk Device}!ramdisk\_allocate@{ramdisk\_allocate}}
\index{ramdisk\_allocate@{ramdisk\_allocate}!RAM Disk Device@{RAM Disk Device}}
\subsubsection{\texorpdfstring{ramdisk\_allocate()}{ramdisk\_allocate()}}
{\footnotesize\ttfamily \mbox{\hyperlink{structramdisk}{ramdisk}}$\ast$ ramdisk\+\_\+allocate (\begin{DoxyParamCaption}\item[{void $\ast$}]{area\+\_\+begin,  }\item[{uint32\+\_\+t}]{media\+\_\+block\+\_\+size,  }\item[{\mbox{\hyperlink{group__rtems__disk_ga5fbcfd40b657bff6c54d9e393fab3274}{rtems\+\_\+blkdev\+\_\+bnum}}}]{media\+\_\+block\+\_\+count,  }\item[{bool}]{trace }\end{DoxyParamCaption})}



Allocates and initializes a R\+AM disk descriptor. 

The block size will be {\itshape media\+\_\+block\+\_\+size}. The block count will be {\itshape media\+\_\+block\+\_\+count}. The disk storage area begins at {\itshape area\+\_\+begin}. If {\itshape area\+\_\+begin} is {\ttfamily N\+U\+LL}, the memory will be allocated and zeroed. Sets the trace enable to {\itshape trace}.

\begin{DoxyReturn}{Returns}
Pointer to allocated and initialized ramdisk structure, or {\ttfamily N\+U\+LL} if no memory is available.
\end{DoxyReturn}
\begin{DoxyNote}{Note}
Runtime configuration example\+: 
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{preprocessor}{\#include <\mbox{\hyperlink{ramdisk_8h}{rtems/ramdisk.h}}>}}
\DoxyCodeLine{}
\DoxyCodeLine{\mbox{\hyperlink{group__ClassicStatus_ga545d41846817eaba6143d52ee4d9e9fe}{rtems\_status\_code}} create\_ramdisk(}
\DoxyCodeLine{  \textcolor{keyword}{const} \textcolor{keywordtype}{char} *\mbox{\hyperlink{structdevice}{device}},}
\DoxyCodeLine{  uint32\_t media\_block\_size,}
\DoxyCodeLine{  \mbox{\hyperlink{group__rtems__disk_ga5fbcfd40b657bff6c54d9e393fab3274}{rtems\_blkdev\_bnum}} media\_block\_count}
\DoxyCodeLine{)}
\DoxyCodeLine{\{}
\DoxyCodeLine{  \mbox{\hyperlink{group__ClassicStatus_ga545d41846817eaba6143d52ee4d9e9fe}{rtems\_status\_code}} sc;}
\DoxyCodeLine{  \mbox{\hyperlink{structramdisk}{ramdisk}} *rd;}
\DoxyCodeLine{}
\DoxyCodeLine{  rd = \mbox{\hyperlink{group__rtems__ramdisk_gac6c99eed9f3b92bb4cf5184b25972e65}{ramdisk\_allocate}}(\mbox{\hyperlink{bestcomm__api_8h_a872bb74de61c3689ccd5b41873fce42c}{NULL}}, media\_block\_size, media\_block\_count, \textcolor{keyword}{false});}
\DoxyCodeLine{  \textcolor{keywordflow}{if} (rd != \mbox{\hyperlink{bestcomm__api_8h_a872bb74de61c3689ccd5b41873fce42c}{NULL}}) \{}
\DoxyCodeLine{    sc = \mbox{\hyperlink{group__rtems__blkdev_gae2fe7e8c05fa9db0fa7c0ec4e8e4967d}{rtems\_blkdev\_create}}(}
\DoxyCodeLine{      \mbox{\hyperlink{structdevice}{device}},}
\DoxyCodeLine{      media\_block\_size,}
\DoxyCodeLine{      media\_block\_count,}
\DoxyCodeLine{      ramdisk\_ioctl,}
\DoxyCodeLine{      rd}
\DoxyCodeLine{    );}
\DoxyCodeLine{  \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{    sc = \mbox{\hyperlink{group__ClassicStatus_gga545d41846817eaba6143d52ee4d9e9fea20ba7719ec954c175943fe22aa5ff221}{RTEMS\_UNSATISFIED}};}
\DoxyCodeLine{  \}}
\DoxyCodeLine{}
\DoxyCodeLine{  \textcolor{keywordflow}{return} sc;}
\DoxyCodeLine{\}}
\end{DoxyCode}
 
\end{DoxyNote}
\mbox{\Hypertarget{group__rtems__ramdisk_ga22e8a306b2cac6ab0dd029788e33641e}\label{group__rtems__ramdisk_ga22e8a306b2cac6ab0dd029788e33641e}} 
\index{RAM Disk Device@{RAM Disk Device}!ramdisk\_register@{ramdisk\_register}}
\index{ramdisk\_register@{ramdisk\_register}!RAM Disk Device@{RAM Disk Device}}
\subsubsection{\texorpdfstring{ramdisk\_register()}{ramdisk\_register()}}
{\footnotesize\ttfamily \mbox{\hyperlink{group__ClassicStatus_ga545d41846817eaba6143d52ee4d9e9fe}{rtems\+\_\+status\+\_\+code}} ramdisk\+\_\+register (\begin{DoxyParamCaption}\item[{uint32\+\_\+t}]{media\+\_\+block\+\_\+size,  }\item[{\mbox{\hyperlink{group__rtems__disk_ga5fbcfd40b657bff6c54d9e393fab3274}{rtems\+\_\+blkdev\+\_\+bnum}}}]{media\+\_\+block\+\_\+count,  }\item[{bool}]{trace,  }\item[{const char $\ast$}]{disk }\end{DoxyParamCaption})}



Allocates, initializes and registers a R\+AM disk. 

The block size will be {\itshape media\+\_\+block\+\_\+size}. The block count will be {\itshape media\+\_\+block\+\_\+count}. The disk storage will be allocated. Sets the trace enable to {\itshape trace}. Registers a device node with disk name path {\itshape disk}. The registered device number will be returned in {\itshape dev}.


\begin{DoxyRetVals}{Return values}
{\em R\+T\+E\+M\+S\+\_\+\+S\+U\+C\+C\+E\+S\+S\+F\+UL} & Successful operation. \\
\hline
{\em R\+T\+E\+M\+S\+\_\+\+U\+N\+S\+A\+T\+I\+S\+F\+I\+ED} & Something is wrong. \\
\hline
\end{DoxyRetVals}


\subsection{Variable Documentation}
\mbox{\Hypertarget{group__rtems__ramdisk_ga3f3e285d9218984555c395ae54250e1e}\label{group__rtems__ramdisk_ga3f3e285d9218984555c395ae54250e1e}} 
\index{RAM Disk Device@{RAM Disk Device}!rtems\_ramdisk\_configuration@{rtems\_ramdisk\_configuration}}
\index{rtems\_ramdisk\_configuration@{rtems\_ramdisk\_configuration}!RAM Disk Device@{RAM Disk Device}}
\subsubsection{\texorpdfstring{rtems\_ramdisk\_configuration}{rtems\_ramdisk\_configuration}}
{\footnotesize\ttfamily \mbox{\hyperlink{structrtems__ramdisk__config}{rtems\+\_\+ramdisk\+\_\+config}} rtems\+\_\+ramdisk\+\_\+configuration\mbox{[}$\,$\mbox{]}}



External reference to the R\+AM disk configuration table describing each R\+AM disk in the system. 

The configuration table is provided by the application. \mbox{\Hypertarget{group__rtems__ramdisk_gae3749836b518adac705d1872e2e2e649}\label{group__rtems__ramdisk_gae3749836b518adac705d1872e2e2e649}} 
\index{RAM Disk Device@{RAM Disk Device}!rtems\_ramdisk\_configuration\_size@{rtems\_ramdisk\_configuration\_size}}
\index{rtems\_ramdisk\_configuration\_size@{rtems\_ramdisk\_configuration\_size}!RAM Disk Device@{RAM Disk Device}}
\subsubsection{\texorpdfstring{rtems\_ramdisk\_configuration\_size}{rtems\_ramdisk\_configuration\_size}}
{\footnotesize\ttfamily size\+\_\+t rtems\+\_\+ramdisk\+\_\+configuration\+\_\+size}



External reference the size of the R\+AM disk configuration table \mbox{\hyperlink{group__rtems__ramdisk_ga3f3e285d9218984555c395ae54250e1e}{rtems\+\_\+ramdisk\+\_\+configuration}}. 

The configuration table size is provided by the application. 