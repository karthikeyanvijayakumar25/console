\hypertarget{group__rtems__fstab}{}\section{File System Mount Support}
\label{group__rtems__fstab}\index{File System Mount Support@{File System Mount Support}}


File System Mount Functions.  


\subsection*{Files}
\begin{DoxyCompactItemize}
\item 
file \mbox{\hyperlink{fsmount_8c}{fsmount.\+c}}
\begin{DoxyCompactList}\small\item\em File System Mount Functions. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Data Structures}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{structrtems__fstab__entry}{rtems\+\_\+fstab\+\_\+entry}}
\end{DoxyCompactItemize}
\subsection*{Enumerations}
\begin{DoxyCompactItemize}
\item 
enum \mbox{\hyperlink{group__rtems__fstab_gabcbeff39e673bbef9ec0960f64d19228}{rtems\+\_\+fstab\+\_\+conditions}} \{ \newline
\mbox{\hyperlink{group__rtems__fstab_ggabcbeff39e673bbef9ec0960f64d19228a02b814a4e2912b3798f9461f21c653d0}{R\+T\+E\+M\+S\+\_\+\+F\+S\+T\+A\+B\+\_\+\+N\+O\+NE}} = 0U, 
\mbox{\hyperlink{group__rtems__fstab_ggabcbeff39e673bbef9ec0960f64d19228a599040e2f9b9138f579b4afe2d89e74f}{R\+T\+E\+M\+S\+\_\+\+F\+S\+T\+A\+B\+\_\+\+OK}} = 0x1U, 
\mbox{\hyperlink{group__rtems__fstab_ggabcbeff39e673bbef9ec0960f64d19228a45c5b0422063b6c6f7639592599a4a14}{R\+T\+E\+M\+S\+\_\+\+F\+S\+T\+A\+B\+\_\+\+E\+R\+R\+O\+R\+\_\+\+M\+O\+U\+N\+T\+\_\+\+P\+O\+I\+NT}} = 0x2U, 
\mbox{\hyperlink{group__rtems__fstab_ggabcbeff39e673bbef9ec0960f64d19228abea4e604d901dfde4675a0a371e4ff32}{R\+T\+E\+M\+S\+\_\+\+F\+S\+T\+A\+B\+\_\+\+E\+R\+R\+O\+R\+\_\+\+M\+O\+U\+NT}} = 0x4U, 
\newline
\mbox{\hyperlink{group__rtems__fstab_ggabcbeff39e673bbef9ec0960f64d19228a4f7b97e87454e1faea9e4157d8da1c35}{R\+T\+E\+M\+S\+\_\+\+F\+S\+T\+A\+B\+\_\+\+E\+R\+R\+OR}} = R\+T\+E\+M\+S\+\_\+\+F\+S\+T\+A\+B\+\_\+\+E\+R\+R\+O\+R\+\_\+\+M\+O\+U\+N\+T\+\_\+\+P\+O\+I\+NT $\vert$ R\+T\+E\+M\+S\+\_\+\+F\+S\+T\+A\+B\+\_\+\+E\+R\+R\+O\+R\+\_\+\+M\+O\+U\+NT, 
\mbox{\hyperlink{group__rtems__fstab_ggabcbeff39e673bbef9ec0960f64d19228a7d5868d458848d9f2a99fe67d4016360}{R\+T\+E\+M\+S\+\_\+\+F\+S\+T\+A\+B\+\_\+\+A\+NY}} = R\+T\+E\+M\+S\+\_\+\+F\+S\+T\+A\+B\+\_\+\+OK $\vert$ R\+T\+E\+M\+S\+\_\+\+F\+S\+T\+A\+B\+\_\+\+E\+R\+R\+OR
 \}
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
int \mbox{\hyperlink{group__rtems__fstab_gaa1e00bfe1aa6bce349c2c73092a39cc6}{rtems\+\_\+fsmount}} (const \mbox{\hyperlink{structrtems__fstab__entry}{rtems\+\_\+fstab\+\_\+entry}} $\ast$fstab, size\+\_\+t \mbox{\hyperlink{sun4u_2tte_8h_a245260f6f74972558f61b85227df5aae}{size}}, size\+\_\+t $\ast$abort\+\_\+index)
\begin{DoxyCompactList}\small\item\em Mounts the file systems listed in the file system mount table. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
File System Mount Functions. 

This file contains the fsmount functions. These functions

are used to mount a list of filesystems (and create their mount points before). 

\subsection{Enumeration Type Documentation}
\mbox{\Hypertarget{group__rtems__fstab_gabcbeff39e673bbef9ec0960f64d19228}\label{group__rtems__fstab_gabcbeff39e673bbef9ec0960f64d19228}} 
\index{File System Mount Support@{File System Mount Support}!rtems\_fstab\_conditions@{rtems\_fstab\_conditions}}
\index{rtems\_fstab\_conditions@{rtems\_fstab\_conditions}!File System Mount Support@{File System Mount Support}}
\subsubsection{\texorpdfstring{rtems\_fstab\_conditions}{rtems\_fstab\_conditions}}
{\footnotesize\ttfamily enum \mbox{\hyperlink{group__rtems__fstab_gabcbeff39e673bbef9ec0960f64d19228}{rtems\+\_\+fstab\+\_\+conditions}}}

File system mount report and abort condition flags.

The flags define, which conditions will cause a report during the mount process (via printf()) or abort the mount process.

\begin{DoxySeeAlso}{See also}
\mbox{\hyperlink{structrtems__fstab__entry}{rtems\+\_\+fstab\+\_\+entry}} and \mbox{\hyperlink{group__rtems__fstab_gaa1e00bfe1aa6bce349c2c73092a39cc6}{rtems\+\_\+fsmount()}}. 
\end{DoxySeeAlso}
\begin{DoxyEnumFields}{Enumerator}
\raisebox{\heightof{T}}[0pt][0pt]{\index{RTEMS\_FSTAB\_NONE@{RTEMS\_FSTAB\_NONE}!File System Mount Support@{File System Mount Support}}\index{File System Mount Support@{File System Mount Support}!RTEMS\_FSTAB\_NONE@{RTEMS\_FSTAB\_NONE}}}\mbox{\Hypertarget{group__rtems__fstab_ggabcbeff39e673bbef9ec0960f64d19228a02b814a4e2912b3798f9461f21c653d0}\label{group__rtems__fstab_ggabcbeff39e673bbef9ec0960f64d19228a02b814a4e2912b3798f9461f21c653d0}} 
R\+T\+E\+M\+S\+\_\+\+F\+S\+T\+A\+B\+\_\+\+N\+O\+NE&No conditions. \\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{RTEMS\_FSTAB\_OK@{RTEMS\_FSTAB\_OK}!File System Mount Support@{File System Mount Support}}\index{File System Mount Support@{File System Mount Support}!RTEMS\_FSTAB\_OK@{RTEMS\_FSTAB\_OK}}}\mbox{\Hypertarget{group__rtems__fstab_ggabcbeff39e673bbef9ec0960f64d19228a599040e2f9b9138f579b4afe2d89e74f}\label{group__rtems__fstab_ggabcbeff39e673bbef9ec0960f64d19228a599040e2f9b9138f579b4afe2d89e74f}} 
R\+T\+E\+M\+S\+\_\+\+F\+S\+T\+A\+B\+\_\+\+OK&Complete mount process was successful. \\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{RTEMS\_FSTAB\_ERROR\_MOUNT\_POINT@{RTEMS\_FSTAB\_ERROR\_MOUNT\_POINT}!File System Mount Support@{File System Mount Support}}\index{File System Mount Support@{File System Mount Support}!RTEMS\_FSTAB\_ERROR\_MOUNT\_POINT@{RTEMS\_FSTAB\_ERROR\_MOUNT\_POINT}}}\mbox{\Hypertarget{group__rtems__fstab_ggabcbeff39e673bbef9ec0960f64d19228a45c5b0422063b6c6f7639592599a4a14}\label{group__rtems__fstab_ggabcbeff39e673bbef9ec0960f64d19228a45c5b0422063b6c6f7639592599a4a14}} 
R\+T\+E\+M\+S\+\_\+\+F\+S\+T\+A\+B\+\_\+\+E\+R\+R\+O\+R\+\_\+\+M\+O\+U\+N\+T\+\_\+\+P\+O\+I\+NT&Mount point creation failed. \\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{RTEMS\_FSTAB\_ERROR\_MOUNT@{RTEMS\_FSTAB\_ERROR\_MOUNT}!File System Mount Support@{File System Mount Support}}\index{File System Mount Support@{File System Mount Support}!RTEMS\_FSTAB\_ERROR\_MOUNT@{RTEMS\_FSTAB\_ERROR\_MOUNT}}}\mbox{\Hypertarget{group__rtems__fstab_ggabcbeff39e673bbef9ec0960f64d19228abea4e604d901dfde4675a0a371e4ff32}\label{group__rtems__fstab_ggabcbeff39e673bbef9ec0960f64d19228abea4e604d901dfde4675a0a371e4ff32}} 
R\+T\+E\+M\+S\+\_\+\+F\+S\+T\+A\+B\+\_\+\+E\+R\+R\+O\+R\+\_\+\+M\+O\+U\+NT&File system mount failed. \\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{RTEMS\_FSTAB\_ERROR@{RTEMS\_FSTAB\_ERROR}!File System Mount Support@{File System Mount Support}}\index{File System Mount Support@{File System Mount Support}!RTEMS\_FSTAB\_ERROR@{RTEMS\_FSTAB\_ERROR}}}\mbox{\Hypertarget{group__rtems__fstab_ggabcbeff39e673bbef9ec0960f64d19228a4f7b97e87454e1faea9e4157d8da1c35}\label{group__rtems__fstab_ggabcbeff39e673bbef9ec0960f64d19228a4f7b97e87454e1faea9e4157d8da1c35}} 
R\+T\+E\+M\+S\+\_\+\+F\+S\+T\+A\+B\+\_\+\+E\+R\+R\+OR&Something failed. \\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{RTEMS\_FSTAB\_ANY@{RTEMS\_FSTAB\_ANY}!File System Mount Support@{File System Mount Support}}\index{File System Mount Support@{File System Mount Support}!RTEMS\_FSTAB\_ANY@{RTEMS\_FSTAB\_ANY}}}\mbox{\Hypertarget{group__rtems__fstab_ggabcbeff39e673bbef9ec0960f64d19228a7d5868d458848d9f2a99fe67d4016360}\label{group__rtems__fstab_ggabcbeff39e673bbef9ec0960f64d19228a7d5868d458848d9f2a99fe67d4016360}} 
R\+T\+E\+M\+S\+\_\+\+F\+S\+T\+A\+B\+\_\+\+A\+NY&Any condition. \\
\hline

\end{DoxyEnumFields}


\subsection{Function Documentation}
\mbox{\Hypertarget{group__rtems__fstab_gaa1e00bfe1aa6bce349c2c73092a39cc6}\label{group__rtems__fstab_gaa1e00bfe1aa6bce349c2c73092a39cc6}} 
\index{File System Mount Support@{File System Mount Support}!rtems\_fsmount@{rtems\_fsmount}}
\index{rtems\_fsmount@{rtems\_fsmount}!File System Mount Support@{File System Mount Support}}
\subsubsection{\texorpdfstring{rtems\_fsmount()}{rtems\_fsmount()}}
{\footnotesize\ttfamily int rtems\+\_\+fsmount (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{structrtems__fstab__entry}{rtems\+\_\+fstab\+\_\+entry}} $\ast$}]{fstab,  }\item[{size\+\_\+t}]{size,  }\item[{size\+\_\+t $\ast$}]{abort\+\_\+index }\end{DoxyParamCaption})}



Mounts the file systems listed in the file system mount table. 

Mounts the file systems listed in the file system mount table {\itshape fstab} of size {\itshape size}.

Each file system will be mounted according to its table entry parameters. In case of an abort condition the corresponding table index will be reported in {\itshape abort\+\_\+index}. The pointer {\itshape abort\+\_\+index} may be {\ttfamily N\+U\+LL}. The mount point paths will be created with \mbox{\hyperlink{group__LibIO_gad15bb6c81ba9ed35ec75103d13bde734}{rtems\+\_\+mkdir()}} and need not exist beforehand.

On success, zero is returned. On error, -\/1 is returned, and {\ttfamily errno} is set appropriately.

\begin{DoxySeeAlso}{See also}
\mbox{\hyperlink{group__rtems__bdpart_ga9b0517982a75560e134c808e70885b81}{rtems\+\_\+bdpart\+\_\+register\+\_\+from\+\_\+disk()}}.
\end{DoxySeeAlso}
The following example code tries to mount a F\+AT file system within a SD Card. Some cards do not have a partition table so at first it tries to find a file system inside the hole disk. If this is successful the mount process will be aborted because the \mbox{\hyperlink{group__rtems__fstab_ggabcbeff39e673bbef9ec0960f64d19228a599040e2f9b9138f579b4afe2d89e74f}{R\+T\+E\+M\+S\+\_\+\+F\+S\+T\+A\+B\+\_\+\+OK}} condition is true. If this did not work it tries to mount the file system inside the first partition. If this fails the mount process will not be aborted (this is already the last entry), but the last error status will be returned.


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{preprocessor}{\#include <stdio.h>}}
\DoxyCodeLine{\textcolor{preprocessor}{\#include <string.h>}}
\DoxyCodeLine{\textcolor{preprocessor}{\#include <errno.h>}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{preprocessor}{\#include <\mbox{\hyperlink{rtems_8h}{rtems.h}}>}}
\DoxyCodeLine{\textcolor{preprocessor}{\#include <\mbox{\hyperlink{bdpart_8h}{rtems/bdpart.h}}>}}
\DoxyCodeLine{\textcolor{preprocessor}{\#include <\mbox{\hyperlink{error_8h}{rtems/error.h}}>}}
\DoxyCodeLine{\textcolor{preprocessor}{\#include <\mbox{\hyperlink{fsmount_8h}{rtems/fsmount.h}}>}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keyword}{static} \textcolor{keyword}{const} \mbox{\hyperlink{structrtems__fstab__entry}{rtems\_fstab\_entry}} fstab [] = \{}
\DoxyCodeLine{  \{}
\DoxyCodeLine{    .\mbox{\hyperlink{structrtems__fstab__entry_a399f942386cf428636ba749fc076dc8d}{source}} = \textcolor{stringliteral}{"/dev/sd-card-a"},}
\DoxyCodeLine{    .target = \textcolor{stringliteral}{"/mnt"},}
\DoxyCodeLine{    .type = \textcolor{stringliteral}{"dosfs"},}
\DoxyCodeLine{    .options = RTEMS\_FILESYSTEM\_READ\_WRITE,}
\DoxyCodeLine{    .report\_reasons = \mbox{\hyperlink{group__rtems__fstab_ggabcbeff39e673bbef9ec0960f64d19228a7d5868d458848d9f2a99fe67d4016360}{RTEMS\_FSTAB\_ANY}},}
\DoxyCodeLine{    .abort\_reasons = \mbox{\hyperlink{group__rtems__fstab_ggabcbeff39e673bbef9ec0960f64d19228a599040e2f9b9138f579b4afe2d89e74f}{RTEMS\_FSTAB\_OK}}}
\DoxyCodeLine{  \}, \{}
\DoxyCodeLine{    .source = \textcolor{stringliteral}{"/dev/sd-card-a1"},}
\DoxyCodeLine{    .target = \textcolor{stringliteral}{"/mnt"},}
\DoxyCodeLine{    .type = \textcolor{stringliteral}{"dosfs"},}
\DoxyCodeLine{    .options = RTEMS\_FILESYSTEM\_READ\_WRITE,}
\DoxyCodeLine{    .report\_reasons = \mbox{\hyperlink{group__rtems__fstab_ggabcbeff39e673bbef9ec0960f64d19228a7d5868d458848d9f2a99fe67d4016360}{RTEMS\_FSTAB\_ANY}},}
\DoxyCodeLine{    .abort\_reasons = \mbox{\hyperlink{group__rtems__fstab_ggabcbeff39e673bbef9ec0960f64d19228a02b814a4e2912b3798f9461f21c653d0}{RTEMS\_FSTAB\_NONE}}}
\DoxyCodeLine{  \}}
\DoxyCodeLine{\};}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keyword}{static} \textcolor{keywordtype}{void} my\_mount(\textcolor{keywordtype}{void})}
\DoxyCodeLine{\{}
\DoxyCodeLine{  \mbox{\hyperlink{group__ClassicStatus_ga545d41846817eaba6143d52ee4d9e9fe}{rtems\_status\_code}} sc = \mbox{\hyperlink{group__ClassicStatus_gga545d41846817eaba6143d52ee4d9e9fea8a23e2d94778f09399da984d73562536}{RTEMS\_SUCCESSFUL}};}
\DoxyCodeLine{  \textcolor{keywordtype}{int} rv = 0;}
\DoxyCodeLine{  \textcolor{keywordtype}{size\_t} abort\_index = 0;}
\DoxyCodeLine{}
\DoxyCodeLine{  sc = \mbox{\hyperlink{group__rtems__bdpart_ga9b0517982a75560e134c808e70885b81}{rtems\_bdpart\_register\_from\_disk}}(\textcolor{stringliteral}{"/dev/sd-card-a"});}
\DoxyCodeLine{  \textcolor{keywordflow}{if} (sc != \mbox{\hyperlink{group__ClassicStatus_gga545d41846817eaba6143d52ee4d9e9fea8a23e2d94778f09399da984d73562536}{RTEMS\_SUCCESSFUL}}) \{}
\DoxyCodeLine{    printf(\textcolor{stringliteral}{"read partition table failed: \%s\(\backslash\)n"}, \mbox{\hyperlink{group__ClassicStatus_ga2266bf8df3365634df546ace2d0f1146}{rtems\_status\_text}}(sc));}
\DoxyCodeLine{  \}}
\DoxyCodeLine{}
\DoxyCodeLine{  rv = \mbox{\hyperlink{group__rtems__fstab_gaa1e00bfe1aa6bce349c2c73092a39cc6}{rtems\_fsmount}}(fstab, \textcolor{keyword}{sizeof}(fstab) / \textcolor{keyword}{sizeof}(fstab [0]), \&abort\_index);}
\DoxyCodeLine{  \textcolor{keywordflow}{if} (rv != 0) \{}
\DoxyCodeLine{    printf(\textcolor{stringliteral}{"mount failed: \%s\(\backslash\)n"}, strerror(errno));}
\DoxyCodeLine{  \}}
\DoxyCodeLine{  printf(\textcolor{stringliteral}{"mount aborted at \%zu\(\backslash\)n"}, abort\_index);}
\DoxyCodeLine{\}}
\end{DoxyCode}
 