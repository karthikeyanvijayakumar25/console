<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>RTEMS: cpukit/include/drvmgr/drvmgr.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="rtemslogo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">RTEMS
   &#160;<span id="projectnumber">5.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_cd198e36225ba3f41de97552050ac017.html">cpukit</a></li><li class="navelem"><a class="el" href="dir_4f6a7e6de63bf7faab77653961b179a0.html">include</a></li><li class="navelem"><a class="el" href="dir_f4dbac7d1cba53a2df8295cf487fdbed.html">drvmgr</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">drvmgr.h</div>  </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/* Driver Manager Interface.</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> * COPYRIGHT (c) 2009 Cobham Gaisler AB.</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> * The license and distribution terms for this file may be</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> * found in the file LICENSE in this distribution or at</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> * http://www.rtems.org/license/LICENSE.</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="preprocessor">#ifndef _DRIVER_MANAGER_H_</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="preprocessor">#define _DRIVER_MANAGER_H_</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;</div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="rtems_8h.html">rtems.h</a>&gt;</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include &lt;drvmgr/drvmgr_list.h&gt;</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &lt;stdint.h&gt;</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="basedefs_8h.html">rtems/score/basedefs.h</a>&gt;</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="smpimpl_8h.html">rtems/score/smpimpl.h</a>&gt;</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;</div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#ifdef __cplusplus</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="keyword">extern</span> <span class="stringliteral">&quot;C&quot;</span> {</div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;</div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment">/*** Configure Driver manager ***/</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;</div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment">/* Define the number of initialization levels of device drivers */</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#define DRVMGR_LEVEL_MAX 4</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;</div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment">/* Default to use semahpores for protection. Initialization works without</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="comment"> * locks and after initialization too if devices are not removed.</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#ifndef DRVMGR_USE_LOCKS</span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#define DRVMGR_USE_LOCKS 1</span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="keyword">struct </span><a class="code" href="structdrvmgr__dev.html">drvmgr_dev</a>;  <span class="comment">/* Device */</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="keyword">struct </span><a class="code" href="structdrvmgr__bus.html">drvmgr_bus</a>;  <span class="comment">/* Bus */</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="keyword">struct </span><a class="code" href="structdrvmgr__drv.html">drvmgr_drv</a>;  <span class="comment">/* Driver */</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="comment">/*** List Interface shortcuts ***/</span></div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#define BUS_LIST_HEAD(list) LIST_HEAD(list, struct drvmgr_bus)</span></div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#define BUS_LIST_TAIL(list) LIST_TAIL(list, struct drvmgr_bus)</span></div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#define DEV_LIST_HEAD(list) LIST_HEAD(list, struct drvmgr_dev)</span></div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#define DEV_LIST_TAIL(list) LIST_TAIL(list, struct drvmgr_dev)</span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="preprocessor">#define DRV_LIST_HEAD(list) LIST_HEAD(list, struct drvmgr_drv)</span></div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="preprocessor">#define DRV_LIST_TAIL(list) LIST_TAIL(list, struct drvmgr_drv)</span></div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="comment">/*** Bus indentification ***/</span></div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="preprocessor">#define DRVMGR_BUS_TYPE_NONE 0      </span><span class="comment">/* Not a valid bus */</span><span class="preprocessor"></span></div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="preprocessor">#define DRVMGR_BUS_TYPE_ROOT 1      </span><span class="comment">/* Hard coded bus */</span><span class="preprocessor"></span></div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="preprocessor">#define DRVMGR_BUS_TYPE_PCI 2       </span><span class="comment">/* PCI bus */</span><span class="preprocessor"></span></div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="preprocessor">#define DRVMGR_BUS_TYPE_AMBAPP 3    </span><span class="comment">/* AMBA Plug &amp; Play bus */</span><span class="preprocessor"></span></div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="preprocessor">#define DRVMGR_BUS_TYPE_LEON2_AMBA 4    </span><span class="comment">/* LEON2 hardcoded bus */</span><span class="preprocessor"></span></div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="preprocessor">#define DRVMGR_BUS_TYPE_AMBAPP_DIST 5   </span><span class="comment">/* Distibuted AMBA Plug &amp; Play bus accessed using a communication interface */</span><span class="preprocessor"></span></div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="preprocessor">#define DRVMGR_BUS_TYPE_SPW_RMAP 6  </span><span class="comment">/* SpaceWire Network bus */</span><span class="preprocessor"></span></div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="preprocessor">#define DRVMGR_BUS_TYPE_AMBAPP_RMAP 7   </span><span class="comment">/* SpaceWire RMAP accessed AMBA Plug &amp; Play bus */</span><span class="preprocessor"></span></div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="keyword">enum</span> {</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    DRVMGR_OBJ_NONE = 0,</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    DRVMGR_OBJ_DRV = 1,</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    DRVMGR_OBJ_BUS = 2,</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    DRVMGR_OBJ_DEV = 3,</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;};</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="comment">/*** Driver indentification ***</span></div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="comment"> * 64-bit identification integer definition</span></div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="comment"> *  * Bus ID 8-bit [7..0]</span></div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="comment"> *  * Reserved 8-bit field [63..56]</span></div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="comment"> *  * Device ID specific for bus type 48-bit [55..8]  (Different buses have</span></div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="comment"> *    different unique identifications for hardware/driver.)</span></div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="comment"> * ID Rules</span></div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="comment"> *  * A root bus driver must always have device ID set to 0. There can only by</span></div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="comment"> *    one root bus driver for a certain bus type.</span></div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="comment"> *  * A Driver ID must identify a unique hardware core</span></div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="comment">/* Bus ID Mask */</span></div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="preprocessor">#define DRIVER_ID_BUS_MASK 0x00000000000000FFULL</span></div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="comment">/* Reserved Mask for future use */</span></div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="preprocessor">#define DRIVER_ID_RSV_MASK 0xFF00000000000000ULL</span></div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="comment">/* Reserved Mask for future use */</span></div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="preprocessor">#define DRIVER_ID_DEV_MASK 0x00FFFFFFFFFFFF00ULL</span></div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<span class="comment">/* Set Bus ID Mask. */</span></div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="preprocessor">#define DRIVER_ID(busid, devid) ((unsigned long long) \</span></div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;<span class="preprocessor">    ((((unsigned long long)(devid) &lt;&lt; 8) &amp; DRIVER_ID_DEV_MASK) | \</span></div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<span class="preprocessor">     ((unsigned long long)(busid) &amp; DRIVER_ID_BUS_MASK)))</span></div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<span class="comment">/* Get IDs */</span></div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;<span class="preprocessor">#define DRIVER_BUSID_GET(id)    ((unsigned long long)(id) &amp; DRIVER_ID_BUS_MASK)</span></div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="preprocessor">#define DRIVER_DEVID_GET(id)    (((unsigned long long)(id) &amp; DRIVER_ID_DEV_MASK) &gt;&gt; 8)</span></div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;<span class="preprocessor">#define DRIVER_ROOTBUS_ID(bus_type) DRIVER_ID(bus_type, 0)</span></div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;<span class="comment">/*** Root Bus drivers ***/</span></div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;<span class="comment">/* Generic Hard coded Root bus: Driver ID */</span></div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;<span class="preprocessor">#define DRIVER_ROOT_ID      DRIVER_ROOTBUS_ID(DRVMGR_BUS_TYPE_ROOT)</span></div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;<span class="comment">/* PCI Plug &amp; Play bus: Driver ID */</span></div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;<span class="preprocessor">#define DRIVER_PCIBUS_ID    DRIVER_ROOTBUS_ID(DRVMGR_BUS_TYPE_PCI)</span></div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<span class="comment">/* AMBA Plug &amp; Play bus: Driver ID */</span></div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;<span class="preprocessor">#define DRIVER_GRLIB_AMBAPP_ID  DRIVER_ROOTBUS_ID(DRVMGR_BUS_TYPE_AMBAPP)</span></div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;<span class="comment">/* AMBA Hard coded bus: Driver ID */</span></div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;<span class="preprocessor">#define DRIVER_LEON2_AMBA_ID    DRIVER_ROOTBUS_ID(DRVMGR_BUS_TYPE_LEON2_AMBA)</span></div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;<span class="comment">/* Distributed AMBA Plug &amp; Play bus: Driver ID */</span></div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;<span class="preprocessor">#define DRIVER_AMBAPP_DIST_ID   DRIVER_ROOTBUS_ID(DRVMGR_BUS_TYPE_AMBAPP_DIST)</span></div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;</div><div class="line"><a name="l00121"></a><span class="lineno"><a class="line" href="structdrvmgr__bus__params.html">  121</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structdrvmgr__bus__params.html">drvmgr_bus_params</a> {</div><div class="line"><a name="l00122"></a><span class="lineno"><a class="line" href="structdrvmgr__bus__params.html#ac57187503d68435f7601875716b9f1d5">  122</a></span>&#160;    <span class="keywordtype">char</span>        *<a class="code" href="structdrvmgr__bus__params.html#ac57187503d68435f7601875716b9f1d5">dev_prefix</a>;        </div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;};</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;<span class="comment">/* Interrupt Service Routine (ISR) */</span></div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;<span class="keyword">typedef</span> void (*drvmgr_isr)(<span class="keywordtype">void</span> *arg);</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;</div><div class="line"><a name="l00129"></a><span class="lineno"><a class="line" href="structdrvmgr__bus__ops.html">  129</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structdrvmgr__bus__ops.html">drvmgr_bus_ops</a> {</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    <span class="comment">/* Functions used internally within driver manager */</span></div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    int (*init[DRVMGR_LEVEL_MAX])(<span class="keyword">struct </span><a class="code" href="structdrvmgr__bus.html">drvmgr_bus</a> *);</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    int (*remove)(<span class="keyword">struct </span><a class="code" href="structdrvmgr__bus.html">drvmgr_bus</a> *);</div><div class="line"><a name="l00133"></a><span class="lineno"><a class="line" href="structdrvmgr__bus__ops.html#ac1aaf0f0581f7e816844a8eb622f54f8">  133</a></span>&#160;    int (*<a class="code" href="structdrvmgr__bus__ops.html#ac1aaf0f0581f7e816844a8eb622f54f8">unite</a>)(<span class="keyword">struct </span><a class="code" href="structdrvmgr__drv.html">drvmgr_drv</a> *, <span class="keyword">struct </span><a class="code" href="structdrvmgr__dev.html">drvmgr_dev</a> *); </div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    <span class="comment">/* Functions called indirectly from drivers */</span></div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    int (*int_register)(<span class="keyword">struct </span><a class="code" href="structdrvmgr__dev.html">drvmgr_dev</a> *, <span class="keywordtype">int</span> index, <span class="keyword">const</span> <span class="keywordtype">char</span> *info, drvmgr_isr isr, <span class="keywordtype">void</span> *arg);</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    int (*int_unregister)(<span class="keyword">struct </span><a class="code" href="structdrvmgr__dev.html">drvmgr_dev</a> *, <span class="keywordtype">int</span> index, drvmgr_isr isr, <span class="keywordtype">void</span> *arg);</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    int (*int_clear)(<span class="keyword">struct </span><a class="code" href="structdrvmgr__dev.html">drvmgr_dev</a> *, <span class="keywordtype">int</span> index);</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    int (*int_mask)(<span class="keyword">struct </span><a class="code" href="structdrvmgr__dev.html">drvmgr_dev</a> *, <span class="keywordtype">int</span> index);</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    int (*int_unmask)(<span class="keyword">struct </span><a class="code" href="structdrvmgr__dev.html">drvmgr_dev</a> *, <span class="keywordtype">int</span> index);</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;<span class="preprocessor">#ifdef RTEMS_SMP</span></div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    int (*int_set_affinity)(<span class="keyword">struct </span><a class="code" href="structdrvmgr__dev.html">drvmgr_dev</a> *, <span class="keywordtype">int</span> index,</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;                    <span class="keyword">const</span> Processor_mask *cpus);</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    <span class="comment">/* Get Parameters */</span></div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    int (*get_params)(<span class="keyword">struct </span><a class="code" href="structdrvmgr__dev.html">drvmgr_dev</a> *, <span class="keyword">struct </span><a class="code" href="structdrvmgr__bus__params.html">drvmgr_bus_params</a> *);</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    <span class="comment">/* Get Frequency of Bus */</span></div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    int (*get_freq)(<span class="keyword">struct </span><a class="code" href="structdrvmgr__dev.html">drvmgr_dev</a>*, int, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>*);</div><div class="line"><a name="l00153"></a><span class="lineno"><a class="line" href="structdrvmgr__bus__ops.html#a08024cc67a568af88a3360de629e656e">  153</a></span>&#160;    void    (*<a class="code" href="structdrvmgr__bus__ops.html#a08024cc67a568af88a3360de629e656e">get_info_dev</a>)(<span class="keyword">struct </span><a class="code" href="structdrvmgr__dev.html">drvmgr_dev</a> *,</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;                void (*print)(<span class="keywordtype">void</span> *<a class="code" href="sun4u_2tte_8h.html#a27952ffc298d15b4fc0e7ee6b2a044ac">p</a>, <span class="keywordtype">char</span> *str), <span class="keywordtype">void</span> *<a class="code" href="sun4u_2tte_8h.html#a27952ffc298d15b4fc0e7ee6b2a044ac">p</a>);</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;};</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;<span class="preprocessor">#define BUS_OPS_NUM (sizeof(struct drvmgr_bus_ops)/sizeof(void (*)(void)))</span></div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;</div><div class="line"><a name="l00158"></a><span class="lineno"><a class="line" href="structdrvmgr__func.html">  158</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structdrvmgr__func.html">drvmgr_func</a> {</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    <span class="keywordtype">int</span> funcid;</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    <span class="keywordtype">void</span> *func;</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;};</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;<span class="preprocessor">#define DRVMGR_FUNC(_ID_, _FUNC_) {(int)(_ID_), (void *)(_FUNC_)}</span></div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;<span class="preprocessor">#define DRVMGR_FUNC_END {0, NULL}</span></div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;<span class="comment">/*** Resource definitions ***</span></div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;<span class="comment"> * Overview of structures:</span></div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;<span class="comment"> *  All bus resources entries (_bus_res) are linked together per bus</span></div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;<span class="comment"> *  (bus_info-&gt;reslist). One bus resource entry has a pointer to an array of</span></div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;<span class="comment"> *  driver resources (_drv_res). One driver resouces is made out of an array</span></div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;<span class="comment"> *  of keys (drvmgr_key). All keys belongs to the same driver and harwdare</span></div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;<span class="comment"> *  device. Each key has a Name, Type ID and Data interpreted differently</span></div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;<span class="comment"> *  depending on the Type ID (union drvmgr_key_value).</span></div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;<span class="comment">/* Key Data Types */</span></div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;<span class="keyword">enum</span> drvmgr_kt {</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    DRVMGR_KT_ANY = -1,</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    DRVMGR_KT_NONE = 0,</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    DRVMGR_KT_INT = 1,</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    DRVMGR_KT_STRING = 2,</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    DRVMGR_KT_POINTER = 3,</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;};</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;<span class="preprocessor">#define DRVMGR_KEY_EMPTY    {NULL, DRVMGR_KT_NONE, {0}}</span></div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;<span class="preprocessor">#define DRVMGR_RES_EMPTY    {0, 0, NULL}</span></div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;<span class="preprocessor">#define MMAP_EMPTY  {0, 0, 0}</span></div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;</div><div class="line"><a name="l00191"></a><span class="lineno"><a class="line" href="uniondrvmgr__key__value.html">  191</a></span>&#160;<span class="keyword">union </span><a class="code" href="uniondrvmgr__key__value.html">drvmgr_key_value</a> {</div><div class="line"><a name="l00192"></a><span class="lineno"><a class="line" href="uniondrvmgr__key__value.html#a428feafb23a4c4e182f90c5af447ad90">  192</a></span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>        <a class="code" href="uniondrvmgr__key__value.html#a428feafb23a4c4e182f90c5af447ad90">i</a>;  </div><div class="line"><a name="l00193"></a><span class="lineno"><a class="line" href="uniondrvmgr__key__value.html#a57c138322a3ff8824f70c1973c3561e9">  193</a></span>&#160;    <span class="keywordtype">char</span>            *<a class="code" href="uniondrvmgr__key__value.html#a57c138322a3ff8824f70c1973c3561e9">str</a>;   </div><div class="line"><a name="l00194"></a><span class="lineno"><a class="line" href="uniondrvmgr__key__value.html#ad628f568bfa4e441eb5819b1c824c099">  194</a></span>&#160;    <span class="keywordtype">void</span>            *<a class="code" href="uniondrvmgr__key__value.html#ad628f568bfa4e441eb5819b1c824c099">ptr</a>;   </div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;};</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;<span class="comment">/* One key. One Value. Holding information relevant to the driver. */</span></div><div class="line"><a name="l00198"></a><span class="lineno"><a class="line" href="structdrvmgr__key.html">  198</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structdrvmgr__key.html">drvmgr_key</a> {</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    <span class="keywordtype">char</span>            *key_name;  <span class="comment">/* Name of key */</span></div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    <span class="keyword">enum</span> drvmgr_kt      key_type;   <span class="comment">/* How to interpret key_value */</span></div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    <span class="keyword">union </span><a class="code" href="uniondrvmgr__key__value.html">drvmgr_key_value</a>  key_value;  <span class="comment">/* The value or pointer to value */</span></div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;};</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;</div><div class="line"><a name="l00207"></a><span class="lineno"><a class="line" href="structdrvmgr__drv__res.html">  207</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structdrvmgr__drv__res.html">drvmgr_drv_res</a> {</div><div class="line"><a name="l00208"></a><span class="lineno"><a class="line" href="structdrvmgr__drv__res.html#aafcfa881872340b0f64d2796dba4dc33">  208</a></span>&#160;    uint64_t        <a class="code" href="structdrvmgr__drv__res.html#aafcfa881872340b0f64d2796dba4dc33">drv_id</a>;     </div><div class="line"><a name="l00209"></a><span class="lineno"><a class="line" href="structdrvmgr__drv__res.html#a55ee0835a6a4b9e8f9719f3c6c0387b7">  209</a></span>&#160;    <span class="keywordtype">int</span>         <a class="code" href="structdrvmgr__drv__res.html#a55ee0835a6a4b9e8f9719f3c6c0387b7">minor_bus</a>;  </div><div class="line"><a name="l00210"></a><span class="lineno"><a class="line" href="structdrvmgr__drv__res.html#a631c7ca06de7310a13421f42aeb6efea">  210</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="structdrvmgr__key.html">drvmgr_key</a>   *<a class="code" href="structdrvmgr__drv__res.html#a631c7ca06de7310a13421f42aeb6efea">keys</a>;      </div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;};</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;</div><div class="line"><a name="l00214"></a><span class="lineno"><a class="line" href="structdrvmgr__bus__res.html">  214</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structdrvmgr__bus__res.html">drvmgr_bus_res</a> {</div><div class="line"><a name="l00215"></a><span class="lineno"><a class="line" href="structdrvmgr__bus__res.html#a92660e37f6211eb2bb24739c8ae99339">  215</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="structdrvmgr__bus__res.html">drvmgr_bus_res</a>   *<a class="code" href="structdrvmgr__bus__res.html#a92660e37f6211eb2bb24739c8ae99339">next</a>;      </div><div class="line"><a name="l00216"></a><span class="lineno"><a class="line" href="structdrvmgr__bus__res.html#a1b80e82d17e823de898c086be7266523">  216</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="structdrvmgr__drv__res.html">drvmgr_drv_res</a>   <a class="code" href="structdrvmgr__bus__res.html#a1b80e82d17e823de898c086be7266523">resource</a>[]; </div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;};</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;</div><div class="line"><a name="l00225"></a><span class="lineno"><a class="line" href="structdrvmgr__map__entry.html">  225</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structdrvmgr__map__entry.html">drvmgr_map_entry</a> {</div><div class="line"><a name="l00226"></a><span class="lineno"><a class="line" href="structdrvmgr__map__entry.html#ab2f1dd43f429f44321b1671b23138f14">  226</a></span>&#160;    <span class="keywordtype">char</span>        *<a class="code" href="structdrvmgr__map__entry.html#ab2f1dd43f429f44321b1671b23138f14">name</a>;      </div><div class="line"><a name="l00227"></a><span class="lineno"><a class="line" href="structdrvmgr__map__entry.html#a6e86bd0c574cd6f7ef1046a4864caccd">  227</a></span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>    <a class="code" href="structdrvmgr__map__entry.html#a6e86bd0c574cd6f7ef1046a4864caccd">size</a>;       </div><div class="line"><a name="l00228"></a><span class="lineno"><a class="line" href="structdrvmgr__map__entry.html#adbeca87a3a7df8d429d4c0110921953f">  228</a></span>&#160;    <span class="keywordtype">char</span>        *<a class="code" href="structdrvmgr__map__entry.html#adbeca87a3a7df8d429d4c0110921953f">from_adr</a>;  </div><div class="line"><a name="l00230"></a><span class="lineno"><a class="line" href="structdrvmgr__map__entry.html#acd883f6a4d144d58dee3264da6fa9d38">  230</a></span>&#160;    <span class="keywordtype">char</span>        *<a class="code" href="structdrvmgr__map__entry.html#acd883f6a4d144d58dee3264da6fa9d38">to_adr</a>;    </div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;};</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;<span class="preprocessor">#define DRVMGR_TRANSLATE_ONE2ONE    NULL</span></div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;<span class="preprocessor">#define DRVMGR_TRANSLATE_NO_BRIDGE  ((void *)1)  </span><span class="comment">/* No bridge, error */</span><span class="preprocessor"></span></div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;</div><div class="line"><a name="l00237"></a><span class="lineno"><a class="line" href="structdrvmgr__bus.html">  237</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structdrvmgr__bus.html">drvmgr_bus</a> {</div><div class="line"><a name="l00238"></a><span class="lineno"><a class="line" href="structdrvmgr__bus.html#a37a26b8023b60dd1ca46a158a9caa90a">  238</a></span>&#160;    <span class="keywordtype">int</span>         <a class="code" href="structdrvmgr__bus.html#a37a26b8023b60dd1ca46a158a9caa90a">obj_type</a>;   </div><div class="line"><a name="l00239"></a><span class="lineno"><a class="line" href="structdrvmgr__bus.html#ad7ac15a0b977823ec8fe6b144f232724">  239</a></span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>       <a class="code" href="structdrvmgr__bus.html#ad7ac15a0b977823ec8fe6b144f232724">bus_type</a>;   </div><div class="line"><a name="l00240"></a><span class="lineno"><a class="line" href="structdrvmgr__bus.html#a78774b30ceb29cc8b4aa16a7f2352eb4">  240</a></span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>       <a class="code" href="structdrvmgr__bus.html#a78774b30ceb29cc8b4aa16a7f2352eb4">depth</a>;      </div><div class="line"><a name="l00241"></a><span class="lineno"><a class="line" href="structdrvmgr__bus.html#a86229ae3082803255914a6e9facaff01">  241</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="structdrvmgr__bus.html">drvmgr_bus</a>   *<a class="code" href="structdrvmgr__bus.html#a86229ae3082803255914a6e9facaff01">next</a>;      </div><div class="line"><a name="l00242"></a><span class="lineno"><a class="line" href="structdrvmgr__bus.html#a6352e29d34c91a1ad459afe30b1e812b">  242</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="structdrvmgr__dev.html">drvmgr_dev</a>   *<a class="code" href="structdrvmgr__bus.html#a6352e29d34c91a1ad459afe30b1e812b">dev</a>;       </div><div class="line"><a name="l00243"></a><span class="lineno"><a class="line" href="structdrvmgr__bus.html#a3e61e0a6e6b1fc336e34710482b1f38e">  243</a></span>&#160;    <span class="keywordtype">void</span>            *<a class="code" href="structdrvmgr__bus.html#a3e61e0a6e6b1fc336e34710482b1f38e">priv</a>;      </div><div class="line"><a name="l00244"></a><span class="lineno"><a class="line" href="structdrvmgr__bus.html#adf36f8ff74f0a0dc8bed44aab4812497">  244</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="structdrvmgr__dev.html">drvmgr_dev</a>   *<a class="code" href="structdrvmgr__bus.html#adf36f8ff74f0a0dc8bed44aab4812497">children</a>;  </div><div class="line"><a name="l00245"></a><span class="lineno"><a class="line" href="structdrvmgr__bus.html#a992594c81fca463bb9b84f67979e8a9f">  245</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="structdrvmgr__bus__ops.html">drvmgr_bus_ops</a>   *<a class="code" href="structdrvmgr__bus.html#a992594c81fca463bb9b84f67979e8a9f">ops</a>;       </div><div class="line"><a name="l00246"></a><span class="lineno"><a class="line" href="structdrvmgr__bus.html#a09cf5ec1ab115e27fa8a6e6b63323cc0">  246</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="structdrvmgr__func.html">drvmgr_func</a>  *<a class="code" href="structdrvmgr__bus.html#a09cf5ec1ab115e27fa8a6e6b63323cc0">funcs</a>;     </div><div class="line"><a name="l00247"></a><span class="lineno"><a class="line" href="structdrvmgr__bus.html#a91de472d59f5d1418b638cb256d4c5e5">  247</a></span>&#160;    <span class="keywordtype">int</span>         <a class="code" href="structdrvmgr__bus.html#a91de472d59f5d1418b638cb256d4c5e5">dev_cnt</a>;    </div><div class="line"><a name="l00248"></a><span class="lineno"><a class="line" href="structdrvmgr__bus.html#a75c599005800b34c8743d784b63543d9">  248</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="structdrvmgr__bus__res.html">drvmgr_bus_res</a>   *<a class="code" href="structdrvmgr__bus.html#a75c599005800b34c8743d784b63543d9">reslist</a>;   </div><div class="line"><a name="l00249"></a><span class="lineno"><a class="line" href="structdrvmgr__bus.html#aa8a21e55bfae1ccaec41f20809d0f68d">  249</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="structdrvmgr__map__entry.html">drvmgr_map_entry</a> *<a class="code" href="structdrvmgr__bus.html#aa8a21e55bfae1ccaec41f20809d0f68d">maps_up</a>;   </div><div class="line"><a name="l00250"></a><span class="lineno"><a class="line" href="structdrvmgr__bus.html#a55f02fb830efad84b593618f042ca702">  250</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="structdrvmgr__map__entry.html">drvmgr_map_entry</a> *<a class="code" href="structdrvmgr__bus.html#a55f02fb830efad84b593618f042ca702">maps_down</a>; </div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    <span class="comment">/* Bus status */</span></div><div class="line"><a name="l00253"></a><span class="lineno"><a class="line" href="structdrvmgr__bus.html#aac06ed42936fd2af9086e200fa2ec86d">  253</a></span>&#160;    <span class="keywordtype">int</span>         <a class="code" href="structdrvmgr__bus.html#aac06ed42936fd2af9086e200fa2ec86d">level</a>;      </div><div class="line"><a name="l00254"></a><span class="lineno"><a class="line" href="structdrvmgr__bus.html#a1d32bbcc0a03fd1bdce9902125b1fec3">  254</a></span>&#160;    <span class="keywordtype">int</span>         <a class="code" href="structdrvmgr__bus.html#a1d32bbcc0a03fd1bdce9902125b1fec3">state</a>;      </div><div class="line"><a name="l00255"></a><span class="lineno"><a class="line" href="structdrvmgr__bus.html#a0c3cf01c0652fa8e31512571114a0863">  255</a></span>&#160;    <span class="keywordtype">int</span>         <a class="code" href="structdrvmgr__bus.html#a0c3cf01c0652fa8e31512571114a0863">error</a>;      </div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;};</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;<span class="comment">/* States of a bus */</span></div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;<span class="preprocessor">#define BUS_STATE_INIT_FAILED   0x00000001  </span><span class="comment">/* Initialization Failed */</span><span class="preprocessor"></span></div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;<span class="preprocessor">#define BUS_STATE_LIST_INACTIVE 0x00001000  </span><span class="comment">/* In inactive bus list */</span><span class="preprocessor"></span></div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;<span class="preprocessor">#define BUS_STATE_DEPEND_FAILED 0x00000004  </span><span class="comment">/* Device init failed */</span><span class="preprocessor"></span></div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;<span class="comment">/* States of a device */</span></div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;<span class="preprocessor">#define DEV_STATE_INIT_FAILED   0x00000001  </span><span class="comment">/* Initialization Failed */</span><span class="preprocessor"></span></div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;<span class="preprocessor">#define DEV_STATE_INIT_DONE 0x00000002  </span><span class="comment">/* All init levels completed */</span><span class="preprocessor"></span></div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;<span class="preprocessor">#define DEV_STATE_DEPEND_FAILED 0x00000004  </span><span class="comment">/* Parent Bus init failed */</span><span class="preprocessor"></span></div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;<span class="preprocessor">#define DEV_STATE_UNITED    0x00000100  </span><span class="comment">/* Device United with Device Driver */</span><span class="preprocessor"></span></div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;<span class="preprocessor">#define DEV_STATE_REMOVED   0x00000200  </span><span class="comment">/* Device has been removed (unregistered) */</span><span class="preprocessor"></span></div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;<span class="preprocessor">#define DEV_STATE_IGNORED   0x00000400  </span><span class="comment">/* Device was ignored according to user&#39;s request, the device</span></div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;<span class="comment">                         * was never reported to it&#39;s driver (as expected).</span></div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;<span class="comment">                         */</span><span class="preprocessor"></span></div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;<span class="preprocessor">#define DEV_STATE_LIST_INACTIVE 0x00001000  </span><span class="comment">/* In inactive device list */</span><span class="preprocessor"></span></div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;</div><div class="line"><a name="l00275"></a><span class="lineno"><a class="line" href="structdrvmgr__dev.html">  275</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structdrvmgr__dev.html">drvmgr_dev</a> {</div><div class="line"><a name="l00276"></a><span class="lineno"><a class="line" href="structdrvmgr__dev.html#aa0f5e36183d83d612809d360fae88a5e">  276</a></span>&#160;    <span class="keywordtype">int</span>         <a class="code" href="structdrvmgr__dev.html#aa0f5e36183d83d612809d360fae88a5e">obj_type</a>;   </div><div class="line"><a name="l00277"></a><span class="lineno"><a class="line" href="structdrvmgr__dev.html#a3a9293f08d07aff4edaec9cebd2f7daa">  277</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="structdrvmgr__dev.html">drvmgr_dev</a>   *<a class="code" href="structdrvmgr__dev.html#a3a9293f08d07aff4edaec9cebd2f7daa">next</a>;      </div><div class="line"><a name="l00278"></a><span class="lineno"><a class="line" href="structdrvmgr__dev.html#a6dde549cda61d3c8ef3f0107328cf14b">  278</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="structdrvmgr__dev.html">drvmgr_dev</a>   *<a class="code" href="structdrvmgr__dev.html#a6dde549cda61d3c8ef3f0107328cf14b">next_in_bus</a>;   </div><div class="line"><a name="l00279"></a><span class="lineno"><a class="line" href="structdrvmgr__dev.html#a8d0b0a55a355d8d5c20b3eafe5f7a450">  279</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="structdrvmgr__dev.html">drvmgr_dev</a>   *<a class="code" href="structdrvmgr__dev.html#a8d0b0a55a355d8d5c20b3eafe5f7a450">next_in_drv</a>;   </div><div class="line"><a name="l00281"></a><span class="lineno"><a class="line" href="structdrvmgr__dev.html#a73a4618b4456ddad5a5f31ebb830e657">  281</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="structdrvmgr__drv.html">drvmgr_drv</a>   *<a class="code" href="structdrvmgr__dev.html#a73a4618b4456ddad5a5f31ebb830e657">drv</a>;       </div><div class="line"><a name="l00282"></a><span class="lineno"><a class="line" href="structdrvmgr__dev.html#a8f6d9336c942725b6ab463b3a95b75ea">  282</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="structdrvmgr__bus.html">drvmgr_bus</a>   *<a class="code" href="structdrvmgr__dev.html#a8f6d9336c942725b6ab463b3a95b75ea">parent</a>;    </div><div class="line"><a name="l00283"></a><span class="lineno"><a class="line" href="structdrvmgr__dev.html#ab3035ae0bfd6ea769c24bda5e5ca24a5">  283</a></span>&#160;    <span class="keywordtype">short</span>           <a class="code" href="structdrvmgr__dev.html#ab3035ae0bfd6ea769c24bda5e5ca24a5">minor_drv</a>;  </div><div class="line"><a name="l00284"></a><span class="lineno"><a class="line" href="structdrvmgr__dev.html#ad1e8865cac960cfe73cd69c181b6add3">  284</a></span>&#160;    <span class="keywordtype">short</span>           <a class="code" href="structdrvmgr__dev.html#ad1e8865cac960cfe73cd69c181b6add3">minor_bus</a>;  </div><div class="line"><a name="l00285"></a><span class="lineno"><a class="line" href="structdrvmgr__dev.html#a3ca456efcf196648d8c2eefc76f3ee21">  285</a></span>&#160;    <span class="keywordtype">char</span>            *<a class="code" href="structdrvmgr__dev.html#a3ca456efcf196648d8c2eefc76f3ee21">name</a>;      </div><div class="line"><a name="l00286"></a><span class="lineno"><a class="line" href="structdrvmgr__dev.html#a7d51e50ee5b48b67b0793de368eb8751">  286</a></span>&#160;    <span class="keywordtype">void</span>            *<a class="code" href="structdrvmgr__dev.html#a7d51e50ee5b48b67b0793de368eb8751">priv</a>;      </div><div class="line"><a name="l00287"></a><span class="lineno"><a class="line" href="structdrvmgr__dev.html#acdae19c81d1111a8dc952501c9519254">  287</a></span>&#160;    <span class="keywordtype">void</span>            *<a class="code" href="structdrvmgr__dev.html#acdae19c81d1111a8dc952501c9519254">businfo</a>;   </div><div class="line"><a name="l00288"></a><span class="lineno"><a class="line" href="structdrvmgr__dev.html#a07923db7c70d3287d70849ba1b16acb2">  288</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="structdrvmgr__bus.html">drvmgr_bus</a>   *<a class="code" href="structdrvmgr__dev.html#a07923db7c70d3287d70849ba1b16acb2">bus</a>;       </div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    <span class="comment">/* Device Status */</span></div><div class="line"><a name="l00291"></a><span class="lineno"><a class="line" href="structdrvmgr__dev.html#a6cf0b5c5f009ba47cf18fa567eb9218d">  291</a></span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>        <a class="code" href="structdrvmgr__dev.html#a6cf0b5c5f009ba47cf18fa567eb9218d">state</a>;      </div><div class="line"><a name="l00292"></a><span class="lineno"><a class="line" href="structdrvmgr__dev.html#a36ae5e46a2bd69b67288b8ca52cc37dd">  292</a></span>&#160;    <span class="keywordtype">int</span>         <a class="code" href="structdrvmgr__dev.html#a36ae5e46a2bd69b67288b8ca52cc37dd">level</a>;      </div><div class="line"><a name="l00293"></a><span class="lineno"><a class="line" href="structdrvmgr__dev.html#aa3e438d71e595a06f73d39b58cb78828">  293</a></span>&#160;    <span class="keywordtype">int</span>         <a class="code" href="structdrvmgr__dev.html#aa3e438d71e595a06f73d39b58cb78828">error</a>;      </div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;};</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;</div><div class="line"><a name="l00297"></a><span class="lineno"><a class="line" href="structdrvmgr__drv__ops.html">  297</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structdrvmgr__drv__ops.html">drvmgr_drv_ops</a> {</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    int (*init[DRVMGR_LEVEL_MAX])(<span class="keyword">struct </span><a class="code" href="structdrvmgr__dev.html">drvmgr_dev</a> *); </div><div class="line"><a name="l00299"></a><span class="lineno"><a class="line" href="structdrvmgr__drv__ops.html#afa653aa2b8ab4a45b08d7c7a14aa1151">  299</a></span>&#160;    int (*<a class="code" href="structdrvmgr__drv__ops.html#afa653aa2b8ab4a45b08d7c7a14aa1151">remove</a>)(<span class="keyword">struct </span><a class="code" href="structdrvmgr__dev.html">drvmgr_dev</a> *); </div><div class="line"><a name="l00300"></a><span class="lineno"><a class="line" href="structdrvmgr__drv__ops.html#a4b094f61f1613f2dc49b8ee2753a058e">  300</a></span>&#160;    int (*<a class="code" href="structdrvmgr__drv__ops.html#a4b094f61f1613f2dc49b8ee2753a058e">info</a>)(<span class="keyword">struct </span><a class="code" href="structdrvmgr__dev.html">drvmgr_dev</a> *, void (*print)(<span class="keywordtype">void</span> *<a class="code" href="sun4u_2tte_8h.html#a27952ffc298d15b4fc0e7ee6b2a044ac">p</a>, <span class="keywordtype">char</span> *str), <span class="keywordtype">void</span> *<a class="code" href="sun4u_2tte_8h.html#a27952ffc298d15b4fc0e7ee6b2a044ac">p</a>, <span class="keywordtype">int</span>, <span class="keywordtype">char</span> *argv[]);</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;};</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;<span class="preprocessor">#define DRVMGR_OPS_NUM(x) (sizeof(x)/sizeof(void (*)(void)))</span></div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;</div><div class="line"><a name="l00305"></a><span class="lineno"><a class="line" href="structdrvmgr__drv.html">  305</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structdrvmgr__drv.html">drvmgr_drv</a> {</div><div class="line"><a name="l00306"></a><span class="lineno"><a class="line" href="structdrvmgr__drv.html#ad6df87e2ef686e0aa0b3bed3f46b2590">  306</a></span>&#160;    <span class="keywordtype">int</span>         <a class="code" href="structdrvmgr__drv.html#ad6df87e2ef686e0aa0b3bed3f46b2590">obj_type</a>;   </div><div class="line"><a name="l00307"></a><span class="lineno"><a class="line" href="structdrvmgr__drv.html#a5544e016abaca51a2baaa32406d13528">  307</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="structdrvmgr__drv.html">drvmgr_drv</a>   *<a class="code" href="structdrvmgr__drv.html#a5544e016abaca51a2baaa32406d13528">next</a>;      </div><div class="line"><a name="l00308"></a><span class="lineno"><a class="line" href="structdrvmgr__drv.html#ac3340a7ceff44d4bd013823fc45338dc">  308</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="structdrvmgr__dev.html">drvmgr_dev</a>   *<a class="code" href="structdrvmgr__drv.html#ac3340a7ceff44d4bd013823fc45338dc">dev</a>;       </div><div class="line"><a name="l00310"></a><span class="lineno"><a class="line" href="structdrvmgr__drv.html#ad7bea4ea7a3a8587b64b82e9b7c9171f">  310</a></span>&#160;    uint64_t        <a class="code" href="structdrvmgr__drv.html#ad7bea4ea7a3a8587b64b82e9b7c9171f">drv_id</a>;     </div><div class="line"><a name="l00311"></a><span class="lineno"><a class="line" href="structdrvmgr__drv.html#a3f6e66aed68f0b6b8ad484ed524da08a">  311</a></span>&#160;    <span class="keywordtype">char</span>            *<a class="code" href="structdrvmgr__drv.html#a3f6e66aed68f0b6b8ad484ed524da08a">name</a>;      </div><div class="line"><a name="l00312"></a><span class="lineno"><a class="line" href="structdrvmgr__drv.html#ae555ca5e714134cbf25cfb7a6346ed8c">  312</a></span>&#160;    <span class="keywordtype">int</span>         <a class="code" href="structdrvmgr__drv.html#ae555ca5e714134cbf25cfb7a6346ed8c">bus_type</a>;   </div><div class="line"><a name="l00313"></a><span class="lineno"><a class="line" href="structdrvmgr__drv.html#a6d7671f3f2f42f4536cf1acbd0650405">  313</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="structdrvmgr__drv__ops.html">drvmgr_drv_ops</a>   *<a class="code" href="structdrvmgr__drv.html#a6d7671f3f2f42f4536cf1acbd0650405">ops</a>;       </div><div class="line"><a name="l00314"></a><span class="lineno"><a class="line" href="structdrvmgr__drv.html#a88e8e7dc6c20831cb09ad4ad8caf5151">  314</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="structdrvmgr__func.html">drvmgr_func</a>  *<a class="code" href="structdrvmgr__drv.html#a88e8e7dc6c20831cb09ad4ad8caf5151">funcs</a>;     </div><div class="line"><a name="l00315"></a><span class="lineno"><a class="line" href="structdrvmgr__drv.html#a5ea883c06b15c9191d0e7a030ee2b4ce">  315</a></span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>        <a class="code" href="structdrvmgr__drv.html#a5ea883c06b15c9191d0e7a030ee2b4ce">dev_cnt</a>;    </div><div class="line"><a name="l00316"></a><span class="lineno"><a class="line" href="structdrvmgr__drv.html#a9a94cfbbae8181703102dc9efb241db9">  316</a></span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>        <a class="code" href="structdrvmgr__drv.html#a9a94cfbbae8181703102dc9efb241db9">dev_priv_size</a>;  </div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;};</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;<span class="keyword">typedef</span> void (*drvmgr_drv_reg_func)(void);</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;<span class="comment">/*** DRIVER | DEVICE | BUS FUNCTIONS ***/</span></div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;<span class="comment">/* Return Codes */</span></div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;<span class="keyword">enum</span> {</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    DRVMGR_OK = 0,      <span class="comment">/* Sucess */</span></div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    DRVMGR_NOMEM = 1,   <span class="comment">/* Memory allocation error */</span></div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;    DRVMGR_EIO = 2,     <span class="comment">/* I/O error */</span></div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    DRVMGR_EINVAL = 3,  <span class="comment">/* Invalid parameter */</span></div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    DRVMGR_ENOSYS = 4,</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    DRVMGR_TIMEDOUT = 5,    <span class="comment">/* Operation timeout error */</span></div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    DRVMGR_EBUSY = 6,</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    DRVMGR_ENORES = 7,  <span class="comment">/* Not enough resources */</span></div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    DRVMGR_FAIL = -1    <span class="comment">/* Unspecified failure */</span></div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;};</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;<span class="keyword">extern</span> <span class="keywordtype">void</span> _DRV_Manager_initialization(<span class="keywordtype">void</span>);</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;<span class="keyword">extern</span> <span class="keywordtype">void</span> _DRV_Manager_init_level(<span class="keywordtype">int</span> level);</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;<span class="keyword">extern</span> <span class="keywordtype">int</span> drvmgr_init(<span class="keywordtype">void</span>);</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;<span class="comment">/* Take registered buses and devices into the correct init level,</span></div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;<span class="comment"> * this function is called from _init_level() so normally</span></div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;<span class="comment"> * we don&#39;t need to call it directly.</span></div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;<span class="keyword">extern</span> <span class="keywordtype">void</span> drvmgr_init_update(<span class="keywordtype">void</span>);</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;<span class="keyword">extern</span> <span class="keywordtype">int</span> drvmgr_root_drv_register(<span class="keyword">struct</span> <a class="code" href="structdrvmgr__drv.html">drvmgr_drv</a> *drv);</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;<span class="keyword">extern</span> <span class="keywordtype">int</span> drvmgr_drv_register(<span class="keyword">struct</span> <a class="code" href="structdrvmgr__drv.html">drvmgr_drv</a> *drv);</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;<span class="keyword">extern</span> <span class="keywordtype">int</span> drvmgr_dev_register(<span class="keyword">struct</span> <a class="code" href="structdrvmgr__dev.html">drvmgr_dev</a> *dev);</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;<span class="keyword">extern</span> <span class="keywordtype">int</span> drvmgr_dev_unregister(<span class="keyword">struct</span> <a class="code" href="structdrvmgr__dev.html">drvmgr_dev</a> *dev);</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;<span class="keyword">extern</span> <span class="keywordtype">int</span> drvmgr_bus_register(<span class="keyword">struct</span> <a class="code" href="structdrvmgr__bus.html">drvmgr_bus</a> *bus);</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;<span class="keyword">extern</span> <span class="keywordtype">int</span> drvmgr_bus_unregister(<span class="keyword">struct</span> <a class="code" href="structdrvmgr__bus.html">drvmgr_bus</a> *bus);</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;<span class="keyword">extern</span> <span class="keywordtype">int</span> drvmgr_children_unregister(<span class="keyword">struct</span> <a class="code" href="structdrvmgr__bus.html">drvmgr_bus</a> *bus);</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;<span class="comment">/* Separate a device from the driver it has been united with */</span></div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;<span class="keyword">extern</span> <span class="keywordtype">int</span> drvmgr_dev_drv_separate(<span class="keyword">struct</span> <a class="code" href="structdrvmgr__dev.html">drvmgr_dev</a> *dev);</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;<span class="keyword">extern</span> <span class="keywordtype">int</span> drvmgr_alloc_dev(<span class="keyword">struct</span> <a class="code" href="structdrvmgr__dev.html">drvmgr_dev</a> **pdev, <span class="keywordtype">int</span> extra);</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;<span class="keyword">extern</span> <span class="keywordtype">int</span> drvmgr_alloc_bus(<span class="keyword">struct</span> <a class="code" href="structdrvmgr__bus.html">drvmgr_bus</a> **pbus, <span class="keywordtype">int</span> extra);</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;<span class="comment">/*** DRIVER RESOURCE FUNCTIONS ***/</span></div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;<span class="keyword">extern</span> <span class="keywordtype">void</span> drvmgr_bus_res_add(<span class="keyword">struct</span> <a class="code" href="structdrvmgr__bus.html">drvmgr_bus</a> *bus,</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;                    <span class="keyword">struct</span> <a class="code" href="structdrvmgr__bus__res.html">drvmgr_bus_res</a> *bres);</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;<span class="keyword">extern</span> <span class="keywordtype">int</span> drvmgr_keys_get(<span class="keyword">struct</span> <a class="code" href="structdrvmgr__dev.html">drvmgr_dev</a> *dev, <span class="keyword">struct</span> <a class="code" href="structdrvmgr__key.html">drvmgr_key</a> **keys);</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;<span class="keyword">extern</span> <span class="keyword">struct </span><a class="code" href="structdrvmgr__key.html">drvmgr_key</a> *drvmgr_key_get(<span class="keyword">struct</span> <a class="code" href="structdrvmgr__key.html">drvmgr_key</a> *keys, <span class="keywordtype">char</span> *key_name);</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;<span class="keyword">extern</span> <span class="keyword">union </span><a class="code" href="uniondrvmgr__key__value.html">drvmgr_key_value</a> *drvmgr_key_val_get(</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;    <span class="keyword">struct</span> <a class="code" href="structdrvmgr__key.html">drvmgr_key</a> *keys,</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    <span class="keywordtype">char</span> *key_name,</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;    <span class="keyword">enum</span> drvmgr_kt key_type);</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;<span class="keyword">extern</span> <span class="keyword">union </span><a class="code" href="uniondrvmgr__key__value.html">drvmgr_key_value</a> *drvmgr_dev_key_get(</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;    <span class="keyword">struct</span> <a class="code" href="structdrvmgr__dev.html">drvmgr_dev</a> *dev,</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;    <span class="keywordtype">char</span> *key_name,</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;    <span class="keyword">enum</span> drvmgr_kt key_type);</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;<span class="comment">/*** DRIVER INTERACE USED TO REQUEST INFORMATION/SERVICES FROM BUS DRIVER ***/</span></div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;<a class="code" href="group__RTEMSScoreBaseDefs.html#gac216239df231d5dbd15e3520b0b9313f">RTEMS_INLINE_ROUTINE</a> <span class="keyword">struct </span><a class="code" href="structdrvmgr__bus.html">drvmgr_bus</a> *drvmgr_get_parent(</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;    <span class="keyword">struct</span> <a class="code" href="structdrvmgr__dev.html">drvmgr_dev</a> *<a class="code" href="structdrvmgr__bus.html#a6352e29d34c91a1ad459afe30b1e812b">dev</a>)</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;{</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="structdrvmgr__bus.html#a6352e29d34c91a1ad459afe30b1e812b">dev</a>)</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="structdrvmgr__bus.html#a6352e29d34c91a1ad459afe30b1e812b">dev</a>-&gt;<a class="code" href="structdrvmgr__dev.html#a8f6d9336c942725b6ab463b3a95b75ea">parent</a>;</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="bestcomm__api_8h.html#a872bb74de61c3689ccd5b41873fce42c">NULL</a>;</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;}</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;<a class="code" href="group__RTEMSScoreBaseDefs.html#gac216239df231d5dbd15e3520b0b9313f">RTEMS_INLINE_ROUTINE</a> <span class="keyword">struct </span><a class="code" href="structdrvmgr__drv.html">drvmgr_drv</a> *drvmgr_get_drv(<span class="keyword">struct</span> <a class="code" href="structdrvmgr__dev.html">drvmgr_dev</a> *<a class="code" href="structdrvmgr__drv.html#ac3340a7ceff44d4bd013823fc45338dc">dev</a>)</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;{</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="structdrvmgr__drv.html#ac3340a7ceff44d4bd013823fc45338dc">dev</a>)</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="structdrvmgr__drv.html#ac3340a7ceff44d4bd013823fc45338dc">dev</a>-&gt;<a class="code" href="structdrvmgr__dev.html#a73a4618b4456ddad5a5f31ebb830e657">drv</a>;</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="bestcomm__api_8h.html#a872bb74de61c3689ccd5b41873fce42c">NULL</a>;</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;}</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;<span class="preprocessor">#define DRVMGR_FED_BF 1     </span><span class="comment">/* Breadth-first search */</span><span class="preprocessor"></span></div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;<span class="preprocessor">#define DRVMGR_FED_DF 0     </span><span class="comment">/* Depth first search */</span><span class="preprocessor"></span></div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;<span class="keyword">extern</span> intptr_t drvmgr_for_each_dev(</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;    intptr_t (*func)(<span class="keyword">struct</span> <a class="code" href="structdrvmgr__dev.html">drvmgr_dev</a> *<a class="code" href="structdrvmgr__drv.html#ac3340a7ceff44d4bd013823fc45338dc">dev</a>, <span class="keywordtype">void</span> *arg),</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;    <span class="keywordtype">void</span> *arg,</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;    <span class="keywordtype">int</span> options);</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;<span class="keyword">extern</span> <span class="keywordtype">int</span> drvmgr_get_dev(</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;    <span class="keyword">struct</span> <a class="code" href="structdrvmgr__drv.html">drvmgr_drv</a> *drv,</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;    <span class="keywordtype">int</span> minor,</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;    <span class="keyword">struct</span> <a class="code" href="structdrvmgr__dev.html">drvmgr_dev</a> **pdev);</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;<span class="keyword">extern</span> <span class="keywordtype">int</span> drvmgr_freq_get(</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;    <span class="keyword">struct</span> <a class="code" href="structdrvmgr__dev.html">drvmgr_dev</a> *<a class="code" href="structdrvmgr__drv.html#ac3340a7ceff44d4bd013823fc45338dc">dev</a>,</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;    <span class="keywordtype">int</span> options,</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> *freq_hz);</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;<span class="keyword">extern</span> <span class="keywordtype">int</span> drvmgr_on_rootbus(<span class="keyword">struct</span> <a class="code" href="structdrvmgr__dev.html">drvmgr_dev</a> *<a class="code" href="structdrvmgr__drv.html#ac3340a7ceff44d4bd013823fc45338dc">dev</a>);</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;<span class="keyword">extern</span> <span class="keywordtype">int</span> drvmgr_get_dev_prefix(<span class="keyword">struct</span> <a class="code" href="structdrvmgr__dev.html">drvmgr_dev</a> *<a class="code" href="structdrvmgr__drv.html#ac3340a7ceff44d4bd013823fc45338dc">dev</a>, <span class="keywordtype">char</span> *dev_prefix);</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;<span class="keyword">extern</span> <span class="keywordtype">int</span> drvmgr_interrupt_register(</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;    <span class="keyword">struct</span> <a class="code" href="structdrvmgr__dev.html">drvmgr_dev</a> *<a class="code" href="structdrvmgr__drv.html#ac3340a7ceff44d4bd013823fc45338dc">dev</a>,</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;    <span class="keywordtype">int</span> index,</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span> *info,</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;    drvmgr_isr isr,</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;    <span class="keywordtype">void</span> *arg);</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;<span class="keyword">extern</span> <span class="keywordtype">int</span> drvmgr_interrupt_unregister(</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;    <span class="keyword">struct</span> <a class="code" href="structdrvmgr__dev.html">drvmgr_dev</a> *<a class="code" href="structdrvmgr__drv.html#ac3340a7ceff44d4bd013823fc45338dc">dev</a>,</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;    <span class="keywordtype">int</span> index,</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;    drvmgr_isr isr,</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;    <span class="keywordtype">void</span> *arg);</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;<span class="keyword">extern</span> <span class="keywordtype">int</span> drvmgr_interrupt_clear(</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;    <span class="keyword">struct</span> <a class="code" href="structdrvmgr__dev.html">drvmgr_dev</a> *<a class="code" href="structdrvmgr__drv.html#ac3340a7ceff44d4bd013823fc45338dc">dev</a>,</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;    <span class="keywordtype">int</span> index);</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;<span class="keyword">extern</span> <span class="keywordtype">int</span> drvmgr_interrupt_unmask(</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;    <span class="keyword">struct</span> <a class="code" href="structdrvmgr__dev.html">drvmgr_dev</a> *<a class="code" href="structdrvmgr__drv.html#ac3340a7ceff44d4bd013823fc45338dc">dev</a>,</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;    <span class="keywordtype">int</span> index);</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;<span class="keyword">extern</span> <span class="keywordtype">int</span> drvmgr_interrupt_mask(</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;    <span class="keyword">struct</span> <a class="code" href="structdrvmgr__dev.html">drvmgr_dev</a> *<a class="code" href="structdrvmgr__drv.html#ac3340a7ceff44d4bd013823fc45338dc">dev</a>,</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;    <span class="keywordtype">int</span> index);</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;<span class="preprocessor">#ifdef RTEMS_SMP</span></div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;<span class="keyword">extern</span> <span class="keywordtype">int</span> drvmgr_interrupt_set_affinity(</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;    <span class="keyword">struct</span> <a class="code" href="structdrvmgr__dev.html">drvmgr_dev</a> *<a class="code" href="structdrvmgr__drv.html#ac3340a7ceff44d4bd013823fc45338dc">dev</a>,</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;    <span class="keywordtype">int</span> index,</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;    <span class="keyword">const</span> Processor_mask *cpus);</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;<span class="keyword">enum</span> drvmgr_tr_opts {</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;    <span class="comment">/* Translate CPU RAM Address (input) to DMA unit accessible address</span></div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;<span class="comment">     * (output), this is an upstreams translation in reverse order.</span></div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;<span class="comment">     *</span></div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;<span class="comment">     * Typical Usage:</span></div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;<span class="comment">     * It is common to translate a CPU accessible RAM address to an</span></div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;<span class="comment">     * address that DMA units can access over bridges.</span></div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;    CPUMEM_TO_DMA = 0x0,</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;    <span class="comment">/* Translate DMA Unit Accessible address mapped to CPU RAM (input) to</span></div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;<span class="comment">     * CPU accessible address (output). This is an upstreams translation.</span></div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;<span class="comment">     *</span></div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;<span class="comment">     * Typical Usage (not often used):</span></div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;<span class="comment">     * The DMA unit descriptors contain pointers to DMA buffers located at</span></div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;<span class="comment">     * CPU RAM addresses that the DMA unit can access, the CPU processes</span></div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;<span class="comment">     * the descriptors and want to access the data but a translation back</span></div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;<span class="comment">     * to CPU address is required.</span></div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;    CPUMEM_FROM_DMA = 0x1,</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;    <span class="comment">/* Translate DMA Memory Address (input) to CPU accessible address</span></div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;<span class="comment">     * (output), this is a downstreams translation in reverse order.</span></div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;<span class="comment">     *</span></div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;<span class="comment">     * Typical Usage:</span></div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;<span class="comment">     * A PCI network card puts packets into its memory not doing DMA over</span></div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;<span class="comment">     * PCI, in order for the CPU to access them the PCI address must be</span></div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;<span class="comment">     * translated.</span></div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;    DMAMEM_TO_CPU = 0x2,</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;    <span class="comment">/* Translate CPU accessible address (input) mapped to DMA Memory Address</span></div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;<span class="comment">     * to DMA Unit accessible address (output). This is a downstreams</span></div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;<span class="comment">     * translation.</span></div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;    DMAMEM_FROM_CPU = 0x3,</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;};</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;<span class="preprocessor">#define DRVMGR_TR_REVERSE 0x1   </span><span class="comment">/* do reverse translation direction order */</span><span class="preprocessor"></span></div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;<span class="preprocessor">#define DRVMGR_TR_PATH 0x2  </span><span class="comment">/* 0x0=down-stream 0x2=up-stream address path */</span><span class="preprocessor"></span></div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160; </div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;<span class="keyword">extern</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> drvmgr_translate(</div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;    <span class="keyword">struct</span> <a class="code" href="structdrvmgr__dev.html">drvmgr_dev</a> *<a class="code" href="structdrvmgr__drv.html#ac3340a7ceff44d4bd013823fc45338dc">dev</a>,</div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> options,</div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;    <span class="keywordtype">void</span> *src_address,</div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;    <span class="keywordtype">void</span> **dst_address);</div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;</div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;<span class="comment">/* Translate addresses between buses, used internally to implement</span></div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;<span class="comment"> * drvmgr_translate. Function is not limited to translate from/to root bus</span></div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;<span class="comment"> * where CPU is resident, however buses must be on a straight path relative</span></div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;<span class="comment"> * to each other (parent of parent of parent and so on).</span></div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;<span class="comment"> * \param from         src_address is given for this bus</span></div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;<span class="comment"> * \param to           src_address is translated to this bus</span></div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;<span class="comment"> * \param reverse      Selects translation method, if map entries are used in</span></div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;<span class="comment"> *                     the reverse order (map_up-&gt;to is used as map_up-&gt;from)</span></div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;<span class="comment"> * \param src_address  Address to be translated</span></div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;<span class="comment"> * \param dst_address  Translated address is stored here on success (return=0)</span></div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;<span class="comment"> *  Returns 0 if unable to translate. The remaining length from the given</span></div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;<span class="comment"> *  address of the map is returned on success and the result is stored into</span></div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;<span class="comment"> *  *dst_address. For example if a map starts at 0x40000000 of size 0x100000</span></div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;<span class="comment"> *  the result will be 0x40000 if the address was translated into 0x400C0000.</span></div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;<span class="comment"> *  If dev is on root-bus no translation is performed 0xffffffff is returned.</span></div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;<span class="comment"> *  and src_address is stored in *dst_address.</span></div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;<span class="keyword">extern</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> drvmgr_translate_bus(</div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;    <span class="keyword">struct</span> <a class="code" href="structdrvmgr__bus.html">drvmgr_bus</a> *from,</div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;    <span class="keyword">struct</span> <a class="code" href="structdrvmgr__bus.html">drvmgr_bus</a> *to,</div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;    <span class="keywordtype">int</span> reverse,</div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;    <span class="keywordtype">void</span> *src_address,</div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;    <span class="keywordtype">void</span> **dst_address);</div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;</div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;<span class="comment">/* Calls drvmgr_translate() to translate an address range and checks the result,</span></div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;<span class="comment"> * a printout is generated if the check fails. All parameters are passed on to</span></div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;<span class="comment"> * drvmgr_translate() except for size, see paramters of drvmgr_translate().</span></div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;<span class="comment"> * If size=0 only the starting address is not checked.</span></div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;<span class="comment"> * If mapping failes a non-zero result is returned.</span></div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;<span class="keyword">extern</span> <span class="keywordtype">int</span> drvmgr_translate_check(</div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;    <span class="keyword">struct</span> <a class="code" href="structdrvmgr__dev.html">drvmgr_dev</a> *<a class="code" href="structdrvmgr__drv.html#ac3340a7ceff44d4bd013823fc45338dc">dev</a>,</div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> options,</div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;    <span class="keywordtype">void</span> *src_address,</div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;    <span class="keywordtype">void</span> **dst_address,</div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="sun4u_2tte_8h.html#a245260f6f74972558f61b85227df5aae">size</a>);</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;</div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;<span class="keyword">extern</span> <span class="keywordtype">int</span> drvmgr_func_get(<span class="keywordtype">void</span> *obj, <span class="keywordtype">int</span> funcid, <span class="keywordtype">void</span> **func);</div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;</div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;<span class="keyword">extern</span> <span class="keywordtype">int</span> drvmgr_func_call(<span class="keywordtype">void</span> *obj, <span class="keywordtype">int</span> funcid, <span class="keywordtype">void</span> *a, <span class="keywordtype">void</span> *b, <span class="keywordtype">void</span> *c, <span class="keywordtype">void</span> *d);</div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;</div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;<span class="comment">/* Builds a Function ID.</span></div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;<span class="comment"> * Used to request optional functions by a bus or device driver</span></div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;<span class="preprocessor">#define DRVMGR_FUNCID(major, minor) ((((major) &amp; 0xfff) &lt;&lt; 20) | ((minor) &amp; 0xfffff))</span></div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;<span class="preprocessor">#define DRVMGR_FUNCID_NONE 0</span></div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;<span class="preprocessor">#define DRVMGR_FUNCID_END DRVMGR_FUNCID(DRVMGR_FUNCID_NONE, 0)</span></div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;</div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;<span class="comment">/* Major Function ID. Most significant 12-bits. */</span></div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;<span class="keyword">enum</span> {</div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;    FUNCID_NONE             = 0x000,</div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;    FUNCID_RW               = 0x001, <span class="comment">/* Read/Write functions */</span></div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;};</div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;</div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;<span class="comment">/* Select Sub-Function Read/Write function by ID */</span></div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;<span class="preprocessor">#define RW_SIZE_1   0x00001    </span><span class="comment">/* Access Size */</span><span class="preprocessor"></span></div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;<span class="preprocessor">#define RW_SIZE_2   0x00002</span></div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;<span class="preprocessor">#define RW_SIZE_4   0x00004</span></div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;<span class="preprocessor">#define RW_SIZE_8   0x00008</span></div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;<span class="preprocessor">#define RW_SIZE_ANY 0x00000</span></div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;<span class="preprocessor">#define RW_SIZE(id) ((unsigned int)(id) &amp; 0xf)</span></div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;</div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;<span class="preprocessor">#define RW_DIR_ANY  0x00000   </span><span class="comment">/* Access Direction */</span><span class="preprocessor"></span></div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;<span class="preprocessor">#define RW_READ     0x00000   </span><span class="comment">/* Read */</span><span class="preprocessor"></span></div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;<span class="preprocessor">#define RW_WRITE    0x00010   </span><span class="comment">/* Write */</span><span class="preprocessor"></span></div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;<span class="preprocessor">#define RW_SET      0x00020   </span><span class="comment">/* Write with same value (memset) */</span><span class="preprocessor"></span></div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;<span class="preprocessor">#define RW_DIR(id)  (((unsigned int)(id) &gt;&gt; 4) &amp; 0x3)</span></div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;</div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;<span class="preprocessor">#define RW_RAW      0x00000  </span><span class="comment">/* Raw access - no swapping (machine default) */</span><span class="preprocessor"></span></div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;<span class="preprocessor">#define RW_LITTLE   0x00040  </span><span class="comment">/* Little Endian */</span><span class="preprocessor"></span></div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;<span class="preprocessor">#define RW_BIG      0x00080  </span><span class="comment">/* Big Endian */</span><span class="preprocessor"></span></div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;<span class="preprocessor">#define RW_ENDIAN(id) (((unsigned int)(id) &gt;&gt; 6) &amp; 0x3)</span></div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;</div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;<span class="preprocessor">#define RW_TYPE_ANY 0x00000  </span><span class="comment">/* Access type */</span><span class="preprocessor"></span></div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;<span class="preprocessor">#define RW_REG      0x00100</span></div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;<span class="preprocessor">#define RW_MEM      0x00200</span></div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;<span class="preprocessor">#define RW_MEMREG   0x00300</span></div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;<span class="preprocessor">#define RW_CFG      0x00400</span></div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;<span class="preprocessor">#define RW_TYPE(id) (((unsigned int)(id) &gt;&gt; 8) &amp; 0xf)</span></div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;</div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;<span class="preprocessor">#define RW_ARG      0x01000 </span><span class="comment">/* Optional Argument */</span><span class="preprocessor"></span></div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;<span class="preprocessor">#define RW_ERR      0x02000 </span><span class="comment">/* Optional Error Handler */</span><span class="preprocessor"></span></div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;</div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;<span class="comment">/* Build a Read/Write function ID */</span></div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;<span class="preprocessor">#define DRVMGR_RWFUNC(minor) DRVMGR_FUNCID(FUNCID_RW, minor)</span></div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;</div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;<span class="comment">/* Argument to Read/Write functions, the &quot;void *arg&quot; pointer is returned by</span></div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;<span class="comment"> * RW_ARG. If NULL is returned no argument is needed.</span></div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00827"></a><span class="lineno"><a class="line" href="structdrvmgr__rw__arg.html">  827</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structdrvmgr__rw__arg.html">drvmgr_rw_arg</a> {</div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;    <span class="keywordtype">void</span> *arg;</div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;    <span class="keyword">struct </span><a class="code" href="structdrvmgr__dev.html">drvmgr_dev</a> *dev;</div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;};</div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;</div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;<span class="comment">/* Standard Read/Write function types */</span></div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;<span class="keyword">typedef</span> uint8_t (*drvmgr_r8)(uint8_t *srcadr);</div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;<span class="keyword">typedef</span> uint16_t (*drvmgr_r16)(uint16_t *srcadr);</div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;<span class="keyword">typedef</span> uint32_t (*drvmgr_r32)(uint32_t *srcadr);</div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;<span class="keyword">typedef</span> uint64_t (*drvmgr_r64)(uint64_t *srcadr);</div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;<span class="keyword">typedef</span> void (*drvmgr_w8)(uint8_t *dstadr, uint8_t data);</div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;<span class="keyword">typedef</span> void (*drvmgr_w16)(uint16_t *dstadr, uint16_t data);</div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;<span class="keyword">typedef</span> void (*drvmgr_w32)(uint32_t *dstadr, uint32_t data);</div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;<span class="keyword">typedef</span> void (*drvmgr_w64)(uint64_t *dstadr, uint64_t data);</div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;<span class="comment">/* READ/COPY a memory area located on bus into CPU memory.</span></div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;<span class="comment"> * From &#39;src&#39; (remote) to the destination &#39;dest&#39; (local), n=number of bytes</span></div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;<span class="keyword">typedef</span> int (*drvmgr_rmem)(<span class="keywordtype">void</span> *dest, <span class="keyword">const</span> <span class="keywordtype">void</span> *src, <span class="keywordtype">int</span> n);</div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;<span class="comment">/* WRITE/COPY a user buffer located in CPU memory to a location on the bus.</span></div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;<span class="comment"> * From &#39;src&#39; (local) to the destination &#39;dest&#39; (remote), n=number of bytes</span></div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;<span class="keyword">typedef</span> int (*drvmgr_wmem)(<span class="keywordtype">void</span> *dest, <span class="keyword">const</span> <span class="keywordtype">void</span> *src, <span class="keywordtype">int</span> n);</div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;<span class="comment">/* Set a memory area to the byte value given in c, see LIBC memset(). Memset is</span></div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;<span class="comment"> * implemented by calling wmem() multiple times with a &quot;large&quot; buffer.</span></div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;<span class="keyword">typedef</span> int (*drvmgr_memset)(<span class="keywordtype">void</span> *dstadr, <span class="keywordtype">int</span> c, <span class="keywordtype">size_t</span> n);</div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;</div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;<span class="comment">/* Read/Write function types with additional argument */</span></div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;<span class="keyword">typedef</span> uint8_t (*drvmgr_r8_arg)(uint8_t *srcadr, <span class="keywordtype">void</span> *a);</div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;<span class="keyword">typedef</span> uint16_t (*drvmgr_r16_arg)(uint16_t *srcadr, <span class="keywordtype">void</span> *a);</div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;<span class="keyword">typedef</span> uint32_t (*drvmgr_r32_arg)(uint32_t *srcadr, <span class="keywordtype">void</span> *a);</div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;<span class="keyword">typedef</span> uint64_t (*drvmgr_r64_arg)(uint64_t *srcadr, <span class="keywordtype">void</span> *a);</div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;<span class="keyword">typedef</span> void (*drvmgr_w8_arg)(uint8_t *dstadr, uint8_t data, <span class="keywordtype">void</span> *a);</div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;<span class="keyword">typedef</span> void (*drvmgr_w16_arg)(uint16_t *dstadr, uint16_t data, <span class="keywordtype">void</span> *a);</div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;<span class="keyword">typedef</span> void (*drvmgr_w32_arg)(uint32_t *dstadr, uint32_t data, <span class="keywordtype">void</span> *a);</div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;<span class="keyword">typedef</span> void (*drvmgr_w64_arg)(uint64_t *dstadr, uint64_t data, <span class="keywordtype">void</span> *a);</div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;<span class="keyword">typedef</span> int (*drvmgr_rmem_arg)(<span class="keywordtype">void</span> *dest, <span class="keyword">const</span> <span class="keywordtype">void</span> *src, <span class="keywordtype">int</span> n, <span class="keywordtype">void</span> *a);</div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;<span class="keyword">typedef</span> int (*drvmgr_wmem_arg)(<span class="keywordtype">void</span> *dest, <span class="keyword">const</span> <span class="keywordtype">void</span> *src, <span class="keywordtype">int</span> n, <span class="keywordtype">void</span> *a);</div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;<span class="keyword">typedef</span> int (*drvmgr_memset_arg)(<span class="keywordtype">void</span> *dstadr, <span class="keywordtype">int</span> c, <span class="keywordtype">size_t</span> n, <span class="keywordtype">void</span> *a);</div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;</div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;<span class="comment">/* Report an error to the parent bus of the device */</span></div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;<span class="keyword">typedef</span> void (*drvmgr_rw_err)(<span class="keyword">struct </span><a class="code" href="structdrvmgr__rw__arg.html">drvmgr_rw_arg</a> *a, <span class="keyword">struct </span><a class="code" href="structdrvmgr__bus.html">drvmgr_bus</a> *bus,</div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;                <span class="keywordtype">int</span> funcid, <span class="keywordtype">void</span> *adr);</div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;</div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;<span class="comment">/* Helper function for buses that implement the memset() over wmem() */</span></div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;<span class="keyword">extern</span> <span class="keywordtype">void</span> drvmgr_rw_memset(</div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;    <span class="keywordtype">void</span> *dstadr,</div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;    <span class="keywordtype">int</span> c,</div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;    <span class="keywordtype">size_t</span> n,</div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;    <span class="keywordtype">void</span> *a,</div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;    drvmgr_wmem_arg wmem</div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;    );</div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;</div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;<span class="comment">/*** PRINT INFORMATION ABOUT DRIVER MANAGER ***/</span></div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;</div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;<span class="keyword">extern</span> <span class="keywordtype">int</span> drvmgr_for_each_listdev(</div><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;    <span class="keyword">struct</span> <a class="code" href="structdrvmgr__list.html">drvmgr_list</a> *devlist,</div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> state_set_mask,</div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> state_clr_mask,</div><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;    <span class="keywordtype">int</span> (*func)(<span class="keyword">struct</span> <a class="code" href="structdrvmgr__dev.html">drvmgr_dev</a> *<a class="code" href="structdrvmgr__bus.html#a6352e29d34c91a1ad459afe30b1e812b">dev</a>, <span class="keywordtype">void</span> *arg),</div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;    <span class="keywordtype">void</span> *arg);</div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;</div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;<span class="comment">/* Print all devices */</span></div><div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;<span class="preprocessor">#define PRINT_DEVS_FAILED   0x01    </span><span class="comment">/* Failed during initialization */</span><span class="preprocessor"></span></div><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;<span class="preprocessor">#define PRINT_DEVS_ASSIGNED 0x02    </span><span class="comment">/* Driver assigned */</span><span class="preprocessor"></span></div><div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;<span class="preprocessor">#define PRINT_DEVS_UNASSIGNED   0x04    </span><span class="comment">/* Driver not assigned */</span><span class="preprocessor"></span></div><div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;<span class="preprocessor">#define PRINT_DEVS_IGNORED  0x08    </span><span class="comment">/* Device ignored on user&#39;s request */</span><span class="preprocessor"></span></div><div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;<span class="preprocessor">#define PRINT_DEVS_ALL      (PRINT_DEVS_FAILED | \</span></div><div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;<span class="preprocessor">                PRINT_DEVS_ASSIGNED | \</span></div><div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;<span class="preprocessor">                PRINT_DEVS_UNASSIGNED |\</span></div><div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;<span class="preprocessor">                PRINT_DEVS_IGNORED)</span></div><div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;</div><div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;<span class="keyword">extern</span> <span class="keywordtype">void</span> drvmgr_summary(<span class="keywordtype">void</span>);</div><div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;</div><div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;<span class="keyword">extern</span> <span class="keywordtype">void</span> drvmgr_print_devs(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> options);</div><div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;</div><div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;<span class="keyword">extern</span> <span class="keywordtype">void</span> drvmgr_print_topo(<span class="keywordtype">void</span>);</div><div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;</div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;<span class="keyword">extern</span> <span class="keywordtype">void</span> drvmgr_print_mem(<span class="keywordtype">void</span>);</div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;</div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;<span class="preprocessor">#define OPTION_DEV_GENINFO   0x00000001</span></div><div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;<span class="preprocessor">#define OPTION_DEV_BUSINFO   0x00000002</span></div><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;<span class="preprocessor">#define OPTION_DEV_DRVINFO   0x00000004</span></div><div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;<span class="preprocessor">#define OPTION_DRV_DEVS      0x00000100</span></div><div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;<span class="preprocessor">#define OPTION_BUS_DEVS      0x00010000</span></div><div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;<span class="preprocessor">#define OPTION_RECURSIVE     0x01000000</span></div><div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;<span class="preprocessor">#define OPTION_INFO_ALL      0xffffffff</span></div><div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;</div><div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;<span class="keyword">extern</span> <span class="keywordtype">void</span> drvmgr_info(<span class="keywordtype">void</span> *<span class="keywordtype">id</span>, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> options);</div><div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;</div><div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;<span class="keyword">extern</span> <span class="keywordtype">void</span> drvmgr_info_dev(<span class="keyword">struct</span> <a class="code" href="structdrvmgr__dev.html">drvmgr_dev</a> *<a class="code" href="structdrvmgr__bus.html#a6352e29d34c91a1ad459afe30b1e812b">dev</a>, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> options);</div><div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;</div><div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;<span class="keyword">extern</span> <span class="keywordtype">void</span> drvmgr_info_bus(<span class="keyword">struct</span> <a class="code" href="structdrvmgr__bus.html">drvmgr_bus</a> *bus, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> options);</div><div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;</div><div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;<span class="keyword">extern</span> <span class="keywordtype">void</span> drvmgr_info_drv(<span class="keyword">struct</span> <a class="code" href="structdrvmgr__drv.html">drvmgr_drv</a> *drv, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> options);</div><div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;</div><div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;<span class="keyword">extern</span> <span class="keywordtype">void</span> drvmgr_info_devs_on_bus(<span class="keyword">struct</span> <a class="code" href="structdrvmgr__bus.html">drvmgr_bus</a> *bus, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> options);</div><div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;</div><div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;<span class="keyword">extern</span> <span class="keywordtype">void</span> drvmgr_info_devs(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> options);</div><div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;</div><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;<span class="keyword">extern</span> <span class="keywordtype">void</span> drvmgr_info_drvs(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> options);</div><div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;</div><div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;<span class="keyword">extern</span> <span class="keywordtype">void</span> drvmgr_info_buses(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> options);</div><div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;</div><div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;<span class="keyword">extern</span> <span class="keyword">struct </span><a class="code" href="structdrvmgr__drv.html">drvmgr_drv</a> *drvmgr_drv_by_id(uint64_t <span class="keywordtype">id</span>);</div><div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;</div><div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;<span class="keyword">extern</span> <span class="keyword">struct </span><a class="code" href="structdrvmgr__drv.html">drvmgr_drv</a> *drvmgr_drv_by_name(<span class="keyword">const</span> <span class="keywordtype">char</span> *name);</div><div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;</div><div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;<span class="keyword">extern</span> <span class="keyword">struct </span><a class="code" href="structdrvmgr__dev.html">drvmgr_dev</a> *drvmgr_dev_by_name(<span class="keyword">const</span> <span class="keywordtype">char</span> *name);</div><div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;</div><div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;<span class="preprocessor">#ifdef __cplusplus</span></div><div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;}</div><div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;</div><div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;<span class="preprocessor">#endif</span></div><div class="ttc" id="structdrvmgr__drv_html_a6d7671f3f2f42f4536cf1acbd0650405"><div class="ttname"><a href="structdrvmgr__drv.html#a6d7671f3f2f42f4536cf1acbd0650405">drvmgr_drv::ops</a></div><div class="ttdeci">struct drvmgr_drv_ops * ops</div><div class="ttdef"><b>Definition:</b> drvmgr.h:313</div></div>
<div class="ttc" id="structdrvmgr__map__entry_html_a6e86bd0c574cd6f7ef1046a4864caccd"><div class="ttname"><a href="structdrvmgr__map__entry.html#a6e86bd0c574cd6f7ef1046a4864caccd">drvmgr_map_entry::size</a></div><div class="ttdeci">unsigned int size</div><div class="ttdef"><b>Definition:</b> drvmgr.h:227</div></div>
<div class="ttc" id="structdrvmgr__dev_html_a8f6d9336c942725b6ab463b3a95b75ea"><div class="ttname"><a href="structdrvmgr__dev.html#a8f6d9336c942725b6ab463b3a95b75ea">drvmgr_dev::parent</a></div><div class="ttdeci">struct drvmgr_bus * parent</div><div class="ttdef"><b>Definition:</b> drvmgr.h:282</div></div>
<div class="ttc" id="structdrvmgr__drv_html_ad7bea4ea7a3a8587b64b82e9b7c9171f"><div class="ttname"><a href="structdrvmgr__drv.html#ad7bea4ea7a3a8587b64b82e9b7c9171f">drvmgr_drv::drv_id</a></div><div class="ttdeci">uint64_t drv_id</div><div class="ttdef"><b>Definition:</b> drvmgr.h:310</div></div>
<div class="ttc" id="structdrvmgr__bus_html_a75c599005800b34c8743d784b63543d9"><div class="ttname"><a href="structdrvmgr__bus.html#a75c599005800b34c8743d784b63543d9">drvmgr_bus::reslist</a></div><div class="ttdeci">struct drvmgr_bus_res * reslist</div><div class="ttdef"><b>Definition:</b> drvmgr.h:248</div></div>
<div class="ttc" id="structdrvmgr__bus__ops_html_ac1aaf0f0581f7e816844a8eb622f54f8"><div class="ttname"><a href="structdrvmgr__bus__ops.html#ac1aaf0f0581f7e816844a8eb622f54f8">drvmgr_bus_ops::unite</a></div><div class="ttdeci">int(* unite)(struct drvmgr_drv *, struct drvmgr_dev *)</div><div class="ttdef"><b>Definition:</b> drvmgr.h:133</div></div>
<div class="ttc" id="structdrvmgr__func_html"><div class="ttname"><a href="structdrvmgr__func.html">drvmgr_func</a></div><div class="ttdef"><b>Definition:</b> drvmgr.h:158</div></div>
<div class="ttc" id="structdrvmgr__bus_html"><div class="ttname"><a href="structdrvmgr__bus.html">drvmgr_bus</a></div><div class="ttdef"><b>Definition:</b> drvmgr.h:237</div></div>
<div class="ttc" id="structdrvmgr__bus__ops_html"><div class="ttname"><a href="structdrvmgr__bus__ops.html">drvmgr_bus_ops</a></div><div class="ttdef"><b>Definition:</b> drvmgr.h:129</div></div>
<div class="ttc" id="structdrvmgr__drv_html_a5544e016abaca51a2baaa32406d13528"><div class="ttname"><a href="structdrvmgr__drv.html#a5544e016abaca51a2baaa32406d13528">drvmgr_drv::next</a></div><div class="ttdeci">struct drvmgr_drv * next</div><div class="ttdef"><b>Definition:</b> drvmgr.h:307</div></div>
<div class="ttc" id="structdrvmgr__bus_html_adf36f8ff74f0a0dc8bed44aab4812497"><div class="ttname"><a href="structdrvmgr__bus.html#adf36f8ff74f0a0dc8bed44aab4812497">drvmgr_bus::children</a></div><div class="ttdeci">struct drvmgr_dev * children</div><div class="ttdef"><b>Definition:</b> drvmgr.h:244</div></div>
<div class="ttc" id="structdrvmgr__drv__res_html_a55ee0835a6a4b9e8f9719f3c6c0387b7"><div class="ttname"><a href="structdrvmgr__drv__res.html#a55ee0835a6a4b9e8f9719f3c6c0387b7">drvmgr_drv_res::minor_bus</a></div><div class="ttdeci">int minor_bus</div><div class="ttdef"><b>Definition:</b> drvmgr.h:209</div></div>
<div class="ttc" id="structdrvmgr__bus__res_html_a1b80e82d17e823de898c086be7266523"><div class="ttname"><a href="structdrvmgr__bus__res.html#a1b80e82d17e823de898c086be7266523">drvmgr_bus_res::resource</a></div><div class="ttdeci">struct drvmgr_drv_res resource[]</div><div class="ttdef"><b>Definition:</b> drvmgr.h:216</div></div>
<div class="ttc" id="structdrvmgr__bus_html_a1d32bbcc0a03fd1bdce9902125b1fec3"><div class="ttname"><a href="structdrvmgr__bus.html#a1d32bbcc0a03fd1bdce9902125b1fec3">drvmgr_bus::state</a></div><div class="ttdeci">int state</div><div class="ttdef"><b>Definition:</b> drvmgr.h:254</div></div>
<div class="ttc" id="structdrvmgr__bus_html_ad7ac15a0b977823ec8fe6b144f232724"><div class="ttname"><a href="structdrvmgr__bus.html#ad7ac15a0b977823ec8fe6b144f232724">drvmgr_bus::bus_type</a></div><div class="ttdeci">unsigned char bus_type</div><div class="ttdef"><b>Definition:</b> drvmgr.h:239</div></div>
<div class="ttc" id="structdrvmgr__bus_html_a992594c81fca463bb9b84f67979e8a9f"><div class="ttname"><a href="structdrvmgr__bus.html#a992594c81fca463bb9b84f67979e8a9f">drvmgr_bus::ops</a></div><div class="ttdeci">struct drvmgr_bus_ops * ops</div><div class="ttdef"><b>Definition:</b> drvmgr.h:245</div></div>
<div class="ttc" id="structdrvmgr__dev_html_a07923db7c70d3287d70849ba1b16acb2"><div class="ttname"><a href="structdrvmgr__dev.html#a07923db7c70d3287d70849ba1b16acb2">drvmgr_dev::bus</a></div><div class="ttdeci">struct drvmgr_bus * bus</div><div class="ttdef"><b>Definition:</b> drvmgr.h:288</div></div>
<div class="ttc" id="structdrvmgr__bus_html_aa8a21e55bfae1ccaec41f20809d0f68d"><div class="ttname"><a href="structdrvmgr__bus.html#aa8a21e55bfae1ccaec41f20809d0f68d">drvmgr_bus::maps_up</a></div><div class="ttdeci">struct drvmgr_map_entry * maps_up</div><div class="ttdef"><b>Definition:</b> drvmgr.h:249</div></div>
<div class="ttc" id="structdrvmgr__bus_html_a3e61e0a6e6b1fc336e34710482b1f38e"><div class="ttname"><a href="structdrvmgr__bus.html#a3e61e0a6e6b1fc336e34710482b1f38e">drvmgr_bus::priv</a></div><div class="ttdeci">void * priv</div><div class="ttdef"><b>Definition:</b> drvmgr.h:243</div></div>
<div class="ttc" id="structdrvmgr__key_html"><div class="ttname"><a href="structdrvmgr__key.html">drvmgr_key</a></div><div class="ttdef"><b>Definition:</b> drvmgr.h:198</div></div>
<div class="ttc" id="sun4u_2tte_8h_html_a27952ffc298d15b4fc0e7ee6b2a044ac"><div class="ttname"><a href="sun4u_2tte_8h.html#a27952ffc298d15b4fc0e7ee6b2a044ac">p</a></div><div class="ttdeci">unsigned p</div><div class="ttdef"><b>Definition:</b> tte.h:90</div></div>
<div class="ttc" id="uniondrvmgr__key__value_html_a57c138322a3ff8824f70c1973c3561e9"><div class="ttname"><a href="uniondrvmgr__key__value.html#a57c138322a3ff8824f70c1973c3561e9">drvmgr_key_value::str</a></div><div class="ttdeci">char * str</div><div class="ttdef"><b>Definition:</b> drvmgr.h:193</div></div>
<div class="ttc" id="structdrvmgr__drv_html_ae555ca5e714134cbf25cfb7a6346ed8c"><div class="ttname"><a href="structdrvmgr__drv.html#ae555ca5e714134cbf25cfb7a6346ed8c">drvmgr_drv::bus_type</a></div><div class="ttdeci">int bus_type</div><div class="ttdef"><b>Definition:</b> drvmgr.h:312</div></div>
<div class="ttc" id="structdrvmgr__drv_html_a88e8e7dc6c20831cb09ad4ad8caf5151"><div class="ttname"><a href="structdrvmgr__drv.html#a88e8e7dc6c20831cb09ad4ad8caf5151">drvmgr_drv::funcs</a></div><div class="ttdeci">struct drvmgr_func * funcs</div><div class="ttdef"><b>Definition:</b> drvmgr.h:314</div></div>
<div class="ttc" id="structdrvmgr__bus__res_html"><div class="ttname"><a href="structdrvmgr__bus__res.html">drvmgr_bus_res</a></div><div class="ttdef"><b>Definition:</b> drvmgr.h:214</div></div>
<div class="ttc" id="structdrvmgr__map__entry_html"><div class="ttname"><a href="structdrvmgr__map__entry.html">drvmgr_map_entry</a></div><div class="ttdef"><b>Definition:</b> drvmgr.h:225</div></div>
<div class="ttc" id="structdrvmgr__bus__ops_html_a08024cc67a568af88a3360de629e656e"><div class="ttname"><a href="structdrvmgr__bus__ops.html#a08024cc67a568af88a3360de629e656e">drvmgr_bus_ops::get_info_dev</a></div><div class="ttdeci">void(* get_info_dev)(struct drvmgr_dev *, void(*print)(void *p, char *str), void *p)</div><div class="ttdef"><b>Definition:</b> drvmgr.h:153</div></div>
<div class="ttc" id="structdrvmgr__map__entry_html_adbeca87a3a7df8d429d4c0110921953f"><div class="ttname"><a href="structdrvmgr__map__entry.html#adbeca87a3a7df8d429d4c0110921953f">drvmgr_map_entry::from_adr</a></div><div class="ttdeci">char * from_adr</div><div class="ttdef"><b>Definition:</b> drvmgr.h:228</div></div>
<div class="ttc" id="structdrvmgr__drv__ops_html_a4b094f61f1613f2dc49b8ee2753a058e"><div class="ttname"><a href="structdrvmgr__drv__ops.html#a4b094f61f1613f2dc49b8ee2753a058e">drvmgr_drv_ops::info</a></div><div class="ttdeci">int(* info)(struct drvmgr_dev *, void(*print)(void *p, char *str), void *p, int, char *argv[])</div><div class="ttdef"><b>Definition:</b> drvmgr.h:300</div></div>
<div class="ttc" id="structdrvmgr__dev_html_a6dde549cda61d3c8ef3f0107328cf14b"><div class="ttname"><a href="structdrvmgr__dev.html#a6dde549cda61d3c8ef3f0107328cf14b">drvmgr_dev::next_in_bus</a></div><div class="ttdeci">struct drvmgr_dev * next_in_bus</div><div class="ttdef"><b>Definition:</b> drvmgr.h:278</div></div>
<div class="ttc" id="structdrvmgr__dev_html_a6cf0b5c5f009ba47cf18fa567eb9218d"><div class="ttname"><a href="structdrvmgr__dev.html#a6cf0b5c5f009ba47cf18fa567eb9218d">drvmgr_dev::state</a></div><div class="ttdeci">unsigned int state</div><div class="ttdef"><b>Definition:</b> drvmgr.h:291</div></div>
<div class="ttc" id="structdrvmgr__dev_html"><div class="ttname"><a href="structdrvmgr__dev.html">drvmgr_dev</a></div><div class="ttdef"><b>Definition:</b> drvmgr.h:275</div></div>
<div class="ttc" id="structdrvmgr__bus_html_a6352e29d34c91a1ad459afe30b1e812b"><div class="ttname"><a href="structdrvmgr__bus.html#a6352e29d34c91a1ad459afe30b1e812b">drvmgr_bus::dev</a></div><div class="ttdeci">struct drvmgr_dev * dev</div><div class="ttdef"><b>Definition:</b> drvmgr.h:242</div></div>
<div class="ttc" id="uniondrvmgr__key__value_html_ad628f568bfa4e441eb5819b1c824c099"><div class="ttname"><a href="uniondrvmgr__key__value.html#ad628f568bfa4e441eb5819b1c824c099">drvmgr_key_value::ptr</a></div><div class="ttdeci">void * ptr</div><div class="ttdef"><b>Definition:</b> drvmgr.h:194</div></div>
<div class="ttc" id="uniondrvmgr__key__value_html"><div class="ttname"><a href="uniondrvmgr__key__value.html">drvmgr_key_value</a></div><div class="ttdef"><b>Definition:</b> drvmgr.h:191</div></div>
<div class="ttc" id="structdrvmgr__dev_html_a3a9293f08d07aff4edaec9cebd2f7daa"><div class="ttname"><a href="structdrvmgr__dev.html#a3a9293f08d07aff4edaec9cebd2f7daa">drvmgr_dev::next</a></div><div class="ttdeci">struct drvmgr_dev * next</div><div class="ttdef"><b>Definition:</b> drvmgr.h:277</div></div>
<div class="ttc" id="structdrvmgr__dev_html_aa0f5e36183d83d612809d360fae88a5e"><div class="ttname"><a href="structdrvmgr__dev.html#aa0f5e36183d83d612809d360fae88a5e">drvmgr_dev::obj_type</a></div><div class="ttdeci">int obj_type</div><div class="ttdef"><b>Definition:</b> drvmgr.h:276</div></div>
<div class="ttc" id="structdrvmgr__bus_html_a55f02fb830efad84b593618f042ca702"><div class="ttname"><a href="structdrvmgr__bus.html#a55f02fb830efad84b593618f042ca702">drvmgr_bus::maps_down</a></div><div class="ttdeci">struct drvmgr_map_entry * maps_down</div><div class="ttdef"><b>Definition:</b> drvmgr.h:250</div></div>
<div class="ttc" id="structdrvmgr__bus_html_a09cf5ec1ab115e27fa8a6e6b63323cc0"><div class="ttname"><a href="structdrvmgr__bus.html#a09cf5ec1ab115e27fa8a6e6b63323cc0">drvmgr_bus::funcs</a></div><div class="ttdeci">struct drvmgr_func * funcs</div><div class="ttdef"><b>Definition:</b> drvmgr.h:246</div></div>
<div class="ttc" id="structdrvmgr__bus_html_a91de472d59f5d1418b638cb256d4c5e5"><div class="ttname"><a href="structdrvmgr__bus.html#a91de472d59f5d1418b638cb256d4c5e5">drvmgr_bus::dev_cnt</a></div><div class="ttdeci">int dev_cnt</div><div class="ttdef"><b>Definition:</b> drvmgr.h:247</div></div>
<div class="ttc" id="structdrvmgr__rw__arg_html"><div class="ttname"><a href="structdrvmgr__rw__arg.html">drvmgr_rw_arg</a></div><div class="ttdef"><b>Definition:</b> drvmgr.h:827</div></div>
<div class="ttc" id="structdrvmgr__map__entry_html_ab2f1dd43f429f44321b1671b23138f14"><div class="ttname"><a href="structdrvmgr__map__entry.html#ab2f1dd43f429f44321b1671b23138f14">drvmgr_map_entry::name</a></div><div class="ttdeci">char * name</div><div class="ttdef"><b>Definition:</b> drvmgr.h:226</div></div>
<div class="ttc" id="structdrvmgr__drv_html_a3f6e66aed68f0b6b8ad484ed524da08a"><div class="ttname"><a href="structdrvmgr__drv.html#a3f6e66aed68f0b6b8ad484ed524da08a">drvmgr_drv::name</a></div><div class="ttdeci">char * name</div><div class="ttdef"><b>Definition:</b> drvmgr.h:311</div></div>
<div class="ttc" id="structdrvmgr__drv__res_html_a631c7ca06de7310a13421f42aeb6efea"><div class="ttname"><a href="structdrvmgr__drv__res.html#a631c7ca06de7310a13421f42aeb6efea">drvmgr_drv_res::keys</a></div><div class="ttdeci">struct drvmgr_key * keys</div><div class="ttdef"><b>Definition:</b> drvmgr.h:210</div></div>
<div class="ttc" id="structdrvmgr__dev_html_a8d0b0a55a355d8d5c20b3eafe5f7a450"><div class="ttname"><a href="structdrvmgr__dev.html#a8d0b0a55a355d8d5c20b3eafe5f7a450">drvmgr_dev::next_in_drv</a></div><div class="ttdeci">struct drvmgr_dev * next_in_drv</div><div class="ttdef"><b>Definition:</b> drvmgr.h:279</div></div>
<div class="ttc" id="structdrvmgr__bus__params_html_ac57187503d68435f7601875716b9f1d5"><div class="ttname"><a href="structdrvmgr__bus__params.html#ac57187503d68435f7601875716b9f1d5">drvmgr_bus_params::dev_prefix</a></div><div class="ttdeci">char * dev_prefix</div><div class="ttdef"><b>Definition:</b> drvmgr.h:122</div></div>
<div class="ttc" id="rtems_8h_html"><div class="ttname"><a href="rtems_8h.html">rtems.h</a></div></div>
<div class="ttc" id="structdrvmgr__dev_html_aa3e438d71e595a06f73d39b58cb78828"><div class="ttname"><a href="structdrvmgr__dev.html#aa3e438d71e595a06f73d39b58cb78828">drvmgr_dev::error</a></div><div class="ttdeci">int error</div><div class="ttdef"><b>Definition:</b> drvmgr.h:293</div></div>
<div class="ttc" id="structdrvmgr__drv__ops_html_afa653aa2b8ab4a45b08d7c7a14aa1151"><div class="ttname"><a href="structdrvmgr__drv__ops.html#afa653aa2b8ab4a45b08d7c7a14aa1151">drvmgr_drv_ops::remove</a></div><div class="ttdeci">int(* remove)(struct drvmgr_dev *)</div><div class="ttdef"><b>Definition:</b> drvmgr.h:299</div></div>
<div class="ttc" id="structdrvmgr__drv_html_a5ea883c06b15c9191d0e7a030ee2b4ce"><div class="ttname"><a href="structdrvmgr__drv.html#a5ea883c06b15c9191d0e7a030ee2b4ce">drvmgr_drv::dev_cnt</a></div><div class="ttdeci">unsigned int dev_cnt</div><div class="ttdef"><b>Definition:</b> drvmgr.h:315</div></div>
<div class="ttc" id="structdrvmgr__dev_html_acdae19c81d1111a8dc952501c9519254"><div class="ttname"><a href="structdrvmgr__dev.html#acdae19c81d1111a8dc952501c9519254">drvmgr_dev::businfo</a></div><div class="ttdeci">void * businfo</div><div class="ttdef"><b>Definition:</b> drvmgr.h:287</div></div>
<div class="ttc" id="structdrvmgr__drv_html_ad6df87e2ef686e0aa0b3bed3f46b2590"><div class="ttname"><a href="structdrvmgr__drv.html#ad6df87e2ef686e0aa0b3bed3f46b2590">drvmgr_drv::obj_type</a></div><div class="ttdeci">int obj_type</div><div class="ttdef"><b>Definition:</b> drvmgr.h:306</div></div>
<div class="ttc" id="structdrvmgr__drv_html_ac3340a7ceff44d4bd013823fc45338dc"><div class="ttname"><a href="structdrvmgr__drv.html#ac3340a7ceff44d4bd013823fc45338dc">drvmgr_drv::dev</a></div><div class="ttdeci">struct drvmgr_dev * dev</div><div class="ttdef"><b>Definition:</b> drvmgr.h:308</div></div>
<div class="ttc" id="structdrvmgr__dev_html_a36ae5e46a2bd69b67288b8ca52cc37dd"><div class="ttname"><a href="structdrvmgr__dev.html#a36ae5e46a2bd69b67288b8ca52cc37dd">drvmgr_dev::level</a></div><div class="ttdeci">int level</div><div class="ttdef"><b>Definition:</b> drvmgr.h:292</div></div>
<div class="ttc" id="structdrvmgr__drv__res_html"><div class="ttname"><a href="structdrvmgr__drv__res.html">drvmgr_drv_res</a></div><div class="ttdef"><b>Definition:</b> drvmgr.h:207</div></div>
<div class="ttc" id="basedefs_8h_html"><div class="ttname"><a href="basedefs_8h.html">basedefs.h</a></div><div class="ttdoc">Basic Definitions.</div></div>
<div class="ttc" id="structdrvmgr__drv__ops_html"><div class="ttname"><a href="structdrvmgr__drv__ops.html">drvmgr_drv_ops</a></div><div class="ttdef"><b>Definition:</b> drvmgr.h:297</div></div>
<div class="ttc" id="uniondrvmgr__key__value_html_a428feafb23a4c4e182f90c5af447ad90"><div class="ttname"><a href="uniondrvmgr__key__value.html#a428feafb23a4c4e182f90c5af447ad90">drvmgr_key_value::i</a></div><div class="ttdeci">unsigned int i</div><div class="ttdef"><b>Definition:</b> drvmgr.h:192</div></div>
<div class="ttc" id="structdrvmgr__dev_html_ad1e8865cac960cfe73cd69c181b6add3"><div class="ttname"><a href="structdrvmgr__dev.html#ad1e8865cac960cfe73cd69c181b6add3">drvmgr_dev::minor_bus</a></div><div class="ttdeci">short minor_bus</div><div class="ttdef"><b>Definition:</b> drvmgr.h:284</div></div>
<div class="ttc" id="structdrvmgr__drv_html"><div class="ttname"><a href="structdrvmgr__drv.html">drvmgr_drv</a></div><div class="ttdef"><b>Definition:</b> drvmgr.h:305</div></div>
<div class="ttc" id="structdrvmgr__dev_html_a7d51e50ee5b48b67b0793de368eb8751"><div class="ttname"><a href="structdrvmgr__dev.html#a7d51e50ee5b48b67b0793de368eb8751">drvmgr_dev::priv</a></div><div class="ttdeci">void * priv</div><div class="ttdef"><b>Definition:</b> drvmgr.h:286</div></div>
<div class="ttc" id="structdrvmgr__bus_html_aac06ed42936fd2af9086e200fa2ec86d"><div class="ttname"><a href="structdrvmgr__bus.html#aac06ed42936fd2af9086e200fa2ec86d">drvmgr_bus::level</a></div><div class="ttdeci">int level</div><div class="ttdef"><b>Definition:</b> drvmgr.h:253</div></div>
<div class="ttc" id="structdrvmgr__dev_html_ab3035ae0bfd6ea769c24bda5e5ca24a5"><div class="ttname"><a href="structdrvmgr__dev.html#ab3035ae0bfd6ea769c24bda5e5ca24a5">drvmgr_dev::minor_drv</a></div><div class="ttdeci">short minor_drv</div><div class="ttdef"><b>Definition:</b> drvmgr.h:283</div></div>
<div class="ttc" id="sun4u_2tte_8h_html_a245260f6f74972558f61b85227df5aae"><div class="ttname"><a href="sun4u_2tte_8h.html#a245260f6f74972558f61b85227df5aae">size</a></div><div class="ttdeci">unsigned size</div><div class="ttdef"><b>Definition:</b> tte.h:74</div></div>
<div class="ttc" id="structdrvmgr__bus_html_a78774b30ceb29cc8b4aa16a7f2352eb4"><div class="ttname"><a href="structdrvmgr__bus.html#a78774b30ceb29cc8b4aa16a7f2352eb4">drvmgr_bus::depth</a></div><div class="ttdeci">unsigned char depth</div><div class="ttdef"><b>Definition:</b> drvmgr.h:240</div></div>
<div class="ttc" id="structdrvmgr__drv_html_a9a94cfbbae8181703102dc9efb241db9"><div class="ttname"><a href="structdrvmgr__drv.html#a9a94cfbbae8181703102dc9efb241db9">drvmgr_drv::dev_priv_size</a></div><div class="ttdeci">unsigned int dev_priv_size</div><div class="ttdef"><b>Definition:</b> drvmgr.h:316</div></div>
<div class="ttc" id="structdrvmgr__dev_html_a73a4618b4456ddad5a5f31ebb830e657"><div class="ttname"><a href="structdrvmgr__dev.html#a73a4618b4456ddad5a5f31ebb830e657">drvmgr_dev::drv</a></div><div class="ttdeci">struct drvmgr_drv * drv</div><div class="ttdef"><b>Definition:</b> drvmgr.h:281</div></div>
<div class="ttc" id="group__RTEMSScoreBaseDefs_html_gac216239df231d5dbd15e3520b0b9313f"><div class="ttname"><a href="group__RTEMSScoreBaseDefs.html#gac216239df231d5dbd15e3520b0b9313f">RTEMS_INLINE_ROUTINE</a></div><div class="ttdeci">#define RTEMS_INLINE_ROUTINE</div><div class="ttdef"><b>Definition:</b> basedefs.h:66</div></div>
<div class="ttc" id="structdrvmgr__dev_html_a3ca456efcf196648d8c2eefc76f3ee21"><div class="ttname"><a href="structdrvmgr__dev.html#a3ca456efcf196648d8c2eefc76f3ee21">drvmgr_dev::name</a></div><div class="ttdeci">char * name</div><div class="ttdef"><b>Definition:</b> drvmgr.h:285</div></div>
<div class="ttc" id="structdrvmgr__bus_html_a86229ae3082803255914a6e9facaff01"><div class="ttname"><a href="structdrvmgr__bus.html#a86229ae3082803255914a6e9facaff01">drvmgr_bus::next</a></div><div class="ttdeci">struct drvmgr_bus * next</div><div class="ttdef"><b>Definition:</b> drvmgr.h:241</div></div>
<div class="ttc" id="structdrvmgr__bus__params_html"><div class="ttname"><a href="structdrvmgr__bus__params.html">drvmgr_bus_params</a></div><div class="ttdef"><b>Definition:</b> drvmgr.h:121</div></div>
<div class="ttc" id="structdrvmgr__bus__res_html_a92660e37f6211eb2bb24739c8ae99339"><div class="ttname"><a href="structdrvmgr__bus__res.html#a92660e37f6211eb2bb24739c8ae99339">drvmgr_bus_res::next</a></div><div class="ttdeci">struct drvmgr_bus_res * next</div><div class="ttdef"><b>Definition:</b> drvmgr.h:215</div></div>
<div class="ttc" id="structdrvmgr__list_html"><div class="ttname"><a href="structdrvmgr__list.html">drvmgr_list</a></div><div class="ttdef"><b>Definition:</b> drvmgr_list.h:24</div></div>
<div class="ttc" id="smpimpl_8h_html"><div class="ttname"><a href="smpimpl_8h.html">smpimpl.h</a></div><div class="ttdoc">SuperCore SMP Implementation.</div></div>
<div class="ttc" id="structdrvmgr__bus_html_a37a26b8023b60dd1ca46a158a9caa90a"><div class="ttname"><a href="structdrvmgr__bus.html#a37a26b8023b60dd1ca46a158a9caa90a">drvmgr_bus::obj_type</a></div><div class="ttdeci">int obj_type</div><div class="ttdef"><b>Definition:</b> drvmgr.h:238</div></div>
<div class="ttc" id="structdrvmgr__map__entry_html_acd883f6a4d144d58dee3264da6fa9d38"><div class="ttname"><a href="structdrvmgr__map__entry.html#acd883f6a4d144d58dee3264da6fa9d38">drvmgr_map_entry::to_adr</a></div><div class="ttdeci">char * to_adr</div><div class="ttdef"><b>Definition:</b> drvmgr.h:230</div></div>
<div class="ttc" id="bestcomm__api_8h_html_a872bb74de61c3689ccd5b41873fce42c"><div class="ttname"><a href="bestcomm__api_8h.html#a872bb74de61c3689ccd5b41873fce42c">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdoc">Requests a GPIO pin group configuration.</div><div class="ttdef"><b>Definition:</b> bestcomm_api.h:77</div></div>
<div class="ttc" id="structdrvmgr__drv__res_html_aafcfa881872340b0f64d2796dba4dc33"><div class="ttname"><a href="structdrvmgr__drv__res.html#aafcfa881872340b0f64d2796dba4dc33">drvmgr_drv_res::drv_id</a></div><div class="ttdeci">uint64_t drv_id</div><div class="ttdef"><b>Definition:</b> drvmgr.h:208</div></div>
<div class="ttc" id="structdrvmgr__bus_html_a0c3cf01c0652fa8e31512571114a0863"><div class="ttname"><a href="structdrvmgr__bus.html#a0c3cf01c0652fa8e31512571114a0863">drvmgr_bus::error</a></div><div class="ttdeci">int error</div><div class="ttdef"><b>Definition:</b> drvmgr.h:255</div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.15
</small></address>
</body>
</html>
