<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>RTEMS: cpukit/include/rtems/rfs/rtems-rfs-block.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="rtemslogo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">RTEMS
   &#160;<span id="projectnumber">5.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_cd198e36225ba3f41de97552050ac017.html">cpukit</a></li><li class="navelem"><a class="el" href="dir_4f6a7e6de63bf7faab77653961b179a0.html">include</a></li><li class="navelem"><a class="el" href="dir_be382d098cd1aaaaf11a7ebea3d850c0.html">rtems</a></li><li class="navelem"><a class="el" href="dir_b9d5d64de603ae100d445b1c1fa7382d.html">rfs</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">rtems-rfs-block.h File Reference<div class="ingroups"><a class="el" href="group__LibIO.html">IO Library</a> &raquo; <a class="el" href="group__FileSystemTypesAndMount.html">File System Types and Mount</a> &raquo; <a class="el" href="group__rtems__rfs.html">RTEMS File System Group Management</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>RTEMS File Systems Block Management.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;<a class="el" href="rtems-rfs-block-pos_8h_source.html">rtems/rfs/rtems-rfs-block-pos.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="rtems-rfs-buffer_8h_source.html">rtems/rfs/rtems-rfs-buffer.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="rtems-rfs-data_8h_source.html">rtems/rfs/rtems-rfs-data.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="rtems-rfs-file-system_8h_source.html">rtems/rfs/rtems-rfs-file-system.h</a>&gt;</code><br />
</div>
<p><a href="rtems-rfs-block_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structrtems__rfs__block__map__s.html">rtems_rfs_block_map_s</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a1fae6583887a6e10a9fc10466aec4871"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rtems-rfs-block_8h.html#a1fae6583887a6e10a9fc10466aec4871">rtems_rfs_block_get_number</a>(_h,  _b)</td></tr>
<tr class="separator:a1fae6583887a6e10a9fc10466aec4871"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3106dad1324083f22f43e9f76a9e3c64"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rtems-rfs-block_8h.html#a3106dad1324083f22f43e9f76a9e3c64">rtems_rfs_block_set_number</a>(_h,  _b,  _n)</td></tr>
<tr class="separator:a3106dad1324083f22f43e9f76a9e3c64"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a549d6991e0ac178c6dd0df88778103ad"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rtems-rfs-block_8h.html#a549d6991e0ac178c6dd0df88778103ad">rtems_rfs_block_map_is_dirty</a>(_m)&#160;&#160;&#160;((_m)-&gt;dirty)</td></tr>
<tr class="separator:a549d6991e0ac178c6dd0df88778103ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a62eff0ebf3f1245d1b377c01bfc61e3a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rtems-rfs-block_8h.html#a62eff0ebf3f1245d1b377c01bfc61e3a">rtems_rfs_block_map_count</a>(_m)&#160;&#160;&#160;((_m)-&gt;size.count)</td></tr>
<tr class="separator:a62eff0ebf3f1245d1b377c01bfc61e3a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae3b8d48771938228784bb2a5edaff697"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rtems-rfs-block_8h.html#ae3b8d48771938228784bb2a5edaff697">rtems_rfs_block_map_size</a>(_m)&#160;&#160;&#160;(&amp;((_m)-&gt;<a class="el" href="sun4u_2tte_8h.html#a245260f6f74972558f61b85227df5aae">size</a>))</td></tr>
<tr class="separator:ae3b8d48771938228784bb2a5edaff697"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a38a9929ea04e6dd7f761b7bb5013fcb8"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rtems-rfs-block_8h.html#a38a9929ea04e6dd7f761b7bb5013fcb8">rtems_rfs_block_map_size_offset</a>(_m)&#160;&#160;&#160;((_m)-&gt;size.offset)</td></tr>
<tr class="separator:a38a9929ea04e6dd7f761b7bb5013fcb8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa8c216119709425d653004badbdd112f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rtems-rfs-block_8h.html#aa8c216119709425d653004badbdd112f">rtems_rfs_block_map_last</a>(_m)&#160;&#160;&#160;<a class="el" href="rtems-rfs-block-pos_8h.html#af9de1169214c5fbc1d5cbb8265e4b759">rtems_rfs_block_pos_last_block</a> (&amp;(_m)-&gt;bpos, &amp;(_m)-&gt;<a class="el" href="sun4u_2tte_8h.html#a245260f6f74972558f61b85227df5aae">size</a>)</td></tr>
<tr class="separator:aa8c216119709425d653004badbdd112f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae63fea18cd527d6b6c5049d7f36196c4"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rtems-rfs-block_8h.html#ae63fea18cd527d6b6c5049d7f36196c4">rtems_rfs_block_map_past_end</a>(_m,  _p)&#160;&#160;&#160;<a class="el" href="rtems-rfs-block-pos_8h.html#a7c9df0abcb57dfe35e4e18ae63356077">rtems_rfs_block_pos_past_end</a> (_p, &amp;(_m)-&gt;<a class="el" href="sun4u_2tte_8h.html#a245260f6f74972558f61b85227df5aae">size</a>)</td></tr>
<tr class="separator:ae63fea18cd527d6b6c5049d7f36196c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a08acb6d8355c8533a760c9dffa3598fa"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rtems-rfs-block_8h.html#a08acb6d8355c8533a760c9dffa3598fa">rtems_rfs_block_map_pos</a>(_f,  _m)&#160;&#160;&#160;<a class="el" href="rtems-rfs-block_8c.html#a76f70461e9f76aa1f6739a13a8f26735">rtems_rfs_block_get_pos</a> (_f, &amp;(_m)-&gt;bpos)</td></tr>
<tr class="separator:a08acb6d8355c8533a760c9dffa3598fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3b2ba358af43eacc75bab0a43df635b4"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rtems-rfs-block_8h.html#a3b2ba358af43eacc75bab0a43df635b4">rtems_rfs_block_map_block</a>(_m)&#160;&#160;&#160;((_m)-&gt;bpos.bno)</td></tr>
<tr class="separator:a3b2ba358af43eacc75bab0a43df635b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2e08847a8a8a412af576b52464934461"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rtems-rfs-block_8h.html#a2e08847a8a8a412af576b52464934461">rtems_rfs_block_map_block_offset</a>(_m)&#160;&#160;&#160;((_m)-&gt;bpos.boff)</td></tr>
<tr class="separator:a2e08847a8a8a412af576b52464934461"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:af488270acef452a961e888bffdc3a7bf"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structrtems__rfs__block__map__s.html">rtems_rfs_block_map_s</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rtems-rfs-block_8h.html#af488270acef452a961e888bffdc3a7bf">rtems_rfs_block_map</a></td></tr>
<tr class="separator:af488270acef452a961e888bffdc3a7bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a5a09f0d3d9d4e31367c51ceadb7dea31"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rtems-rfs-block_8h.html#a5a09f0d3d9d4e31367c51ceadb7dea31">rtems_rfs_block_map_open</a> (<a class="el" href="struct__rtems__rfs__file__system.html">rtems_rfs_file_system</a> *fs, <a class="el" href="rtems-rfs-inode_8h.html#a91f02dac5a2d91e072d676f3266ab8d2">rtems_rfs_inode_handle</a> *inode, <a class="el" href="rtems-rfs-block_8h.html#af488270acef452a961e888bffdc3a7bf">rtems_rfs_block_map</a> *<a class="el" href="struct__map.html">map</a>)</td></tr>
<tr class="separator:a5a09f0d3d9d4e31367c51ceadb7dea31"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f3eaf881c5744fcfe5798cea33999a7"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rtems-rfs-block_8h.html#a9f3eaf881c5744fcfe5798cea33999a7">rtems_rfs_block_map_close</a> (<a class="el" href="struct__rtems__rfs__file__system.html">rtems_rfs_file_system</a> *fs, <a class="el" href="rtems-rfs-block_8h.html#af488270acef452a961e888bffdc3a7bf">rtems_rfs_block_map</a> *<a class="el" href="struct__map.html">map</a>)</td></tr>
<tr class="separator:a9f3eaf881c5744fcfe5798cea33999a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a28b8212558166f369beb68e4bd28d528"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rtems-rfs-block_8h.html#a28b8212558166f369beb68e4bd28d528">rtems_rfs_block_map_find</a> (<a class="el" href="struct__rtems__rfs__file__system.html">rtems_rfs_file_system</a> *fs, <a class="el" href="rtems-rfs-block_8h.html#af488270acef452a961e888bffdc3a7bf">rtems_rfs_block_map</a> *<a class="el" href="struct__map.html">map</a>, <a class="el" href="rtems-rfs-block-pos_8h.html#a0d8bd7482333e584a03df45e60cda226">rtems_rfs_block_pos</a> *bpos, <a class="el" href="rtems-rfs-buffer_8h.html#a5650d53328a5af0a78198fe780aec043">rtems_rfs_buffer_block</a> *block)</td></tr>
<tr class="separator:a28b8212558166f369beb68e4bd28d528"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0d34276d2ea32d86916a57cf34266c0f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rtems-rfs-block_8h.html#a0d34276d2ea32d86916a57cf34266c0f">rtems_rfs_block_map_seek</a> (<a class="el" href="struct__rtems__rfs__file__system.html">rtems_rfs_file_system</a> *fs, <a class="el" href="rtems-rfs-block_8h.html#af488270acef452a961e888bffdc3a7bf">rtems_rfs_block_map</a> *<a class="el" href="struct__map.html">map</a>, <a class="el" href="rtems-rfs-file-system_8h.html#af6bccb465dcd34c68e9f0c214950ef57">rtems_rfs_pos_rel</a> offset, <a class="el" href="rtems-rfs-buffer_8h.html#a5650d53328a5af0a78198fe780aec043">rtems_rfs_buffer_block</a> *block)</td></tr>
<tr class="separator:a0d34276d2ea32d86916a57cf34266c0f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a94ad6a90dc3f322eb58926d8d78af9c2"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rtems-rfs-block_8h.html#a94ad6a90dc3f322eb58926d8d78af9c2">rtems_rfs_block_map_next_block</a> (<a class="el" href="struct__rtems__rfs__file__system.html">rtems_rfs_file_system</a> *fs, <a class="el" href="rtems-rfs-block_8h.html#af488270acef452a961e888bffdc3a7bf">rtems_rfs_block_map</a> *<a class="el" href="struct__map.html">map</a>, <a class="el" href="rtems-rfs-buffer_8h.html#a5650d53328a5af0a78198fe780aec043">rtems_rfs_buffer_block</a> *block)</td></tr>
<tr class="separator:a94ad6a90dc3f322eb58926d8d78af9c2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa0041e23dc7269c746a5d198fda8426d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rtems-rfs-block_8h.html#aa0041e23dc7269c746a5d198fda8426d">rtems_rfs_block_map_grow</a> (<a class="el" href="struct__rtems__rfs__file__system.html">rtems_rfs_file_system</a> *fs, <a class="el" href="rtems-rfs-block_8h.html#af488270acef452a961e888bffdc3a7bf">rtems_rfs_block_map</a> *<a class="el" href="struct__map.html">map</a>, size_t blocks, <a class="el" href="rtems-rfs-block-pos_8h.html#abbf8bb95acf9bd16ed3291f7da518e9a">rtems_rfs_block_no</a> *new_block)</td></tr>
<tr class="separator:aa0041e23dc7269c746a5d198fda8426d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1609f6d6ac4378a5df7935a69bb2884d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rtems-rfs-block_8h.html#a1609f6d6ac4378a5df7935a69bb2884d">rtems_rfs_block_map_shrink</a> (<a class="el" href="struct__rtems__rfs__file__system.html">rtems_rfs_file_system</a> *fs, <a class="el" href="rtems-rfs-block_8h.html#af488270acef452a961e888bffdc3a7bf">rtems_rfs_block_map</a> *<a class="el" href="struct__map.html">map</a>, size_t blocks)</td></tr>
<tr class="separator:a1609f6d6ac4378a5df7935a69bb2884d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1918b1aa888c6545497402764528ef99"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rtems-rfs-block_8h.html#a1918b1aa888c6545497402764528ef99">rtems_rfs_block_map_free_all</a> (<a class="el" href="struct__rtems__rfs__file__system.html">rtems_rfs_file_system</a> *fs, <a class="el" href="rtems-rfs-block_8h.html#af488270acef452a961e888bffdc3a7bf">rtems_rfs_block_map</a> *<a class="el" href="struct__map.html">map</a>)</td></tr>
<tr class="separator:a1918b1aa888c6545497402764528ef99"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>RTEMS File Systems Block Management. </p>
<p>RTEMS File Systems Block Management.</p>
<p>These functions manage the blocks used in the file system. </p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a1fae6583887a6e10a9fc10466aec4871"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1fae6583887a6e10a9fc10466aec4871">&#9670;&nbsp;</a></span>rtems_rfs_block_get_number</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define rtems_rfs_block_get_number</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">_h, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">_b&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">((<a class="code" href="rtems-rfs-block-pos_8h.html#abbf8bb95acf9bd16ed3291f7da518e9a">rtems_rfs_block_no</a>) \</div><div class="line">   (<a class="code" href="rtems-rfs-data_8h.html#ae061f1784ebeef490293e0080740041a">rtems_rfs_read_u32</a> (<a class="code" href="rtems-rfs-buffer_8h.html#aeb8816b42da7435346c907b381188402">rtems_rfs_buffer_data</a> (_h) + \</div><div class="line">                        ((_b) * <span class="keyword">sizeof</span> (<a class="code" href="rtems-rfs-block-pos_8h.html#abbf8bb95acf9bd16ed3291f7da518e9a">rtems_rfs_block_no</a>)))))</div><div class="ttc" id="rtems-rfs-block-pos_8h_html_abbf8bb95acf9bd16ed3291f7da518e9a"><div class="ttname"><a href="rtems-rfs-block-pos_8h.html#abbf8bb95acf9bd16ed3291f7da518e9a">rtems_rfs_block_no</a></div><div class="ttdeci">rtems_rfs_inode_block rtems_rfs_block_no</div><div class="ttdef"><b>Definition:</b> rtems-rfs-block-pos.h:39</div></div>
<div class="ttc" id="rtems-rfs-buffer_8h_html_aeb8816b42da7435346c907b381188402"><div class="ttname"><a href="rtems-rfs-buffer_8h.html#aeb8816b42da7435346c907b381188402">rtems_rfs_buffer_data</a></div><div class="ttdeci">#define rtems_rfs_buffer_data(_h)</div><div class="ttdef"><b>Definition:</b> rtems-rfs-buffer.h:119</div></div>
<div class="ttc" id="rtems-rfs-data_8h_html_ae061f1784ebeef490293e0080740041a"><div class="ttname"><a href="rtems-rfs-data_8h.html#ae061f1784ebeef490293e0080740041a">rtems_rfs_read_u32</a></div><div class="ttdeci">#define rtems_rfs_read_u32(_d)</div><div class="ttdef"><b>Definition:</b> rtems-rfs-data.h:57</div></div>
</div><!-- fragment --><p>Get a block number in the media format and return it in the host format.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">_h</td><td>is the buffer handle of the block. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">_b</td><td>is the block number index.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">block</td><td>The block number. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a3b2ba358af43eacc75bab0a43df635b4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3b2ba358af43eacc75bab0a43df635b4">&#9670;&nbsp;</a></span>rtems_rfs_block_map_block</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define rtems_rfs_block_map_block</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">_m</td><td>)</td>
          <td>&#160;&#160;&#160;((_m)-&gt;bpos.bno)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return the map's current block number. </p>

</div>
</div>
<a id="a2e08847a8a8a412af576b52464934461"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2e08847a8a8a412af576b52464934461">&#9670;&nbsp;</a></span>rtems_rfs_block_map_block_offset</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define rtems_rfs_block_map_block_offset</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">_m</td><td>)</td>
          <td>&#160;&#160;&#160;((_m)-&gt;bpos.boff)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return the map's current block offset. </p>

</div>
</div>
<a id="a62eff0ebf3f1245d1b377c01bfc61e3a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a62eff0ebf3f1245d1b377c01bfc61e3a">&#9670;&nbsp;</a></span>rtems_rfs_block_map_count</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define rtems_rfs_block_map_count</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">_m</td><td>)</td>
          <td>&#160;&#160;&#160;((_m)-&gt;size.count)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return the block count in the map. </p>

</div>
</div>
<a id="a549d6991e0ac178c6dd0df88778103ad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a549d6991e0ac178c6dd0df88778103ad">&#9670;&nbsp;</a></span>rtems_rfs_block_map_is_dirty</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define rtems_rfs_block_map_is_dirty</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">_m</td><td>)</td>
          <td>&#160;&#160;&#160;((_m)-&gt;dirty)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Is the map dirty ? </p>

</div>
</div>
<a id="aa8c216119709425d653004badbdd112f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa8c216119709425d653004badbdd112f">&#9670;&nbsp;</a></span>rtems_rfs_block_map_last</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define rtems_rfs_block_map_last</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">_m</td><td>)</td>
          <td>&#160;&#160;&#160;<a class="el" href="rtems-rfs-block-pos_8h.html#af9de1169214c5fbc1d5cbb8265e4b759">rtems_rfs_block_pos_last_block</a> (&amp;(_m)-&gt;bpos, &amp;(_m)-&gt;<a class="el" href="sun4u_2tte_8h.html#a245260f6f74972558f61b85227df5aae">size</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Are we at the last block in the map ? </p>

</div>
</div>
<a id="ae63fea18cd527d6b6c5049d7f36196c4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae63fea18cd527d6b6c5049d7f36196c4">&#9670;&nbsp;</a></span>rtems_rfs_block_map_past_end</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define rtems_rfs_block_map_past_end</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">_m, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">_p&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;<a class="el" href="rtems-rfs-block-pos_8h.html#a7c9df0abcb57dfe35e4e18ae63356077">rtems_rfs_block_pos_past_end</a> (_p, &amp;(_m)-&gt;<a class="el" href="sun4u_2tte_8h.html#a245260f6f74972558f61b85227df5aae">size</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Is the position past the end of the block ? </p>

</div>
</div>
<a id="a08acb6d8355c8533a760c9dffa3598fa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a08acb6d8355c8533a760c9dffa3598fa">&#9670;&nbsp;</a></span>rtems_rfs_block_map_pos</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define rtems_rfs_block_map_pos</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">_f, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">_m&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;<a class="el" href="rtems-rfs-block_8c.html#a76f70461e9f76aa1f6739a13a8f26735">rtems_rfs_block_get_pos</a> (_f, &amp;(_m)-&gt;bpos)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return the current position in the map. </p>

</div>
</div>
<a id="ae3b8d48771938228784bb2a5edaff697"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae3b8d48771938228784bb2a5edaff697">&#9670;&nbsp;</a></span>rtems_rfs_block_map_size</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define rtems_rfs_block_map_size</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">_m</td><td>)</td>
          <td>&#160;&#160;&#160;(&amp;((_m)-&gt;<a class="el" href="sun4u_2tte_8h.html#a245260f6f74972558f61b85227df5aae">size</a>))</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return the map's size element. </p>

</div>
</div>
<a id="a38a9929ea04e6dd7f761b7bb5013fcb8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a38a9929ea04e6dd7f761b7bb5013fcb8">&#9670;&nbsp;</a></span>rtems_rfs_block_map_size_offset</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define rtems_rfs_block_map_size_offset</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">_m</td><td>)</td>
          <td>&#160;&#160;&#160;((_m)-&gt;size.offset)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return the size offset for the map. </p>

</div>
</div>
<a id="a3106dad1324083f22f43e9f76a9e3c64"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3106dad1324083f22f43e9f76a9e3c64">&#9670;&nbsp;</a></span>rtems_rfs_block_set_number</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define rtems_rfs_block_set_number</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">_h, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">_b, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">_n&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line"><span class="keywordflow">do</span> { \</div><div class="line">    rtems_rfs_write_u32 (<a class="code" href="rtems-rfs-buffer_8h.html#aeb8816b42da7435346c907b381188402">rtems_rfs_buffer_data</a> (_h) + \</div><div class="line">                         ((_b) * <span class="keyword">sizeof</span> (<a class="code" href="rtems-rfs-block-pos_8h.html#abbf8bb95acf9bd16ed3291f7da518e9a">rtems_rfs_block_no</a>)), (_n)); \</div><div class="line">    rtems_rfs_buffer_mark_dirty (_h); \</div><div class="line">  } <span class="keywordflow">while</span> (0)</div><div class="ttc" id="rtems-rfs-block-pos_8h_html_abbf8bb95acf9bd16ed3291f7da518e9a"><div class="ttname"><a href="rtems-rfs-block-pos_8h.html#abbf8bb95acf9bd16ed3291f7da518e9a">rtems_rfs_block_no</a></div><div class="ttdeci">rtems_rfs_inode_block rtems_rfs_block_no</div><div class="ttdef"><b>Definition:</b> rtems-rfs-block-pos.h:39</div></div>
<div class="ttc" id="rtems-rfs-buffer_8h_html_aeb8816b42da7435346c907b381188402"><div class="ttname"><a href="rtems-rfs-buffer_8h.html#aeb8816b42da7435346c907b381188402">rtems_rfs_buffer_data</a></div><div class="ttdeci">#define rtems_rfs_buffer_data(_h)</div><div class="ttdef"><b>Definition:</b> rtems-rfs-buffer.h:119</div></div>
</div><!-- fragment --><p>Set a block number in the media format given a number in the host format.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">_h</td><td>is the buffer handle of the block. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">_b</td><td>is the block number index, ie the number of block number not the buffer offset. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">_n</td><td>is the block number. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="af488270acef452a961e888bffdc3a7bf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af488270acef452a961e888bffdc3a7bf">&#9670;&nbsp;</a></span>rtems_rfs_block_map</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structrtems__rfs__block__map__s.html">rtems_rfs_block_map_s</a>  <a class="el" href="rtems-rfs-block_8h.html#af488270acef452a961e888bffdc3a7bf">rtems_rfs_block_map</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>A block map manges the block lists that originate from an inode. The inode contains a number of block numbers. A block map takes those block numbers and manages them.</p>
<p>The blocks cannot have all ones as a block number nor block 0. The block map is series of block numbers in a blocks. The size of the map determines the way the block numbers are stored. The map uses the following:</p>
<ul>
<li><em>Direct</em> Access, </li>
<li><em>Single</em> Indirect Access, and </li>
<li><em>Double</em> Indirect Access.</li>
</ul>
<p>Direct access has the blocks numbers in the inode slots. The Single Indirect Access has block numbers in the inode slots that pointer to a table of block numbers that point to data blocks. The Double Indirect Access has block numbers in the inode that point to Single Indirect block tables.</p>
<p>The inode can hold a number of Direct, Single Indirect, and Double Indirect block tables. The move from Direct to Single occurs then the block count in the map is above the number of slots in the inode. The move from Single to Double occurs when the map block count is greated than the block numbers per block multipled by the slots in the inode. The move from Single to Double occurs when the map block count is over the block numbers per block squared multipled by the number of slots in the inode.</p>
<p>The block map can managed files of the follow size verses block size with 5 inode slots:</p>
<ul>
<li>41,943,040 bytes for a 512 byte block size, </li>
<li>335,544,320 bytes for a 1024 byte block size, </li>
<li>2,684,354,560 bytes for a 2048 byte block size, and </li>
<li>21,474,836,480 bytes for a 4096 byte block size. </li>
</ul>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a9f3eaf881c5744fcfe5798cea33999a7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9f3eaf881c5744fcfe5798cea33999a7">&#9670;&nbsp;</a></span>rtems_rfs_block_map_close()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rtems_rfs_block_map_close </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct__rtems__rfs__file__system.html">rtems_rfs_file_system</a> *&#160;</td>
          <td class="paramname"><em>fs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="rtems-rfs-block_8h.html#af488270acef452a961e888bffdc3a7bf">rtems_rfs_block_map</a> *&#160;</td>
          <td class="paramname"><em>map</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Close the map. The buffer handles are closed and any help buffers are released.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">fs</td><td>is the file system data. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">map</td><td>is a pointer to the map that is opened.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Successful operation. </td></tr>
    <tr><td class="paramname">error_code</td><td>An error occurred. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a28b8212558166f369beb68e4bd28d528"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a28b8212558166f369beb68e4bd28d528">&#9670;&nbsp;</a></span>rtems_rfs_block_map_find()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rtems_rfs_block_map_find </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct__rtems__rfs__file__system.html">rtems_rfs_file_system</a> *&#160;</td>
          <td class="paramname"><em>fs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="rtems-rfs-block_8h.html#af488270acef452a961e888bffdc3a7bf">rtems_rfs_block_map</a> *&#160;</td>
          <td class="paramname"><em>map</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="rtems-rfs-block-pos_8h.html#a0d8bd7482333e584a03df45e60cda226">rtems_rfs_block_pos</a> *&#160;</td>
          <td class="paramname"><em>bpos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="rtems-rfs-buffer_8h.html#a5650d53328a5af0a78198fe780aec043">rtems_rfs_buffer_block</a> *&#160;</td>
          <td class="paramname"><em>block</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Find a block number in the map from the position provided.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">fs</td><td>is the file system data. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">map</td><td>is a pointer to the map to search. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">bpos</td><td>is a pointer to the block position to find. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">block</td><td>will contain the block in when found.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Successful operation. </td></tr>
    <tr><td class="paramname">error_code</td><td>An error occurred. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a1918b1aa888c6545497402764528ef99"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1918b1aa888c6545497402764528ef99">&#9670;&nbsp;</a></span>rtems_rfs_block_map_free_all()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rtems_rfs_block_map_free_all </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct__rtems__rfs__file__system.html">rtems_rfs_file_system</a> *&#160;</td>
          <td class="paramname"><em>fs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="rtems-rfs-block_8h.html#af488270acef452a961e888bffdc3a7bf">rtems_rfs_block_map</a> *&#160;</td>
          <td class="paramname"><em>map</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Free all blocks in the map.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">fs</td><td>is the file system data. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">map</td><td>is a pointer to the open map to free all blocks from.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Successful operation. </td></tr>
    <tr><td class="paramname">error_code</td><td>An error occurred. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aa0041e23dc7269c746a5d198fda8426d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa0041e23dc7269c746a5d198fda8426d">&#9670;&nbsp;</a></span>rtems_rfs_block_map_grow()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rtems_rfs_block_map_grow </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct__rtems__rfs__file__system.html">rtems_rfs_file_system</a> *&#160;</td>
          <td class="paramname"><em>fs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="rtems-rfs-block_8h.html#af488270acef452a961e888bffdc3a7bf">rtems_rfs_block_map</a> *&#160;</td>
          <td class="paramname"><em>map</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>blocks</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="rtems-rfs-block-pos_8h.html#abbf8bb95acf9bd16ed3291f7da518e9a">rtems_rfs_block_no</a> *&#160;</td>
          <td class="paramname"><em>new_block</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Grow the block map by the specified number of blocks.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">fs</td><td>is the file system data. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">map</td><td>is a pointer to the open map to grow. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">blocks</td><td>is the number of blocks to grow the map by. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">new_block</td><td>will contain first of the blocks allocated to the map.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Successful operation. </td></tr>
    <tr><td class="paramname">error_code</td><td>An error occurred. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a94ad6a90dc3f322eb58926d8d78af9c2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a94ad6a90dc3f322eb58926d8d78af9c2">&#9670;&nbsp;</a></span>rtems_rfs_block_map_next_block()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rtems_rfs_block_map_next_block </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct__rtems__rfs__file__system.html">rtems_rfs_file_system</a> *&#160;</td>
          <td class="paramname"><em>fs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="rtems-rfs-block_8h.html#af488270acef452a961e888bffdc3a7bf">rtems_rfs_block_map</a> *&#160;</td>
          <td class="paramname"><em>map</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="rtems-rfs-buffer_8h.html#a5650d53328a5af0a78198fe780aec043">rtems_rfs_buffer_block</a> *&#160;</td>
          <td class="paramname"><em>block</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Seek to the next block.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">fs</td><td>is the file system data. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">map</td><td>is a pointer to the map to search. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">block</td><td>will contain the block in when found.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Successful operation. </td></tr>
    <tr><td class="paramname">ENXIO</td><td>Failed to seek because it is outside the block map. </td></tr>
    <tr><td class="paramname">error_code</td><td>An error occurred. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a5a09f0d3d9d4e31367c51ceadb7dea31"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5a09f0d3d9d4e31367c51ceadb7dea31">&#9670;&nbsp;</a></span>rtems_rfs_block_map_open()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rtems_rfs_block_map_open </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct__rtems__rfs__file__system.html">rtems_rfs_file_system</a> *&#160;</td>
          <td class="paramname"><em>fs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="rtems-rfs-inode_8h.html#a91f02dac5a2d91e072d676f3266ab8d2">rtems_rfs_inode_handle</a> *&#160;</td>
          <td class="paramname"><em>inode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="rtems-rfs-block_8h.html#af488270acef452a961e888bffdc3a7bf">rtems_rfs_block_map</a> *&#160;</td>
          <td class="paramname"><em>map</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Open a block map. The block map data in the inode is copied into the map. The buffer handles are opened. The block position is set to the start so a seek of offset 0 will return the first block.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">fs</td><td>is the file system data. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">inode</td><td>is a pointer to the inode the map belongs to. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">map</td><td>is a pointer to the map that is opened.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Successful operation. </td></tr>
    <tr><td class="paramname">error_code</td><td>An error occurred. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a0d34276d2ea32d86916a57cf34266c0f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0d34276d2ea32d86916a57cf34266c0f">&#9670;&nbsp;</a></span>rtems_rfs_block_map_seek()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rtems_rfs_block_map_seek </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct__rtems__rfs__file__system.html">rtems_rfs_file_system</a> *&#160;</td>
          <td class="paramname"><em>fs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="rtems-rfs-block_8h.html#af488270acef452a961e888bffdc3a7bf">rtems_rfs_block_map</a> *&#160;</td>
          <td class="paramname"><em>map</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="rtems-rfs-file-system_8h.html#af6bccb465dcd34c68e9f0c214950ef57">rtems_rfs_pos_rel</a>&#160;</td>
          <td class="paramname"><em>offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="rtems-rfs-buffer_8h.html#a5650d53328a5af0a78198fe780aec043">rtems_rfs_buffer_block</a> *&#160;</td>
          <td class="paramname"><em>block</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Seek around the map.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">fs</td><td>is the file system data. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">map</td><td>is a pointer to the map to search. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">offset</td><td>is the distance to seek. It is signed. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">block</td><td>will contain the block in when found.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Successful operation. </td></tr>
    <tr><td class="paramname">ENXIO</td><td>Failed to seek because it is outside the block map. </td></tr>
    <tr><td class="paramname">error_code</td><td>An error occurred. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a1609f6d6ac4378a5df7935a69bb2884d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1609f6d6ac4378a5df7935a69bb2884d">&#9670;&nbsp;</a></span>rtems_rfs_block_map_shrink()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rtems_rfs_block_map_shrink </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct__rtems__rfs__file__system.html">rtems_rfs_file_system</a> *&#160;</td>
          <td class="paramname"><em>fs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="rtems-rfs-block_8h.html#af488270acef452a961e888bffdc3a7bf">rtems_rfs_block_map</a> *&#160;</td>
          <td class="paramname"><em>map</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>blocks</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Grow the block map by the specified number of blocks.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">fs</td><td>is the file system data. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">map</td><td>is a pointer to the open map to shrink. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">blocks</td><td>is the number of blocks to shrink the map by. If more than the number of blocks the map is emptied.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Successful operation. </td></tr>
    <tr><td class="paramname">error_code</td><td>An error occurred. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.15
</small></address>
</body>
</html>
