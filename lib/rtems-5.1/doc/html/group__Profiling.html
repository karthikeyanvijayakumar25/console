<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>RTEMS: Profiling Support</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="rtemslogo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">RTEMS
   &#160;<span id="projectnumber">5.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#files">Files</a> &#124;
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Profiling Support<div class="ingroups"><a class="el" href="group__RTEMSAPI.html">API</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>The profiling support offers functions to report profiling information available in the system.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="files"></a>
Files</h2></td></tr>
<tr class="memitem:profiling_8h"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="profiling_8h.html">profiling.h</a></td></tr>
<tr class="memdesc:profiling_8h"><td class="mdescLeft">&#160;</td><td class="mdescRight">Profiling API. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structrtems__profiling__header.html">rtems_profiling_header</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">The profiling data header.  <a href="structrtems__profiling__header.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structrtems__profiling__per__cpu.html">rtems_profiling_per_cpu</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Per-CPU profiling data.  <a href="structrtems__profiling__per__cpu.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structrtems__profiling__smp__lock.html">rtems_profiling_smp_lock</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">SMP lock profiling data.  <a href="structrtems__profiling__smp__lock.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">union &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="unionrtems__profiling__data.html">rtems_profiling_data</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Collection of profiling data.  <a href="unionrtems__profiling__data.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:gaa982fd0b6f3e7e29927a4efa146eb7ad"><td class="memItemLeft" align="right" valign="top"><a id="gaa982fd0b6f3e7e29927a4efa146eb7ad"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Profiling.html#gaa982fd0b6f3e7e29927a4efa146eb7ad">RTEMS_PROFILING_SMP_LOCK_CONTENTION_COUNTS</a>&#160;&#160;&#160;4</td></tr>
<tr class="memdesc:gaa982fd0b6f3e7e29927a4efa146eb7ad"><td class="mdescLeft">&#160;</td><td class="mdescRight">Count of lock contention counters for SMP lock profiling. <br /></td></tr>
<tr class="separator:gaa982fd0b6f3e7e29927a4efa146eb7ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:gabc727db53114f2f1bedd000b4d8b38ba"><td class="memItemLeft" align="right" valign="top">typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Profiling.html#gabc727db53114f2f1bedd000b4d8b38ba">rtems_profiling_visitor</a>) (void *arg, const <a class="el" href="unionrtems__profiling__data.html">rtems_profiling_data</a> *data)</td></tr>
<tr class="memdesc:gabc727db53114f2f1bedd000b4d8b38ba"><td class="mdescLeft">&#160;</td><td class="mdescRight">Visitor function for the profiling iteration.  <a href="#gabc727db53114f2f1bedd000b4d8b38ba">More...</a><br /></td></tr>
<tr class="separator:gabc727db53114f2f1bedd000b4d8b38ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:ga8e677119cdafc1bfb0cecbb6b8f48eb2"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Profiling.html#ga8e677119cdafc1bfb0cecbb6b8f48eb2">rtems_profiling_type</a> { <a class="el" href="group__Profiling.html#gga8e677119cdafc1bfb0cecbb6b8f48eb2a8076886829cc3752389f1db9ff73c279">RTEMS_PROFILING_PER_CPU</a>, 
<a class="el" href="group__Profiling.html#gga8e677119cdafc1bfb0cecbb6b8f48eb2afb2b94efa250f957d42bda049179d8ee">RTEMS_PROFILING_SMP_LOCK</a>
 }</td></tr>
<tr class="memdesc:ga8e677119cdafc1bfb0cecbb6b8f48eb2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Type of profiling data.  <a href="group__Profiling.html#ga8e677119cdafc1bfb0cecbb6b8f48eb2">More...</a><br /></td></tr>
<tr class="separator:ga8e677119cdafc1bfb0cecbb6b8f48eb2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga4edc3fa059af092c478bdd95ffbb177e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Profiling.html#ga4edc3fa059af092c478bdd95ffbb177e">rtems_profiling_iterate</a> (<a class="el" href="group__Profiling.html#gabc727db53114f2f1bedd000b4d8b38ba">rtems_profiling_visitor</a> visitor, void *visitor_arg)</td></tr>
<tr class="memdesc:ga4edc3fa059af092c478bdd95ffbb177e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Iterates through all profiling data of the system.  <a href="#ga4edc3fa059af092c478bdd95ffbb177e">More...</a><br /></td></tr>
<tr class="separator:ga4edc3fa059af092c478bdd95ffbb177e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae1d3b285861598637ed453b7084896ed"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Profiling.html#gae1d3b285861598637ed453b7084896ed">rtems_profiling_report_xml</a> (const char *name, const <a class="el" href="structrtems__printer.html">rtems_printer</a> *printer, uint32_t indentation_level, const char *indentation)</td></tr>
<tr class="memdesc:gae1d3b285861598637ed453b7084896ed"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reports profiling data as XML.  <a href="#gae1d3b285861598637ed453b7084896ed">More...</a><br /></td></tr>
<tr class="separator:gae1d3b285861598637ed453b7084896ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>The profiling support offers functions to report profiling information available in the system. </p>
<p>Profiling support is by default disabled. It must be enabled via the configure command line with the <code>&ndash;enable-profiling</code> option. In this case the RTEMS_PROFILING pre-processor symbol is defined and profiling statistics will be gathered during system run-time. The profiling support increases the time of critical sections and has some memory overhead. The overhead should be acceptable for most applications. The aim of the profiling implementation is to be available even for production systems so that verification is simplified.</p>
<p>Profiling information includes critical timing values such as the maximum time of disabled thread dispatching which is a measure for the thread dispatch latency. On SMP configurations statistics of all SMP locks in the system are available.</p>
<p>Profiling information can be retrieved via <a class="el" href="group__Profiling.html#ga4edc3fa059af092c478bdd95ffbb177e" title="Iterates through all profiling data of the system.">rtems_profiling_iterate()</a> and reported as an XML dump via <a class="el" href="group__Profiling.html#gae1d3b285861598637ed453b7084896ed" title="Reports profiling data as XML.">rtems_profiling_report_xml()</a>. These functions are always available, but actual profiling data is only available if enabled at build configuration time. </p>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="gabc727db53114f2f1bedd000b4d8b38ba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gabc727db53114f2f1bedd000b4d8b38ba">&#9670;&nbsp;</a></span>rtems_profiling_visitor</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* rtems_profiling_visitor) (void *arg, const <a class="el" href="unionrtems__profiling__data.html">rtems_profiling_data</a> *data)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Visitor function for the profiling iteration. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">arg</td><td>The visitor argument. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">data</td><td>The current profiling data.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__Profiling.html#ga4edc3fa059af092c478bdd95ffbb177e" title="Iterates through all profiling data of the system.">rtems_profiling_iterate()</a>. </dd></dl>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="ga8e677119cdafc1bfb0cecbb6b8f48eb2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8e677119cdafc1bfb0cecbb6b8f48eb2">&#9670;&nbsp;</a></span>rtems_profiling_type</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__Profiling.html#ga8e677119cdafc1bfb0cecbb6b8f48eb2">rtems_profiling_type</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Type of profiling data. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="gga8e677119cdafc1bfb0cecbb6b8f48eb2a8076886829cc3752389f1db9ff73c279"></a>RTEMS_PROFILING_PER_CPU&#160;</td><td class="fielddoc"><p>Type of per-CPU profiling data. </p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="structrtems__profiling__per__cpu.html" title="Per-CPU profiling data.">rtems_profiling_per_cpu</a>. </dd></dl>
</td></tr>
<tr><td class="fieldname"><a id="gga8e677119cdafc1bfb0cecbb6b8f48eb2afb2b94efa250f957d42bda049179d8ee"></a>RTEMS_PROFILING_SMP_LOCK&#160;</td><td class="fielddoc"><p>Type of SMP lock profiling data. </p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="structrtems__profiling__smp__lock.html" title="SMP lock profiling data.">rtems_profiling_smp_lock</a>. </dd></dl>
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga4edc3fa059af092c478bdd95ffbb177e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga4edc3fa059af092c478bdd95ffbb177e">&#9670;&nbsp;</a></span>rtems_profiling_iterate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rtems_profiling_iterate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__Profiling.html#gabc727db53114f2f1bedd000b4d8b38ba">rtems_profiling_visitor</a>&#160;</td>
          <td class="paramname"><em>visitor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>visitor_arg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Iterates through all profiling data of the system. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">visitor</td><td>The visitor. </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">visitor_arg</td><td>The visitor argument. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gae1d3b285861598637ed453b7084896ed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae1d3b285861598637ed453b7084896ed">&#9670;&nbsp;</a></span>rtems_profiling_report_xml()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rtems_profiling_report_xml </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structrtems__printer.html">rtems_printer</a> *&#160;</td>
          <td class="paramname"><em>printer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>indentation_level</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>indentation</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reports profiling data as XML. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">name</td><td>The name of the profiling report. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">printer</td><td>The RTEMS printer to send the output too. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">indentation_level</td><td>The current indentation level. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">indentation</td><td>The string used for indentation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>As specified by printf(). </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.15
</small></address>
</body>
</html>
