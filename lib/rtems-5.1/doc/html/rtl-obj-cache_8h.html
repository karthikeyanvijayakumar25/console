<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>RTEMS: cpukit/include/rtems/rtl/rtl-obj-cache.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="rtemslogo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">RTEMS
   &#160;<span id="projectnumber">5.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_cd198e36225ba3f41de97552050ac017.html">cpukit</a></li><li class="navelem"><a class="el" href="dir_4f6a7e6de63bf7faab77653961b179a0.html">include</a></li><li class="navelem"><a class="el" href="dir_be382d098cd1aaaaf11a7ebea3d850c0.html">rtems</a></li><li class="navelem"><a class="el" href="dir_92316a86de7c658bf2311fa47af5ba7a.html">rtl</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">rtl-obj-cache.h File Reference<div class="ingroups"><a class="el" href="group__RTEMSAPI.html">API</a> &raquo; <a class="el" href="group__rtems__rtl.html">RTEMS Runtime Link Editor</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>RTEMS Run-Time Linker Object File cache buffers a section of the object file in a buffer to localise read performance.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;fcntl.h&gt;</code><br />
<code>#include &lt;stdbool.h&gt;</code><br />
<code>#include &lt;stdint.h&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
</div>
<p><a href="rtl-obj-cache_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structrtems__rtl__obj__cache.html">rtems_rtl_obj_cache</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a81e975e0a01c847123f0c3ed0245c88f"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structrtems__rtl__obj__cache.html">rtems_rtl_obj_cache</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rtl-obj-cache_8h.html#a81e975e0a01c847123f0c3ed0245c88f">rtems_rtl_obj_cache</a></td></tr>
<tr class="separator:a81e975e0a01c847123f0c3ed0245c88f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a5b2951671bf88bf7b8e915dd8938b691"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rtl-obj-cache_8h.html#a5b2951671bf88bf7b8e915dd8938b691">rtems_rtl_obj_cache_open</a> (<a class="el" href="structrtems__rtl__obj__cache.html">rtems_rtl_obj_cache</a> *cache, size_t <a class="el" href="sun4u_2tte_8h.html#a245260f6f74972558f61b85227df5aae">size</a>)</td></tr>
<tr class="separator:a5b2951671bf88bf7b8e915dd8938b691"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af823408cc02aeceb7ab687c7d818ad1a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rtl-obj-cache_8h.html#af823408cc02aeceb7ab687c7d818ad1a">rtems_rtl_obj_cache_close</a> (<a class="el" href="structrtems__rtl__obj__cache.html">rtems_rtl_obj_cache</a> *cache)</td></tr>
<tr class="separator:af823408cc02aeceb7ab687c7d818ad1a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a111b8cc86622e49926e5267d2be870e7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rtl-obj-cache_8h.html#a111b8cc86622e49926e5267d2be870e7">rtems_rtl_obj_cache_flush</a> (<a class="el" href="structrtems__rtl__obj__cache.html">rtems_rtl_obj_cache</a> *cache)</td></tr>
<tr class="separator:a111b8cc86622e49926e5267d2be870e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adad604773572de631e48629ce4a7e212"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rtl-obj-cache_8h.html#adad604773572de631e48629ce4a7e212">rtems_rtl_obj_cache_read</a> (<a class="el" href="structrtems__rtl__obj__cache.html">rtems_rtl_obj_cache</a> *cache, int fd, off_t offset, void **buffer, size_t *length)</td></tr>
<tr class="separator:adad604773572de631e48629ce4a7e212"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a80432d8deca613a70eb9fa3c8ae017c1"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rtl-obj-cache_8h.html#a80432d8deca613a70eb9fa3c8ae017c1">rtems_rtl_obj_cache_read_byval</a> (<a class="el" href="structrtems__rtl__obj__cache.html">rtems_rtl_obj_cache</a> *cache, int fd, off_t offset, void *buffer, size_t length)</td></tr>
<tr class="separator:a80432d8deca613a70eb9fa3c8ae017c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>RTEMS Run-Time Linker Object File cache buffers a section of the object file in a buffer to localise read performance. </p>
<p>This is a simple object file cache that holds a buffer of data from the offset in the file the read is requested from. Writes are not supported.</p>
<p>The cache holds the file descriptor, the offset into the file and the amount of valid data in the cache. If the file is ever modified the user of the cache to responsible for flushing the cache. For example the cache should be flused if the file is closed.</p>
<p>The cache can return by reference or by value. By reference allow access to the cache buffer. Do not modify the cache's data. By value will copy the requested data into the user supplied buffer.</p>
<p>The read by reference call allows you to probe the file's data. For example a string in an object file can be an unknown length. You can request a read up to the cache's size by reference. The code will attempt to have this data in the buffer. If there is not enough data in the file the length will be modifed to reflect this.</p>
<p>You can have more than one cache for a single file all looking at different parts of the file. </p>
</div><h2 class="groupheader">Typedef Documentation</h2>
<a id="a81e975e0a01c847123f0c3ed0245c88f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a81e975e0a01c847123f0c3ed0245c88f">&#9670;&nbsp;</a></span>rtems_rtl_obj_cache</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structrtems__rtl__obj__cache.html">rtems_rtl_obj_cache</a>  <a class="el" href="structrtems__rtl__obj__cache.html">rtems_rtl_obj_cache</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The buffer cache. </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="af823408cc02aeceb7ab687c7d818ad1a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af823408cc02aeceb7ab687c7d818ad1a">&#9670;&nbsp;</a></span>rtems_rtl_obj_cache_close()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rtems_rtl_obj_cache_close </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structrtems__rtl__obj__cache.html">rtems_rtl_obj_cache</a> *&#160;</td>
          <td class="paramname"><em>cache</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Close a cache.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cache</td><td>The cache to close. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a111b8cc86622e49926e5267d2be870e7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a111b8cc86622e49926e5267d2be870e7">&#9670;&nbsp;</a></span>rtems_rtl_obj_cache_flush()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rtems_rtl_obj_cache_flush </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structrtems__rtl__obj__cache.html">rtems_rtl_obj_cache</a> *&#160;</td>
          <td class="paramname"><em>cache</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Flush the cache. Any further read will read the data from the file.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cache</td><td>The cache to flush. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a5b2951671bf88bf7b8e915dd8938b691"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5b2951671bf88bf7b8e915dd8938b691">&#9670;&nbsp;</a></span>rtems_rtl_obj_cache_open()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool rtems_rtl_obj_cache_open </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structrtems__rtl__obj__cache.html">rtems_rtl_obj_cache</a> *&#160;</td>
          <td class="paramname"><em>cache</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Open a cache allocating a single buffer of the size passed. The default state of the cache is flushed. No already open checks are made.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cache</td><td>The cache to initialise. </td></tr>
    <tr><td class="paramname">size</td><td>The size of the cache. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">true</td><td>The cache is open. </td></tr>
    <tr><td class="paramname">false</td><td>The cache is not open. The RTL error is set. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="adad604773572de631e48629ce4a7e212"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adad604773572de631e48629ce4a7e212">&#9670;&nbsp;</a></span>rtems_rtl_obj_cache_read()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool rtems_rtl_obj_cache_read </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structrtems__rtl__obj__cache.html">rtems_rtl_obj_cache</a> *&#160;</td>
          <td class="paramname"><em>cache</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">off_t&#160;</td>
          <td class="paramname"><em>offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void **&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&#160;</td>
          <td class="paramname"><em>length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Read data by reference. The length contains the amount of data that should be available in the cache and referenced by the buffer handle. It must be less than or equal to the size of the cache. This call will return the amount of data that is available. It can be less than you ask if the offset and size is past the end of the file.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cache</td><td>The cache to reference data from. </td></tr>
    <tr><td class="paramname">fd</td><td>The file descriptor. Must be an open file. </td></tr>
    <tr><td class="paramname">offset</td><td>The offset in the file to reference the data to. </td></tr>
    <tr><td class="paramname">buffer</td><td>The location to reference the data from. </td></tr>
    <tr><td class="paramname">length</td><td>The length of data to reference. Can be modified to a lesser value and true is still returned so check it. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">true</td><td>The data referenced is in the cache. </td></tr>
    <tr><td class="paramname">false</td><td>The read failed and the RTL error has been set. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a80432d8deca613a70eb9fa3c8ae017c1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a80432d8deca613a70eb9fa3c8ae017c1">&#9670;&nbsp;</a></span>rtems_rtl_obj_cache_read_byval()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool rtems_rtl_obj_cache_read_byval </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structrtems__rtl__obj__cache.html">rtems_rtl_obj_cache</a> *&#160;</td>
          <td class="paramname"><em>cache</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">off_t&#160;</td>
          <td class="paramname"><em>offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Read data by value. The data is copied to the user supplied buffer.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cache</td><td>The cache to read the data from. </td></tr>
    <tr><td class="paramname">fd</td><td>The file descriptor. Must be an open file. </td></tr>
    <tr><td class="paramname">offset</td><td>The offset in the file to read the data from. </td></tr>
    <tr><td class="paramname">buffer</td><td>The location the data is written into. </td></tr>
    <tr><td class="paramname">length</td><td>The length of data to read. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">true</td><td>The data has been read from the cache. </td></tr>
    <tr><td class="paramname">false</td><td>The read failed and the RTL error has been set. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.15
</small></address>
</body>
</html>
