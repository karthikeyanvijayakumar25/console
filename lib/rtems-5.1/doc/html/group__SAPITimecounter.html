<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>RTEMS: Timecounter Support</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="rtemslogo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">RTEMS
   &#160;<span id="projectnumber">5.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#files">Files</a> &#124;
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Timecounter Support<div class="ingroups"><a class="el" href="group__RTEMSAPI.html">API</a> &raquo; <a class="el" href="group__RTEMSAPIClassic.html">Classic</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="files"></a>
Files</h2></td></tr>
<tr class="memitem:timecounter_8h"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="timecounter_8h.html">timecounter.h</a></td></tr>
<tr class="memdesc:timecounter_8h"><td class="mdescLeft">&#160;</td><td class="mdescRight">Timecounter API. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structrtems__timecounter__simple.html">rtems_timecounter_simple</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Simple timecounter to support legacy clock drivers.  <a href="structrtems__timecounter__simple.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ga509ef767dcae10363b53e02b0205398c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__SAPITimecounter.html#ga509ef767dcae10363b53e02b0205398c">RTEMS_TIMECOUNTER_QUALITY_CLOCK_DRIVER</a>&#160;&#160;&#160;100</td></tr>
<tr class="memdesc:ga509ef767dcae10363b53e02b0205398c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Timecounter quality for the clock drivers.  <a href="#ga509ef767dcae10363b53e02b0205398c">More...</a><br /></td></tr>
<tr class="separator:ga509ef767dcae10363b53e02b0205398c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:ga7d6fb7805c66742ad1e13ca1c2b0ec57"><td class="memItemLeft" align="right" valign="top"><a id="ga7d6fb7805c66742ad1e13ca1c2b0ec57"></a>
typedef void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__SAPITimecounter.html#ga7d6fb7805c66742ad1e13ca1c2b0ec57">rtems_timecounter_simple_at_tick</a>(<a class="el" href="structrtems__timecounter__simple.html">rtems_timecounter_simple</a> *tc)</td></tr>
<tr class="memdesc:ga7d6fb7805c66742ad1e13ca1c2b0ec57"><td class="mdescLeft">&#160;</td><td class="mdescRight">At tick handling done under protection of the timecounter lock. <br /></td></tr>
<tr class="separator:ga7d6fb7805c66742ad1e13ca1c2b0ec57"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf994ec0741af793766d17b42ee91a501"><td class="memItemLeft" align="right" valign="top"><a id="gaf994ec0741af793766d17b42ee91a501"></a>
typedef uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__SAPITimecounter.html#gaf994ec0741af793766d17b42ee91a501">rtems_timecounter_simple_get</a>(<a class="el" href="structrtems__timecounter__simple.html">rtems_timecounter_simple</a> *tc)</td></tr>
<tr class="memdesc:gaf994ec0741af793766d17b42ee91a501"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the current value of a simple timecounter. <br /></td></tr>
<tr class="separator:gaf994ec0741af793766d17b42ee91a501"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaaa16abdeb0f4bea8e2d535187ba33589"><td class="memItemLeft" align="right" valign="top"><a id="gaaa16abdeb0f4bea8e2d535187ba33589"></a>
typedef bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__SAPITimecounter.html#gaaa16abdeb0f4bea8e2d535187ba33589">rtems_timecounter_simple_is_pending</a>(<a class="el" href="structrtems__timecounter__simple.html">rtems_timecounter_simple</a> *tc)</td></tr>
<tr class="memdesc:gaaa16abdeb0f4bea8e2d535187ba33589"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns true if the interrupt of a simple timecounter is pending, and false otherwise. <br /></td></tr>
<tr class="separator:gaaa16abdeb0f4bea8e2d535187ba33589"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga8ddad0a976e758ae165036b4399d1470"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__RTEMSScoreBaseDefs.html#gac216239df231d5dbd15e3520b0b9313f">RTEMS_INLINE_ROUTINE</a> void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__SAPITimecounter.html#ga8ddad0a976e758ae165036b4399d1470">rtems_timecounter_install</a> (struct <a class="el" href="structtimecounter.html">timecounter</a> *tc)</td></tr>
<tr class="memdesc:ga8ddad0a976e758ae165036b4399d1470"><td class="mdescLeft">&#160;</td><td class="mdescRight">Installs the timecounter.  <a href="#ga8ddad0a976e758ae165036b4399d1470">More...</a><br /></td></tr>
<tr class="separator:ga8ddad0a976e758ae165036b4399d1470"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga05c046fc04548ac47c081919184d6a05"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__RTEMSScoreBaseDefs.html#gac216239df231d5dbd15e3520b0b9313f">RTEMS_INLINE_ROUTINE</a> void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__SAPITimecounter.html#ga05c046fc04548ac47c081919184d6a05">rtems_timecounter_tick</a> (void)</td></tr>
<tr class="memdesc:ga05c046fc04548ac47c081919184d6a05"><td class="mdescLeft">&#160;</td><td class="mdescRight">Performs a timecounter tick.  <a href="#ga05c046fc04548ac47c081919184d6a05">More...</a><br /></td></tr>
<tr class="separator:ga05c046fc04548ac47c081919184d6a05"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga45a47eaf24d71281a0e78edfec01aaf6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__SAPITimecounter.html#ga45a47eaf24d71281a0e78edfec01aaf6">rtems_timecounter_simple_install</a> (<a class="el" href="structrtems__timecounter__simple.html">rtems_timecounter_simple</a> *tc, uint32_t counter_frequency_in_hz, uint32_t counter_ticks_per_clock_tick, timecounter_get_t *get_timecount)</td></tr>
<tr class="memdesc:ga45a47eaf24d71281a0e78edfec01aaf6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes and installs a simple timecounter.  <a href="#ga45a47eaf24d71281a0e78edfec01aaf6">More...</a><br /></td></tr>
<tr class="separator:ga45a47eaf24d71281a0e78edfec01aaf6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1b96b117973dd33c364e433d022048d9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__RTEMSScoreBaseDefs.html#gac216239df231d5dbd15e3520b0b9313f">RTEMS_INLINE_ROUTINE</a> uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__SAPITimecounter.html#ga1b96b117973dd33c364e433d022048d9">rtems_timecounter_simple_scale</a> (const <a class="el" href="structrtems__timecounter__simple.html">rtems_timecounter_simple</a> *tc, uint32_t value)</td></tr>
<tr class="memdesc:ga1b96b117973dd33c364e433d022048d9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Maps a simple timecounter value into its binary frequency domain.  <a href="#ga1b96b117973dd33c364e433d022048d9">More...</a><br /></td></tr>
<tr class="separator:ga1b96b117973dd33c364e433d022048d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaaf2269728a8f160afddd1c097cee60d9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__RTEMSScoreBaseDefs.html#gac216239df231d5dbd15e3520b0b9313f">RTEMS_INLINE_ROUTINE</a> void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__SAPITimecounter.html#gaaf2269728a8f160afddd1c097cee60d9">rtems_timecounter_simple_downcounter_tick</a> (<a class="el" href="structrtems__timecounter__simple.html">rtems_timecounter_simple</a> *tc, <a class="el" href="group__SAPITimecounter.html#gaf994ec0741af793766d17b42ee91a501">rtems_timecounter_simple_get</a> get, <a class="el" href="group__SAPITimecounter.html#ga7d6fb7805c66742ad1e13ca1c2b0ec57">rtems_timecounter_simple_at_tick</a> at_tick)</td></tr>
<tr class="memdesc:gaaf2269728a8f160afddd1c097cee60d9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Performs a simple timecounter tick for downcounters.  <a href="#gaaf2269728a8f160afddd1c097cee60d9">More...</a><br /></td></tr>
<tr class="separator:gaaf2269728a8f160afddd1c097cee60d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1de2d1f9f303848bdf2642895035670c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__RTEMSScoreBaseDefs.html#gac216239df231d5dbd15e3520b0b9313f">RTEMS_INLINE_ROUTINE</a> void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__SAPITimecounter.html#ga1de2d1f9f303848bdf2642895035670c">rtems_timecounter_simple_upcounter_tick</a> (<a class="el" href="structrtems__timecounter__simple.html">rtems_timecounter_simple</a> *tc, <a class="el" href="group__SAPITimecounter.html#gaf994ec0741af793766d17b42ee91a501">rtems_timecounter_simple_get</a> get, <a class="el" href="group__SAPITimecounter.html#ga7d6fb7805c66742ad1e13ca1c2b0ec57">rtems_timecounter_simple_at_tick</a> at_tick)</td></tr>
<tr class="memdesc:ga1de2d1f9f303848bdf2642895035670c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Performs a simple timecounter tick for upcounters.  <a href="#ga1de2d1f9f303848bdf2642895035670c">More...</a><br /></td></tr>
<tr class="separator:ga1de2d1f9f303848bdf2642895035670c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga73145202e921ffdda990060007022c56"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__RTEMSScoreBaseDefs.html#gac216239df231d5dbd15e3520b0b9313f">RTEMS_INLINE_ROUTINE</a> uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__SAPITimecounter.html#ga73145202e921ffdda990060007022c56">rtems_timecounter_simple_downcounter_get</a> (struct <a class="el" href="structtimecounter.html">timecounter</a> *tc_base, <a class="el" href="group__SAPITimecounter.html#gaf994ec0741af793766d17b42ee91a501">rtems_timecounter_simple_get</a> get, <a class="el" href="group__SAPITimecounter.html#gaaa16abdeb0f4bea8e2d535187ba33589">rtems_timecounter_simple_is_pending</a> is_pending)</td></tr>
<tr class="memdesc:ga73145202e921ffdda990060007022c56"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the simple timecounter value mapped to its binary frequency domain for downcounters.  <a href="#ga73145202e921ffdda990060007022c56">More...</a><br /></td></tr>
<tr class="separator:ga73145202e921ffdda990060007022c56"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0f1dc14b096be72170ec9d854c8bb79d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__RTEMSScoreBaseDefs.html#gac216239df231d5dbd15e3520b0b9313f">RTEMS_INLINE_ROUTINE</a> uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__SAPITimecounter.html#ga0f1dc14b096be72170ec9d854c8bb79d">rtems_timecounter_simple_upcounter_get</a> (struct <a class="el" href="structtimecounter.html">timecounter</a> *tc_base, <a class="el" href="group__SAPITimecounter.html#gaf994ec0741af793766d17b42ee91a501">rtems_timecounter_simple_get</a> get, <a class="el" href="group__SAPITimecounter.html#gaaa16abdeb0f4bea8e2d535187ba33589">rtems_timecounter_simple_is_pending</a> is_pending)</td></tr>
<tr class="memdesc:ga0f1dc14b096be72170ec9d854c8bb79d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the simple timecounter value mapped to its binary frequency domain for upcounters.  <a href="#ga0f1dc14b096be72170ec9d854c8bb79d">More...</a><br /></td></tr>
<tr class="separator:ga0f1dc14b096be72170ec9d854c8bb79d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="ga509ef767dcae10363b53e02b0205398c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga509ef767dcae10363b53e02b0205398c">&#9670;&nbsp;</a></span>RTEMS_TIMECOUNTER_QUALITY_CLOCK_DRIVER</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RTEMS_TIMECOUNTER_QUALITY_CLOCK_DRIVER&#160;&#160;&#160;100</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Timecounter quality for the clock drivers. </p>
<p>Timecounter with higher quality value are used in favour of those with lower quality value. </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga8ddad0a976e758ae165036b4399d1470"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8ddad0a976e758ae165036b4399d1470">&#9670;&nbsp;</a></span>rtems_timecounter_install()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__RTEMSScoreBaseDefs.html#gac216239df231d5dbd15e3520b0b9313f">RTEMS_INLINE_ROUTINE</a> void rtems_timecounter_install </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structtimecounter.html">timecounter</a> *&#160;</td>
          <td class="paramname"><em>tc</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Installs the timecounter. </p>
<p>The timecounter structure must contain valid values in the fields tc_get_timecount, tc_counter_mask, tc_frequency and tc_quality. All other fields must be zero initialized.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tc</td><td>The timecounter.</td></tr>
  </table>
  </dd>
</dl>
<p>Below is an exemplary code snippet that shows the adjustable parameters and the following call of the install routine.</p>
<div class="fragment"><div class="line"><span class="keyword">struct </span><a class="code" href="structtimecounter.html">timecounter</a> tc;</div><div class="line"></div><div class="line">uint32_t get_timecount( <span class="keyword">struct</span> <a class="code" href="structtimecounter.html">timecounter</a> *tc )</div><div class="line">{</div><div class="line">  <span class="keywordflow">return</span> some_free_running_counter;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">void</span> install( <span class="keywordtype">void</span> )</div><div class="line">{</div><div class="line">  tc.tc_get_timecount = get_timecount;</div><div class="line">  tc.tc_counter_mask = 0xffffffff;</div><div class="line">  tc.tc_frequency = 123456;</div><div class="line">  tc.tc_quality = <a class="code" href="group__SAPITimecounter.html#ga509ef767dcae10363b53e02b0205398c">RTEMS_TIMECOUNTER_QUALITY_CLOCK_DRIVER</a>;</div><div class="line">  <a class="code" href="group__SAPITimecounter.html#ga8ddad0a976e758ae165036b4399d1470">rtems_timecounter_install</a>( &amp;tc );</div><div class="line">}</div></div><!-- fragment --> 
</div>
</div>
<a id="ga73145202e921ffdda990060007022c56"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga73145202e921ffdda990060007022c56">&#9670;&nbsp;</a></span>rtems_timecounter_simple_downcounter_get()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__RTEMSScoreBaseDefs.html#gac216239df231d5dbd15e3520b0b9313f">RTEMS_INLINE_ROUTINE</a> uint32_t rtems_timecounter_simple_downcounter_get </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structtimecounter.html">timecounter</a> *&#160;</td>
          <td class="paramname"><em>tc_base</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__SAPITimecounter.html#gaf994ec0741af793766d17b42ee91a501">rtems_timecounter_simple_get</a>&#160;</td>
          <td class="paramname"><em>get</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__SAPITimecounter.html#gaaa16abdeb0f4bea8e2d535187ba33589">rtems_timecounter_simple_is_pending</a>&#160;</td>
          <td class="paramname"><em>is_pending</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets the simple timecounter value mapped to its binary frequency domain for downcounters. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">tc</td><td>The simple timecounter. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">get</td><td>The method to get the value of the simple timecounter. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">is_pending</td><td>The method which indicates if the interrupt of the simple timecounter is pending. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gaaf2269728a8f160afddd1c097cee60d9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaaf2269728a8f160afddd1c097cee60d9">&#9670;&nbsp;</a></span>rtems_timecounter_simple_downcounter_tick()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__RTEMSScoreBaseDefs.html#gac216239df231d5dbd15e3520b0b9313f">RTEMS_INLINE_ROUTINE</a> void rtems_timecounter_simple_downcounter_tick </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structrtems__timecounter__simple.html">rtems_timecounter_simple</a> *&#160;</td>
          <td class="paramname"><em>tc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__SAPITimecounter.html#gaf994ec0741af793766d17b42ee91a501">rtems_timecounter_simple_get</a>&#160;</td>
          <td class="paramname"><em>get</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__SAPITimecounter.html#ga7d6fb7805c66742ad1e13ca1c2b0ec57">rtems_timecounter_simple_at_tick</a>&#160;</td>
          <td class="paramname"><em>at_tick</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Performs a simple timecounter tick for downcounters. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">tc</td><td>The simple timecounter. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">get</td><td>The method to get the value of the simple timecounter. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">at_tick</td><td>The method to perform work under timecounter lock protection at this tick, e.g. clear a pending flag. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga45a47eaf24d71281a0e78edfec01aaf6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga45a47eaf24d71281a0e78edfec01aaf6">&#9670;&nbsp;</a></span>rtems_timecounter_simple_install()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rtems_timecounter_simple_install </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structrtems__timecounter__simple.html">rtems_timecounter_simple</a> *&#160;</td>
          <td class="paramname"><em>tc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>counter_frequency_in_hz</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>counter_ticks_per_clock_tick</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">timecounter_get_t *&#160;</td>
          <td class="paramname"><em>get_timecount</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes and installs a simple timecounter. </p>
<p>A simple timecounter can be used if the hardware provides no free running counter. A periodic hardware counter must be provided. The counter period must be synchronous to the clock tick. The counter ticks per clock tick is scaled up to the next power of two.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">tc</td><td>Zero initialized simple timecounter. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">counter_frequency_in_hz</td><td>The hardware counter frequency in Hz. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">counter_ticks_per_clock_tick</td><td>The hardware counter ticks per clock tick. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">get_timecount</td><td>The method to get the current time count.</td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="timecounter_8h.html">rtems/timecounter.h</a>&gt;</span></div><div class="line"></div><div class="line"><span class="keyword">static</span> <a class="code" href="structrtems__timecounter__simple.html">rtems_timecounter_simple</a> some_tc;</div><div class="line"></div><div class="line"><span class="keyword">static</span> uint32_t some_tc_get( <a class="code" href="structrtems__timecounter__simple.html">rtems_timecounter_simple</a> *tc )</div><div class="line">{</div><div class="line">  <span class="keywordflow">return</span> some.value;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keyword">static</span> <span class="keywordtype">bool</span> some_tc_is_pending( <a class="code" href="structrtems__timecounter__simple.html">rtems_timecounter_simple</a> *tc )</div><div class="line">{</div><div class="line">  <span class="keywordflow">return</span> some.is_pending;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keyword">static</span> uint32_t some_tc_get_timecount( <span class="keyword">struct</span> <a class="code" href="structtimecounter.html">timecounter</a> *tc )</div><div class="line">{</div><div class="line">  <span class="keywordflow">return</span> <a class="code" href="group__SAPITimecounter.html#ga73145202e921ffdda990060007022c56">rtems_timecounter_simple_downcounter_get</a>(</div><div class="line">    tc,</div><div class="line">    some_tc_get,</div><div class="line">    some_tc_is_pending</div><div class="line">  );</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> some_tc_tick( <span class="keywordtype">void</span> )</div><div class="line">{</div><div class="line">  <a class="code" href="group__SAPITimecounter.html#gaaf2269728a8f160afddd1c097cee60d9">rtems_timecounter_simple_downcounter_tick</a>( &amp;some_tc, some_tc_get );</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">void</span> some_tc_init( <span class="keywordtype">void</span> )</div><div class="line">{</div><div class="line">  uint64_t us_per_tick;</div><div class="line">  uint32_t counter_frequency_in_hz;</div><div class="line">  uint32_t counter_ticks_per_clock_tick;</div><div class="line"></div><div class="line">  us_per_tick = rtems_configuration_get_microseconds_per_tick();</div><div class="line">  counter_frequency_in_hz = some_tc_get_frequency();</div><div class="line">  counter_ticks_per_clock_tick =</div><div class="line">    (uint32_t) ( counter_frequency_in_hz * us_per_tick ) / 1000000;</div><div class="line"></div><div class="line">  some_tc_init_hardware( counter_ticks_per_clock_tick );</div><div class="line">  some_tc_init_clock_tick_interrupt( some_tc_tick );</div><div class="line"></div><div class="line">  <a class="code" href="group__SAPITimecounter.html#ga45a47eaf24d71281a0e78edfec01aaf6">rtems_timecounter_simple_install</a>(</div><div class="line">    &amp;some_tc,</div><div class="line">    counter_frequency_in_hz,</div><div class="line">    counter_ticks_per_clock_tick,</div><div class="line">    some_tc_get_timecount</div><div class="line">  );</div><div class="line">}</div></div><!-- fragment --><dl class="section see"><dt>See also</dt><dd><a class="el" href="group__SAPITimecounter.html#ga73145202e921ffdda990060007022c56" title="Gets the simple timecounter value mapped to its binary frequency domain for downcounters.">rtems_timecounter_simple_downcounter_get()</a>, <a class="el" href="group__SAPITimecounter.html#gaaf2269728a8f160afddd1c097cee60d9" title="Performs a simple timecounter tick for downcounters.">rtems_timecounter_simple_downcounter_tick()</a>, <a class="el" href="group__SAPITimecounter.html#ga0f1dc14b096be72170ec9d854c8bb79d" title="Gets the simple timecounter value mapped to its binary frequency domain for upcounters.">rtems_timecounter_simple_upcounter_get()</a> and <a class="el" href="group__SAPITimecounter.html#ga1de2d1f9f303848bdf2642895035670c" title="Performs a simple timecounter tick for upcounters.">rtems_timecounter_simple_upcounter_tick()</a>. </dd></dl>

</div>
</div>
<a id="ga1b96b117973dd33c364e433d022048d9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga1b96b117973dd33c364e433d022048d9">&#9670;&nbsp;</a></span>rtems_timecounter_simple_scale()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__RTEMSScoreBaseDefs.html#gac216239df231d5dbd15e3520b0b9313f">RTEMS_INLINE_ROUTINE</a> uint32_t rtems_timecounter_simple_scale </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structrtems__timecounter__simple.html">rtems_timecounter_simple</a> *&#160;</td>
          <td class="paramname"><em>tc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Maps a simple timecounter value into its binary frequency domain. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">tc</td><td>The simple timecounter. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">value</td><td>The value of the simple timecounter.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The scaled value. </dd></dl>

</div>
</div>
<a id="ga0f1dc14b096be72170ec9d854c8bb79d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga0f1dc14b096be72170ec9d854c8bb79d">&#9670;&nbsp;</a></span>rtems_timecounter_simple_upcounter_get()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__RTEMSScoreBaseDefs.html#gac216239df231d5dbd15e3520b0b9313f">RTEMS_INLINE_ROUTINE</a> uint32_t rtems_timecounter_simple_upcounter_get </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structtimecounter.html">timecounter</a> *&#160;</td>
          <td class="paramname"><em>tc_base</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__SAPITimecounter.html#gaf994ec0741af793766d17b42ee91a501">rtems_timecounter_simple_get</a>&#160;</td>
          <td class="paramname"><em>get</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__SAPITimecounter.html#gaaa16abdeb0f4bea8e2d535187ba33589">rtems_timecounter_simple_is_pending</a>&#160;</td>
          <td class="paramname"><em>is_pending</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets the simple timecounter value mapped to its binary frequency domain for upcounters. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">tc</td><td>The simple timecounter. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">get</td><td>The method to get the value of the simple timecounter. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">is_pending</td><td>The method which indicates if the interrupt of the simple timecounter is pending. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga1de2d1f9f303848bdf2642895035670c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga1de2d1f9f303848bdf2642895035670c">&#9670;&nbsp;</a></span>rtems_timecounter_simple_upcounter_tick()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__RTEMSScoreBaseDefs.html#gac216239df231d5dbd15e3520b0b9313f">RTEMS_INLINE_ROUTINE</a> void rtems_timecounter_simple_upcounter_tick </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structrtems__timecounter__simple.html">rtems_timecounter_simple</a> *&#160;</td>
          <td class="paramname"><em>tc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__SAPITimecounter.html#gaf994ec0741af793766d17b42ee91a501">rtems_timecounter_simple_get</a>&#160;</td>
          <td class="paramname"><em>get</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__SAPITimecounter.html#ga7d6fb7805c66742ad1e13ca1c2b0ec57">rtems_timecounter_simple_at_tick</a>&#160;</td>
          <td class="paramname"><em>at_tick</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Performs a simple timecounter tick for upcounters. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">tc</td><td>The simple timecounter. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">get</td><td>The method to get the value of the simple timecounter. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">at_tick</td><td>The method to perform work under timecounter lock protection at this tick, e.g. clear a pending flag. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga05c046fc04548ac47c081919184d6a05"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga05c046fc04548ac47c081919184d6a05">&#9670;&nbsp;</a></span>rtems_timecounter_tick()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__RTEMSScoreBaseDefs.html#gac216239df231d5dbd15e3520b0b9313f">RTEMS_INLINE_ROUTINE</a> void rtems_timecounter_tick </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Performs a timecounter tick. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.15
</small></address>
</body>
</html>
