<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>RTEMS: Free-Running Counter and Busy Wait Delay</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="rtemslogo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">RTEMS
   &#160;<span id="projectnumber">5.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#files">Files</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Free-Running Counter and Busy Wait Delay<div class="ingroups"><a class="el" href="group__RTEMSAPI.html">API</a> &raquo; <a class="el" href="group__RTEMSAPIClassic.html">Classic</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Free-running counter and busy wait delay functions.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="files"></a>
Files</h2></td></tr>
<tr class="memitem:counter_8h"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="counter_8h.html">counter.h</a></td></tr>
<tr class="memdesc:counter_8h"><td class="mdescLeft">&#160;</td><td class="mdescRight">Free-Running Counter and Busy Wait Delay API. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:gafda796220404920ac0af841d9f555262"><td class="memItemLeft" align="right" valign="top"><a id="gafda796220404920ac0af841d9f555262"></a>
typedef <a class="el" href="no__cpu_2include_2rtems_2score_2cpu_8h.html#a67f8550aad58bccb6fcb4589894444ad">CPU_Counter_ticks</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ClassicCounter.html#gafda796220404920ac0af841d9f555262">rtems_counter_ticks</a></td></tr>
<tr class="memdesc:gafda796220404920ac0af841d9f555262"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unsigned integer type for counter values. <br /></td></tr>
<tr class="separator:gafda796220404920ac0af841d9f555262"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga3e50a042e60bfcafdff5dbd46cad8947"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ClassicCounter.html#ga3e50a042e60bfcafdff5dbd46cad8947">rtems_counter_ticks_to_nanoseconds</a> (<a class="el" href="group__ClassicCounter.html#gafda796220404920ac0af841d9f555262">rtems_counter_ticks</a> ticks)</td></tr>
<tr class="memdesc:ga3e50a042e60bfcafdff5dbd46cad8947"><td class="mdescLeft">&#160;</td><td class="mdescRight">Converts counter ticks into nanoseconds.  <a href="#ga3e50a042e60bfcafdff5dbd46cad8947">More...</a><br /></td></tr>
<tr class="separator:ga3e50a042e60bfcafdff5dbd46cad8947"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9a475dea5b0d7689a94f0806cf21f396"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__ClassicCounter.html#gafda796220404920ac0af841d9f555262">rtems_counter_ticks</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ClassicCounter.html#ga9a475dea5b0d7689a94f0806cf21f396">rtems_counter_nanoseconds_to_ticks</a> (uint32_t nanoseconds)</td></tr>
<tr class="memdesc:ga9a475dea5b0d7689a94f0806cf21f396"><td class="mdescLeft">&#160;</td><td class="mdescRight">Converts nanoseconds into counter ticks.  <a href="#ga9a475dea5b0d7689a94f0806cf21f396">More...</a><br /></td></tr>
<tr class="separator:ga9a475dea5b0d7689a94f0806cf21f396"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga57c10408f9570d199408745197f014de"><td class="memItemLeft" align="right" valign="top">int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ClassicCounter.html#ga57c10408f9570d199408745197f014de">rtems_counter_ticks_to_sbintime</a> (<a class="el" href="group__ClassicCounter.html#gafda796220404920ac0af841d9f555262">rtems_counter_ticks</a> ticks)</td></tr>
<tr class="memdesc:ga57c10408f9570d199408745197f014de"><td class="mdescLeft">&#160;</td><td class="mdescRight">Converts counter ticks into signed binary time (sbintime_t).  <a href="#ga57c10408f9570d199408745197f014de">More...</a><br /></td></tr>
<tr class="separator:ga57c10408f9570d199408745197f014de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2cc1e89d4abdd736de597533ee747187"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__ClassicCounter.html#gafda796220404920ac0af841d9f555262">rtems_counter_ticks</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ClassicCounter.html#ga2cc1e89d4abdd736de597533ee747187">rtems_counter_sbintime_to_ticks</a> (int64_t sbt)</td></tr>
<tr class="memdesc:ga2cc1e89d4abdd736de597533ee747187"><td class="mdescLeft">&#160;</td><td class="mdescRight">Converts signed binary time (sbintime_t) into counter ticks.  <a href="#ga2cc1e89d4abdd736de597533ee747187">More...</a><br /></td></tr>
<tr class="separator:ga2cc1e89d4abdd736de597533ee747187"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac05da1fad44ca8d492d00b3890b80415"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ClassicCounter.html#gac05da1fad44ca8d492d00b3890b80415">rtems_counter_initialize_converter</a> (uint32_t frequency)</td></tr>
<tr class="memdesc:gac05da1fad44ca8d492d00b3890b80415"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes the counter ticks to/from nanoseconds converter functions.  <a href="#gac05da1fad44ca8d492d00b3890b80415">More...</a><br /></td></tr>
<tr class="separator:gac05da1fad44ca8d492d00b3890b80415"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae1a4a949021ae54cf5d1c267fe0f9493"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ClassicCounter.html#gae1a4a949021ae54cf5d1c267fe0f9493">rtems_counter_delay_ticks</a> (<a class="el" href="group__ClassicCounter.html#gafda796220404920ac0af841d9f555262">rtems_counter_ticks</a> ticks)</td></tr>
<tr class="memdesc:gae1a4a949021ae54cf5d1c267fe0f9493"><td class="mdescLeft">&#160;</td><td class="mdescRight">Busy wait for some counter ticks.  <a href="#gae1a4a949021ae54cf5d1c267fe0f9493">More...</a><br /></td></tr>
<tr class="separator:gae1a4a949021ae54cf5d1c267fe0f9493"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa8fddf3e4ad1abb10170e61db04525ae"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ClassicCounter.html#gaa8fddf3e4ad1abb10170e61db04525ae">rtems_counter_delay_nanoseconds</a> (uint32_t nanoseconds)</td></tr>
<tr class="memdesc:gaa8fddf3e4ad1abb10170e61db04525ae"><td class="mdescLeft">&#160;</td><td class="mdescRight">Busy wait for some nanoseconds.  <a href="#gaa8fddf3e4ad1abb10170e61db04525ae">More...</a><br /></td></tr>
<tr class="separator:gaa8fddf3e4ad1abb10170e61db04525ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Free-running counter and busy wait delay functions. </p>
<p>The RTEMS counter is some free-running counter. It ticks usually with a frequency close to the CPU or system bus clock.</p>
<p>The counter can be used in case the overhead of the <a class="el" href="group__ClassicClock.html#ga0e2b9de0054d75a0820203f00e152aa7" title="Returns the system uptime in nanoseconds.">rtems_clock_get_uptime_nanoseconds()</a> is too high. The step from counter ticks to/from nanoseconds is explicit in this API unlike to <a class="el" href="group__ClassicClock.html#ga0e2b9de0054d75a0820203f00e152aa7" title="Returns the system uptime in nanoseconds.">rtems_clock_get_uptime_nanoseconds()</a> which performs the conversion on each invocation.</p>
<p>This counter works without a clock driver and during system initialization.</p>
<p>The counter can be used to profile low-level operations like SMP locks or interrupt disabled critical sections. The counter can act also as an entropy source for a random number generator.</p>
<p>The period of the counter depends on the actual hardware. </p>
<h2 class="groupheader">Function Documentation</h2>
<a id="gaa8fddf3e4ad1abb10170e61db04525ae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa8fddf3e4ad1abb10170e61db04525ae">&#9670;&nbsp;</a></span>rtems_counter_delay_nanoseconds()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rtems_counter_delay_nanoseconds </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>nanoseconds</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Busy wait for some nanoseconds. </p>
<p>This function does not disable interrupts. Thus task switches and interrupts can interfere with this busy wait may prolong the delay. This function busy waits at least the specified time. Due to some overhead the actual delay may be longer.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">nanoseconds</td><td>The minimum busy wait time in nanoseconds. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gae1a4a949021ae54cf5d1c267fe0f9493"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae1a4a949021ae54cf5d1c267fe0f9493">&#9670;&nbsp;</a></span>rtems_counter_delay_ticks()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rtems_counter_delay_ticks </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__ClassicCounter.html#gafda796220404920ac0af841d9f555262">rtems_counter_ticks</a>&#160;</td>
          <td class="paramname"><em>ticks</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Busy wait for some counter ticks. </p>
<p>This function does not disable interrupts. Thus task switches and interrupts can interfere with this busy wait may prolong the delay. This function busy waits at least the specified time. Due to some overhead the actual delay may be longer.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ticks</td><td>The minimum busy wait time in counter ticks. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gac05da1fad44ca8d492d00b3890b80415"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac05da1fad44ca8d492d00b3890b80415">&#9670;&nbsp;</a></span>rtems_counter_initialize_converter()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rtems_counter_initialize_converter </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>frequency</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes the counter ticks to/from nanoseconds converter functions. </p>
<p>This function must be used to initialize the <a class="el" href="group__ClassicCounter.html#ga3e50a042e60bfcafdff5dbd46cad8947" title="Converts counter ticks into nanoseconds.">rtems_counter_ticks_to_nanoseconds()</a> and <a class="el" href="group__ClassicCounter.html#ga9a475dea5b0d7689a94f0806cf21f396" title="Converts nanoseconds into counter ticks.">rtems_counter_nanoseconds_to_ticks()</a> functions. It should be called during system initialization by the board support package.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">frequency</td><td>The current counter frequency in Hz. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga9a475dea5b0d7689a94f0806cf21f396"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga9a475dea5b0d7689a94f0806cf21f396">&#9670;&nbsp;</a></span>rtems_counter_nanoseconds_to_ticks()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__ClassicCounter.html#gafda796220404920ac0af841d9f555262">rtems_counter_ticks</a> rtems_counter_nanoseconds_to_ticks </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>nanoseconds</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Converts nanoseconds into counter ticks. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">nanoseconds</td><td>The nanoseconds value to convert.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The counter ticks value corresponding to the nanoseconds value. The value is rounded up. </dd></dl>

</div>
</div>
<a id="ga2cc1e89d4abdd736de597533ee747187"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga2cc1e89d4abdd736de597533ee747187">&#9670;&nbsp;</a></span>rtems_counter_sbintime_to_ticks()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__ClassicCounter.html#gafda796220404920ac0af841d9f555262">rtems_counter_ticks</a> rtems_counter_sbintime_to_ticks </td>
          <td>(</td>
          <td class="paramtype">int64_t&#160;</td>
          <td class="paramname"><em>sbt</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Converts signed binary time (sbintime_t) into counter ticks. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">sbt</td><td>The signed binary time value to convert.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The counter ticks value corresponding to the nanoseconds value. The value is rounded up. </dd></dl>

</div>
</div>
<a id="ga3e50a042e60bfcafdff5dbd46cad8947"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga3e50a042e60bfcafdff5dbd46cad8947">&#9670;&nbsp;</a></span>rtems_counter_ticks_to_nanoseconds()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t rtems_counter_ticks_to_nanoseconds </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__ClassicCounter.html#gafda796220404920ac0af841d9f555262">rtems_counter_ticks</a>&#160;</td>
          <td class="paramname"><em>ticks</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Converts counter ticks into nanoseconds. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ticks</td><td>The counter ticks value to convert.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The nanoseconds value corresponding to the counter ticks. The value is rounded up. </dd></dl>

</div>
</div>
<a id="ga57c10408f9570d199408745197f014de"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga57c10408f9570d199408745197f014de">&#9670;&nbsp;</a></span>rtems_counter_ticks_to_sbintime()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int64_t rtems_counter_ticks_to_sbintime </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__ClassicCounter.html#gafda796220404920ac0af841d9f555262">rtems_counter_ticks</a>&#160;</td>
          <td class="paramname"><em>ticks</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Converts counter ticks into signed binary time (sbintime_t). </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ticks</td><td>The counter ticks value to convert.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The signed binary time value corresponding to the counter ticks value. The value is rounded up. </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.15
</small></address>
</body>
</html>
