<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>RTEMS: Processor Dependent Interrupt Management</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="rtemslogo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">RTEMS
   &#160;<span id="projectnumber">5.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Processor Dependent Interrupt Management<div class="ingroups"><a class="el" href="group__RTEMSInternal.html">Internal</a> &raquo; <a class="el" href="group__RTEMSScore.html">SuperCore</a> &raquo; <a class="el" href="group__RTEMSScoreCPU.html">CPU Architecture Support</a> &raquo; <a class="el" href="group__RTEMSScoreCPUExample.html">Example</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<p>RTEMS supports a software managed interrupt stack. The interrupt stacks are statically allocated by &lt;<a class="el" href="confdefs_8h.html" title="Evaluate Configuration Options.">rtems/confdefs.h</a>&gt; and the switch is performed by hardware or the interrupt processing code. These variables contain pointers to the lowest and highest addresses in the chunk of memory allocated for the interrupt stack. Since it is unknown whether the stack grows up or down (in general), this gives the CPU dependent code the option of picking the version it wants to use.</p>
<p>Port Specific Information:</p>
<p>XXX document implementation including references if appropriate</p>
<p>The following defines the number of bits actually used in the interrupt field of the task mode. How those bits map to the CPU interrupt levels is defined by the routine <a class="el" href="group__RTEMSScoreCPUARM.html#ga43820ba3d51d7a699c22fce8cac93ef1">_CPU_ISR_Set_level</a>.</p>
<p>Port Specific Information:</p>
<p>XXX document implementation including references if appropriate</p>
<p>This defines the number of entries in the _ISR_Vector_table managed by RTEMS in case CPU_SIMPLE_VECTORED_INTERRUPTS is defined to TRUE. It must be a compile-time constant.</p>
<p>It must be undefined in case CPU_SIMPLE_VECTORED_INTERRUPTS is defined to FALSE.</p>
<p>This defines the highest interrupt vector number for this port in case CPU_SIMPLE_VECTORED_INTERRUPTS is defined to TRUE. It must be less than CPU_INTERRUPT_NUMBER_OF_VECTORS. It may be not a compile-time constant.</p>
<p>It must be undefined in case CPU_SIMPLE_VECTORED_INTERRUPTS is defined to FALSE.</p>
<p>This is defined if the port has a special way to report the ISR nesting level. Most ports maintain the variable <em>_ISR_Nest_level</em>.</p>
<p>Support routine to initialize the RTEMS vector table after it is allocated.</p>
<p>Port Specific Information:</p>
<p>XXX document implementation including references if appropriate</p>
<p>Disable all interrupts for an RTEMS critical section. The previous level is returned in <em>_isr_cookie</em>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">_isr_cookie</td><td>will contain the previous level cookie</td></tr>
  </table>
  </dd>
</dl>
<p>Port Specific Information:</p>
<p>XXX document implementation including references if appropriate</p>
<p>Enable interrupts to the previous level (returned by _CPU_ISR_Disable). This indicates the end of an RTEMS critical section. The parameter <em>_isr_cookie</em> is not modified.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">_isr_cookie</td><td>contain the previous level cookie</td></tr>
  </table>
  </dd>
</dl>
<p>Port Specific Information:</p>
<p>XXX document implementation including references if appropriate</p>
<p>This temporarily restores the interrupt to <em>_isr_cookie</em> before immediately disabling them again. This is used to divide long RTEMS critical sections into two or more parts. The parameter <em>_isr_cookie</em> is not modified.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">_isr_cookie</td><td>contain the previous level cookie</td></tr>
  </table>
  </dd>
</dl>
<p>Port Specific Information:</p>
<p>XXX document implementation including references if appropriate</p>
<p>This routine and <a class="el" href="group__RTEMSScoreCPUARM.html#ga1d9dcab9170d532b6634a5620385adbd">_CPU_ISR_Get_level</a> Map the interrupt level in task mode onto the hardware that the CPU actually provides. Currently, interrupt levels which do not map onto the CPU in a generic fashion are undefined. Someday, it would be nice if these were "mapped" by the application via a callout. For example, m68k has 8 levels 0 - 7, levels 8 - 255 would be available for bsp/application specific meaning. This could be used to manage a programmable interrupt controller via the rtems_task_mode directive.</p>
<p>Port Specific Information:</p>
<p>XXX document implementation including references if appropriate</p>
<p>Return the current interrupt disable level for this task in the format used by the interrupt level portion of the task mode.</p>
<p>NOTE: This routine usually must be implemented as a subroutine.</p>
<p>Port Specific Information:</p>
<p>XXX document implementation including references if appropriate</p>
<p>This routine installs a "raw" interrupt handler directly into the processor's vector table.</p>
<p>This routine is not used by architecture-independent code and thus optional.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">vector</td><td>is the vector number </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">new_handler</td><td>is the raw ISR handler to install </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">old_handler</td><td>is the previously installed ISR Handler</td></tr>
  </table>
  </dd>
</dl>
<p>Port Specific Information:</p>
<p>XXX document implementation including references if appropriate</p>
<p>This routine installs an interrupt vector.</p>
<p>This routine is only used by architecture-independent code if CPU_SIMPLE_VECTORED_INTERRUPTS == TRUE, otherwise it is optional.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">vector</td><td>is the vector number </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">new_handler</td><td>is the RTEMS ISR handler to install </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">old_handler</td><td>is the previously installed ISR Handler</td></tr>
  </table>
  </dd>
</dl>
<p>Port Specific Information:</p>
<p>XXX document implementation including references if appropriate </p>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.15
</small></address>
</body>
</html>
