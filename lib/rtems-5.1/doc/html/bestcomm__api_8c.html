<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>RTEMS: bsps/powerpc/gen5200/bestcomm/bestcomm_api.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="rtemslogo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">RTEMS
   &#160;<span id="projectnumber">5.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_49b8d5997469a34e9a523535602b7e1a.html">bsps</a></li><li class="navelem"><a class="el" href="dir_46af6cd0840f3f74e172e4a405a32223.html">powerpc</a></li><li class="navelem"><a class="el" href="dir_b906e655a8c29ef13667df83e5354eb3.html">gen5200</a></li><li class="navelem"><a class="el" href="dir_ee5522723bcd6e5765d22930d7318753.html">bestcomm</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">bestcomm_api.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;bsp/bestcomm/include/ppctypes.h&gt;</code><br />
<code>#include &lt;<a class="el" href="bestcomm__api_8h_source.html">bsp/bestcomm/bestcomm_api.h</a>&gt;</code><br />
<code>#include &lt;bsp/bestcomm/task_api/bestcomm_cntrl.h&gt;</code><br />
<code>#include &lt;bsp/bestcomm/task_api/bestcomm_api_mem.h&gt;</code><br />
<code>#include &lt;bsp/bestcomm/task_api/tasksetup_bdtable.h&gt;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a1fe2b4c534707dc2ffa76134dbdd18a6"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bestcomm__api_8c.html#a1fe2b4c534707dc2ffa76134dbdd18a6">TaskVersion</a> (void)</td></tr>
<tr class="memdesc:a1fe2b4c534707dc2ffa76134dbdd18a6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get a string containing API version information.  <a href="#a1fe2b4c534707dc2ffa76134dbdd18a6">More...</a><br /></td></tr>
<tr class="separator:a1fe2b4c534707dc2ffa76134dbdd18a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae914efa36122a772ac8ad8848ec0812a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bestcomm__api_8c.html#ae914efa36122a772ac8ad8848ec0812a">TasksInitAPI</a> (uint8 *MBarRef)</td></tr>
<tr class="memdesc:ae914efa36122a772ac8ad8848ec0812a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the API.  <a href="#ae914efa36122a772ac8ad8848ec0812a">More...</a><br /></td></tr>
<tr class="separator:ae914efa36122a772ac8ad8848ec0812a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a218e71b4e0b0e6e1fdbda806bdf937f7"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bestcomm__api_8c.html#a218e71b4e0b0e6e1fdbda806bdf937f7">TasksInitAPI_VM</a> (uint8 *MBarRef, uint8 *MBarPhys)</td></tr>
<tr class="memdesc:a218e71b4e0b0e6e1fdbda806bdf937f7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the API when virtual memory is used.  <a href="#a218e71b4e0b0e6e1fdbda806bdf937f7">More...</a><br /></td></tr>
<tr class="separator:a218e71b4e0b0e6e1fdbda806bdf937f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af0debe7b5957175c27dd80de6359d264"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bestcomm__api_8c.html#af0debe7b5957175c27dd80de6359d264">TasksAttachImage</a> (<a class="el" href="structsdma__register__set.html">sdma_regs</a> *sdma)</td></tr>
<tr class="memdesc:af0debe7b5957175c27dd80de6359d264"><td class="mdescLeft">&#160;</td><td class="mdescRight"><em>Deprecated</em>  <a href="#af0debe7b5957175c27dd80de6359d264">More...</a><br /></td></tr>
<tr class="separator:af0debe7b5957175c27dd80de6359d264"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b48145c6c0418944c8226075ba97e7a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bestcomm__api_8c.html#a2b48145c6c0418944c8226075ba97e7a">TaskStart</a> (TaskId taskId, uint32 autoStartEnable, TaskId autoStartTask, uint32 intrEnable)</td></tr>
<tr class="memdesc:a2b48145c6c0418944c8226075ba97e7a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start an initialized task running.  <a href="#a2b48145c6c0418944c8226075ba97e7a">More...</a><br /></td></tr>
<tr class="separator:a2b48145c6c0418944c8226075ba97e7a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a50a0e8468075caefc2c8594375e095fd"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bestcomm__api_8c.html#a50a0e8468075caefc2c8594375e095fd">TaskStop</a> (TaskId taskId)</td></tr>
<tr class="memdesc:a50a0e8468075caefc2c8594375e095fd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stop a running task.  <a href="#a50a0e8468075caefc2c8594375e095fd">More...</a><br /></td></tr>
<tr class="separator:a50a0e8468075caefc2c8594375e095fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4117e7e78d83c86e3430384f56004629"><td class="memItemLeft" align="right" valign="top">BDIdx&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bestcomm__api_8c.html#a4117e7e78d83c86e3430384f56004629">TaskBDAssign</a> (TaskId taskId, void *buffer0, void *buffer1, int <a class="el" href="sun4u_2tte_8h.html#a245260f6f74972558f61b85227df5aae">size</a>, uint32 bdFlags)</td></tr>
<tr class="memdesc:a4117e7e78d83c86e3430384f56004629"><td class="mdescLeft">&#160;</td><td class="mdescRight">Assign a buffer to a buffer descriptor.  <a href="#a4117e7e78d83c86e3430384f56004629">More...</a><br /></td></tr>
<tr class="separator:a4117e7e78d83c86e3430384f56004629"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adaf12022da391fada14f3a5621da86a3"><td class="memItemLeft" align="right" valign="top">BDIdx&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bestcomm__api_8c.html#adaf12022da391fada14f3a5621da86a3">TaskBDRelease</a> (TaskId taskId)</td></tr>
<tr class="memdesc:adaf12022da391fada14f3a5621da86a3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Release last buffer in the buffer descriptor ring.  <a href="#adaf12022da391fada14f3a5621da86a3">More...</a><br /></td></tr>
<tr class="separator:adaf12022da391fada14f3a5621da86a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3d74620a816775576cfa503865033827"><td class="memItemLeft" align="right" valign="top">BDIdx&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bestcomm__api_8c.html#a3d74620a816775576cfa503865033827">TaskBDReset</a> (TaskId taskId)</td></tr>
<tr class="memdesc:a3d74620a816775576cfa503865033827"><td class="mdescLeft">&#160;</td><td class="mdescRight">Release all buffers.  <a href="#a3d74620a816775576cfa503865033827">More...</a><br /></td></tr>
<tr class="separator:a3d74620a816775576cfa503865033827"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a455957c637fde5586390764bbc17cbfd"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bestcomm__api_8c.html#a455957c637fde5586390764bbc17cbfd">TaskDebug</a> (TaskId taskId, <a class="el" href="structTaskDebugParamSet__t.html">TaskDebugParamSet_t</a> *paramSet)</td></tr>
<tr class="memdesc:a455957c637fde5586390764bbc17cbfd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return BestComm debug information.  <a href="#a455957c637fde5586390764bbc17cbfd">More...</a><br /></td></tr>
<tr class="separator:a455957c637fde5586390764bbc17cbfd"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ac43dd461deeff3a0a220583107b4543e"><td class="memItemLeft" align="right" valign="top"><a id="ac43dd461deeff3a0a220583107b4543e"></a>
uint8 *&#160;</td><td class="memItemRight" valign="bottom"><b>MBarGlobal</b></td></tr>
<tr class="separator:ac43dd461deeff3a0a220583107b4543e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa5261fb9f502faa9fdcae1184aadd8b"><td class="memItemLeft" align="right" valign="top"><a id="aaa5261fb9f502faa9fdcae1184aadd8b"></a>
sint64&#160;</td><td class="memItemRight" valign="bottom"><b>MBarPhysOffsetGlobal</b></td></tr>
<tr class="separator:aaa5261fb9f502faa9fdcae1184aadd8b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac357e2a3f3527a071157fdab790443ff"><td class="memItemLeft" align="right" valign="top"><a id="ac357e2a3f3527a071157fdab790443ff"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>TaskRunning</b> [<a class="el" href="bestcomm__api_8h.html#aac747bed84189f8cfa509b94d488e622">MAX_TASKS</a>]</td></tr>
<tr class="separator:ac357e2a3f3527a071157fdab790443ff"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Bestcomm_api.c implements most of the BestComm C API. The TaskSetup() function is generated by the BestComm Task API tools in capi/task_api/tasksetup_general.h as configured and included by code_dma/image_rtos?/task_capi/(*).c. Other functions are defined as inline in capi/bestcomm_api.h. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a4117e7e78d83c86e3430384f56004629"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4117e7e78d83c86e3430384f56004629">&#9670;&nbsp;</a></span>TaskBDAssign()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BDIdx TaskBDAssign </td>
          <td>(</td>
          <td class="paramtype">TaskId&#160;</td>
          <td class="paramname"><em>taskId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>buffer0</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>buffer1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32&#160;</td>
          <td class="paramname"><em>bdFlags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Assign a buffer to a buffer descriptor. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">taskId</td><td>Task handle passed back from a successful TaskSetup() </td></tr>
    <tr><td class="paramname">buffer0</td><td>A buffer to send data from or receive data into a device </td></tr>
    <tr><td class="paramname">buffer1</td><td>A second buffer to send data from or receive data into a device for use with double-buffer tasks. </td></tr>
    <tr><td class="paramname">size</td><td>Size of the buffer in bytes. </td></tr>
    <tr><td class="paramname">bdFlags</td><td>Buffer descriptor flags to set. Used by ethernet BD tasks. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Handle to the buffer descriptor used by this DMA transfer. Error is indicated by a negative return value (see TaskErr_t).</dd></dl>
<p>This function is used for both transmit and receive buffer descriptor tasks. The buffer may be freed by the <a class="el" href="bestcomm__api_8c.html#adaf12022da391fada14f3a5621da86a3" title="Release last buffer in the buffer descriptor ring.">TaskBDRelease()</a> function. In the case of tasks with a buffer descriptor with two buffer pointers this function uses both buffer0 and buffer1 where buffer0 is a source and buffer1 is a destination. When the buffer descriptor is a single pointer type, the buffer0 is the only pointer used and buffer1 is ignored.</p>
<p>Using this function on non-buffer descriptor tasks will produce unpredictable results. </p>

</div>
</div>
<a id="adaf12022da391fada14f3a5621da86a3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adaf12022da391fada14f3a5621da86a3">&#9670;&nbsp;</a></span>TaskBDRelease()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BDIdx TaskBDRelease </td>
          <td>(</td>
          <td class="paramtype">TaskId&#160;</td>
          <td class="paramname"><em>taskId</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Release last buffer in the buffer descriptor ring. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">taskId</td><td>Task handle passed back from a successful TaskSetup()</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Buffer descriptor index of next buffer index that will be released by another call of this function. TASK_ERR_BD_RING_EMPTY is returned if the ring is already empty.</dd></dl>
<p>This function allows the system to reallocate the memory used by the buffer. It also cleans up the structure in the BD ring by removing the tail buffer in the ring. The buffer descriptor tasks are designed around this. Non-BD tasks do not use this function.</p>
<p>Using this function on non-buffer descriptor tasks will produce unpredictable results. </p>

</div>
</div>
<a id="a3d74620a816775576cfa503865033827"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3d74620a816775576cfa503865033827">&#9670;&nbsp;</a></span>TaskBDReset()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BDIdx TaskBDReset </td>
          <td>(</td>
          <td class="paramtype">TaskId&#160;</td>
          <td class="paramname"><em>taskId</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Release all buffers. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">taskId</td><td>Task handle passed back from a successful TaskSetup()</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Buffer descriptor index of next buffer that will be assigned by <a class="el" href="bestcomm__api_8c.html#a4117e7e78d83c86e3430384f56004629" title="Assign a buffer to a buffer descriptor.">TaskBDAssign()</a> which will also be the first released by the next call to <a class="el" href="bestcomm__api_8c.html#adaf12022da391fada14f3a5621da86a3" title="Release last buffer in the buffer descriptor ring.">TaskBDRelease()</a> or TASK_ERR_TASK_RUNNING if the task has not been stopped.</dd></dl>
<p>This function is similar to <a class="el" href="bestcomm__api_8c.html#adaf12022da391fada14f3a5621da86a3" title="Release last buffer in the buffer descriptor ring.">TaskBDRelease()</a> except that it releases all assigned buffers including those not yet processed by the BestComm task; i.e. SDMA_BD_MASK_READY is set. Non-BD tasks do not use this function.</p>
<p>The task should not be running. Call <a class="el" href="bestcomm__api_8c.html#a50a0e8468075caefc2c8594375e095fd" title="Stop a running task.">TaskStop()</a> first.</p>
<p><em>Note:</em> Partially transmitted buffers are up to the user to handle.</p>
<p>Using this function on non-buffer descriptor tasks will produce unpredictable results. </p>

</div>
</div>
<a id="a455957c637fde5586390764bbc17cbfd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a455957c637fde5586390764bbc17cbfd">&#9670;&nbsp;</a></span>TaskDebug()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int TaskDebug </td>
          <td>(</td>
          <td class="paramtype">TaskId&#160;</td>
          <td class="paramname"><em>taskId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structTaskDebugParamSet__t.html">TaskDebugParamSet_t</a> *&#160;</td>
          <td class="paramname"><em>paramSet</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return BestComm debug information. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">taskId</td><td>Task handle passed back from a successful TaskSetup() </td></tr>
    <tr><td class="paramname">paramSet</td><td>TBD </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>TBD</dd></dl>
<p>The implementation of this function is yet to be determined. </p>

</div>
</div>
<a id="af0debe7b5957175c27dd80de6359d264"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af0debe7b5957175c27dd80de6359d264">&#9670;&nbsp;</a></span>TasksAttachImage()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int TasksAttachImage </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structsdma__register__set.html">sdma_regs</a> *&#160;</td>
          <td class="paramname"><em>sdma</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><em>Deprecated</em> </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sdma</td><td>Base address of the BestComm register set</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>TASK_ERR_NO_ERR</dd></dl>
<p>Use of this function is no longer necessary. It is retained for compatibility with previous versions of the API. </p>

</div>
</div>
<a id="ae914efa36122a772ac8ad8848ec0812a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae914efa36122a772ac8ad8848ec0812a">&#9670;&nbsp;</a></span>TasksInitAPI()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int TasksInitAPI </td>
          <td>(</td>
          <td class="paramtype">uint8 *&#160;</td>
          <td class="paramname"><em>MBarRef</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize the API. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">MBarRef</td><td>Reference pointer to the device register memory map.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>TASK_ERR_NO_ERR on successful initialization. or TASK_ERR_API_ALREADY_INITIALIZED.</dd></dl>
<p>This function is only used with physical addresses.</p>
<p>This function will also initialize API internal variables. The return value TASK_ERR_API_ALREADY_INITIALIZED is intended to help determine if another process has already instantiated a version of the API. </p>

</div>
</div>
<a id="a218e71b4e0b0e6e1fdbda806bdf937f7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a218e71b4e0b0e6e1fdbda806bdf937f7">&#9670;&nbsp;</a></span>TasksInitAPI_VM()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int TasksInitAPI_VM </td>
          <td>(</td>
          <td class="paramtype">uint8 *&#160;</td>
          <td class="paramname"><em>MBarRef</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8 *&#160;</td>
          <td class="paramname"><em>MBarPhys</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize the API when virtual memory is used. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">MBarRef</td><td>Reference pointer to the device register memory map. </td></tr>
    <tr><td class="paramname">MBarPhys</td><td>Actual physical location of MBAR device register memory map.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>TASK_ERR_NO_ERR on successful initialization. or TASK_ERR_API_ALREADY_INITIALIZED.</dd></dl>
<p>This function allows using virtual memory addresses as well as physical addresses. All device registers are offset to the address supplied here, so the virtual memory space should include enough space for the entire register set of the device to include the SRAM space.</p>
<p>This function will also initialize API internal variables. The return value TASK_ERR_API_ALREADY_INITIALIZED is intended to help determine if another process has already instantiated a version of the API. </p>

</div>
</div>
<a id="a2b48145c6c0418944c8226075ba97e7a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2b48145c6c0418944c8226075ba97e7a">&#9670;&nbsp;</a></span>TaskStart()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int TaskStart </td>
          <td>(</td>
          <td class="paramtype">TaskId&#160;</td>
          <td class="paramname"><em>taskId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32&#160;</td>
          <td class="paramname"><em>autoStartEnable</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">TaskId&#160;</td>
          <td class="paramname"><em>autoStartTask</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32&#160;</td>
          <td class="paramname"><em>intrEnable</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Start an initialized task running. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">taskId</td><td>Task handle passed back from a successful TaskSetup() </td></tr>
    <tr><td class="paramname">autoStartEnable</td><td>Boolean for whether autostart bit is enabled. If this is set then the parameter autoStartTask defines the task to auto start. </td></tr>
    <tr><td class="paramname">autoStartTask</td><td>TaskId for task to autostart. If autoStartEnable is not set then this parameter is a don't care. </td></tr>
    <tr><td class="paramname">intrEnable</td><td>Boolean for interrupt enable for this task. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>TASK_ERR_NO_ERR on success or TASK_ERR_INVALID_ARG if taskId is invalid. </dd></dl>

</div>
</div>
<a id="a50a0e8468075caefc2c8594375e095fd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a50a0e8468075caefc2c8594375e095fd">&#9670;&nbsp;</a></span>TaskStop()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int TaskStop </td>
          <td>(</td>
          <td class="paramtype">TaskId&#160;</td>
          <td class="paramname"><em>taskId</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Stop a running task. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">taskId</td><td>Task handle passed back from a successful TaskSetup() </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>TASK_ERR_NO_ERR on success or TASK_ERR_INVALID_ARG if taskId is invalid.</dd></dl>
<p><em>Note:</em> Stopping a polling buffer descriptor task is a catastrophic operation. It does not merely pause execution. Context is not saved. The task's pointer into the BD ring is reset back to the beginning.</p>
<p><em>Note:</em> This is not the case for the new "fall-through" BD tasks. They save the BD ring pointer across stop/start boundaries. The previous polling tasks are considered deprecated. </p>

</div>
</div>
<a id="a1fe2b4c534707dc2ffa76134dbdd18a6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1fe2b4c534707dc2ffa76134dbdd18a6">&#9670;&nbsp;</a></span>TaskVersion()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* TaskVersion </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get a string containing API version information. </p>
<dl class="section return"><dt>Returns</dt><dd>Pointer to the API version string </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.15
</small></address>
</body>
</html>
