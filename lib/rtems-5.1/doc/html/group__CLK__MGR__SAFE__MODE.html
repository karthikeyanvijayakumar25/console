<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>RTEMS: Safe Mode Options</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="rtemslogo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">RTEMS
   &#160;<span id="projectnumber">5.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Safe Mode Options<div class="ingroups"><a class="el" href="group__RTEMSBSPs.html">Board Support Packages</a> &raquo; <a class="el" href="group__RTEMSBSPsARM.html">ARM</a> &raquo; <a class="el" href="group__RTEMSBSPsARMCycV.html">Intel Cyclone V</a> &raquo; <a class="el" href="group__RTEMSBSPsARMCycVContrib.html">Contributed Code</a> &raquo; <a class="el" href="group__CLK__MGR.html">The Clock Manager API</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:gacf9924b29261719c075137e2805f8d3f"><td class="memItemLeft" align="right" valign="top">typedef enum <a class="el" href="group__CLK__MGR__SAFE__MODE.html#ga8feb75a3bd96f3d639ed8052133c9029">ALT_CLK_SAFE_DOMAIN_e</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__CLK__MGR__SAFE__MODE.html#gacf9924b29261719c075137e2805f8d3f">ALT_CLK_SAFE_DOMAIN_t</a></td></tr>
<tr class="separator:gacf9924b29261719c075137e2805f8d3f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:ga8feb75a3bd96f3d639ed8052133c9029"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__CLK__MGR__SAFE__MODE.html#ga8feb75a3bd96f3d639ed8052133c9029">ALT_CLK_SAFE_DOMAIN_e</a> { <a class="el" href="group__CLK__MGR__SAFE__MODE.html#gga8feb75a3bd96f3d639ed8052133c9029ae0c540cb09d7d1a2c7ec1456245cd61d">ALT_CLK_DOMAIN_NORMAL</a>, 
<a class="el" href="group__CLK__MGR__SAFE__MODE.html#gga8feb75a3bd96f3d639ed8052133c9029a3c53d968ed9db9bebdb74c8b350a99ef">ALT_CLK_DOMAIN_DEBUG</a>
 }</td></tr>
<tr class="separator:ga8feb75a3bd96f3d639ed8052133c9029"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga7fb95d9c6bf7e2ec7c96b0c1ab65dc6c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="hwlib_8h.html#abdb0d369f069723ca55d6c94bcaaaa12">ALT_STATUS_CODE</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__CLK__MGR__SAFE__MODE.html#ga7fb95d9c6bf7e2ec7c96b0c1ab65dc6c">alt_clk_safe_mode_clear</a> (void)</td></tr>
<tr class="separator:ga7fb95d9c6bf7e2ec7c96b0c1ab65dc6c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gada82c454b74519f10ce1769e1273608a"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__CLK__MGR__SAFE__MODE.html#gada82c454b74519f10ce1769e1273608a">alt_clk_is_in_safe_mode</a> (<a class="el" href="group__CLK__MGR__SAFE__MODE.html#gacf9924b29261719c075137e2805f8d3f">ALT_CLK_SAFE_DOMAIN_t</a> clk_domain)</td></tr>
<tr class="separator:gada82c454b74519f10ce1769e1273608a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>When safe mode is enabled, clocks in the HPS are directly generated from the <b>osc1_clk</b> clock. Safe mode is enabled by the assertion of a safe mode request from the reset manager or by a cold reset. Assertion of the safe mode request from the reset manager sets the safe mode bit in the clock manager control register. No other control register bits are affected by the safe mode request from the reset manager.</p>
<p>While in safe mode, clock manager register settings which control clock behavior are not changed. However, the output of the registers which control the clock manager state are forced to the safe mode values such that the following conditions occur:</p><ul>
<li>All PLLs are bypassed to the <b>osc1_clk</b> clock, including their counters.</li>
<li>Clock dividers select their default reset values.</li>
<li>The flash controllers source clock selections are set to the peripheral PLL.</li>
<li>All clocks are enabled.</li>
<li>Safe mode is optionally applied to debug clocks.</li>
</ul>
<p>A write by software is the only way to clear the safe mode bit. All registers and clocks need to be configured correctly and all software-managed clocks need to be gated off before clearing safe mode. Software can then gate clocks on as required.</p>
<p>On cold reset, all clocks are put in safe mode.</p>
<p>On warm reset, safe mode is optionally and independently applied to debug clocks and normal (i.e.non-debug) clocks based on clock manager register settings. The default response for warm reset is to put all clocks in safe mode.</p>
<p>The APIs in this group provide control of the Clock Manager safe mode warm reset response behavior. </p>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="gacf9924b29261719c075137e2805f8d3f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gacf9924b29261719c075137e2805f8d3f">&#9670;&nbsp;</a></span>ALT_CLK_SAFE_DOMAIN_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef enum <a class="el" href="group__CLK__MGR__SAFE__MODE.html#ga8feb75a3bd96f3d639ed8052133c9029">ALT_CLK_SAFE_DOMAIN_e</a>  <a class="el" href="group__CLK__MGR__SAFE__MODE.html#gacf9924b29261719c075137e2805f8d3f">ALT_CLK_SAFE_DOMAIN_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This type definition enumerates the safe mode clock domains under control of the Clock Manager. </p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="ga8feb75a3bd96f3d639ed8052133c9029"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8feb75a3bd96f3d639ed8052133c9029">&#9670;&nbsp;</a></span>ALT_CLK_SAFE_DOMAIN_e</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__CLK__MGR__SAFE__MODE.html#ga8feb75a3bd96f3d639ed8052133c9029">ALT_CLK_SAFE_DOMAIN_e</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This type definition enumerates the safe mode clock domains under control of the Clock Manager. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="gga8feb75a3bd96f3d639ed8052133c9029ae0c540cb09d7d1a2c7ec1456245cd61d"></a>ALT_CLK_DOMAIN_NORMAL&#160;</td><td class="fielddoc"><p>This enumeration literal specifies the normal safe mode domain. The normal domain consists of all clocks except debug clocks. </p>
</td></tr>
<tr><td class="fieldname"><a id="gga8feb75a3bd96f3d639ed8052133c9029a3c53d968ed9db9bebdb74c8b350a99ef"></a>ALT_CLK_DOMAIN_DEBUG&#160;</td><td class="fielddoc"><p>This enumeration literal specifies the debug safe mode domain. The debug domain consists of all debug clocks. </p>
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="gada82c454b74519f10ce1769e1273608a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gada82c454b74519f10ce1769e1273608a">&#9670;&nbsp;</a></span>alt_clk_is_in_safe_mode()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool alt_clk_is_in_safe_mode </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__CLK__MGR__SAFE__MODE.html#gacf9924b29261719c075137e2805f8d3f">ALT_CLK_SAFE_DOMAIN_t</a>&#160;</td>
          <td class="paramname"><em>clk_domain</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return whether the specified safe mode clock domain is in safe mode or not.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">clk_domain</td><td>The safe mode clock domain to check whether in safe mode or not.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">TRUE</td><td>The safe mode clock domain is in safe mode. </td></tr>
    <tr><td class="paramname">FALSE</td><td>The safe mode clock domain is not in safe mode. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga7fb95d9c6bf7e2ec7c96b0c1ab65dc6c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga7fb95d9c6bf7e2ec7c96b0c1ab65dc6c">&#9670;&nbsp;</a></span>alt_clk_safe_mode_clear()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="hwlib_8h.html#abdb0d369f069723ca55d6c94bcaaaa12">ALT_STATUS_CODE</a> alt_clk_safe_mode_clear </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Clear the safe mode status of the Clock Manager following a reset.</p>
<p>NOTE: Safe mode should only be cleared once clocks have been correctly configured.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">ALT_E_SUCCESS</td><td>The operation was succesful. </td></tr>
    <tr><td class="paramname">ALT_E_ERROR</td><td>The operation failed. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.15
</small></address>
</body>
</html>
