<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>RTEMS: bsps/arm/tms570/start/pinmux.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="rtemslogo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">RTEMS
   &#160;<span id="projectnumber">5.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_49b8d5997469a34e9a523535602b7e1a.html">bsps</a></li><li class="navelem"><a class="el" href="dir_5f7c3d4818c142e5ac9b73b670fac05b.html">arm</a></li><li class="navelem"><a class="el" href="dir_4e70354d9ffc2d07a95c0b4d9b97e498.html">tms570</a></li><li class="navelem"><a class="el" href="dir_e8c6b8e2752a1c9198adab6b087d7e45.html">start</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">pinmux.c File Reference<div class="ingroups"><a class="el" href="group__RTEMSBSPs.html">Board Support Packages</a> &raquo; <a class="el" href="group__RTEMSBSPsARM.html">ARM</a> &raquo; <a class="el" href="group__RTEMSBSPsARMTMS570.html">TMS570</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>I/O Multiplexing Module (IOMM) basic support.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;bsp/tms570.h&gt;</code><br />
<code>#include &lt;<a class="el" href="tms570-pinmux_8h_source.html">bsp/tms570-pinmux.h</a>&gt;</code><br />
<code>#include &lt;bsp/irq.h&gt;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a096924e434015941cae44dce897ea5ef"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pinmux_8c.html#a096924e434015941cae44dce897ea5ef">tms570_bsp_pin_set_function</a> (int pin_num, int pin_fnc)</td></tr>
<tr class="memdesc:a096924e434015941cae44dce897ea5ef"><td class="mdescLeft">&#160;</td><td class="mdescRight">select desired function of pin/ball  <a href="#a096924e434015941cae44dce897ea5ef">More...</a><br /></td></tr>
<tr class="separator:a096924e434015941cae44dce897ea5ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac225c1f6113c3a39dfe69324b07fa625"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pinmux_8c.html#ac225c1f6113c3a39dfe69324b07fa625">tms570_bsp_pin_clear_function</a> (int pin_num, int pin_fnc)</td></tr>
<tr class="memdesc:ac225c1f6113c3a39dfe69324b07fa625"><td class="mdescLeft">&#160;</td><td class="mdescRight">clear connection between pin and specified peripherals/function  <a href="#ac225c1f6113c3a39dfe69324b07fa625">More...</a><br /></td></tr>
<tr class="separator:ac225c1f6113c3a39dfe69324b07fa625"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3f1fcae6177e90127dd1af7e9c93efe4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pinmux_8c.html#a3f1fcae6177e90127dd1af7e9c93efe4">tms570_bsp_pin_config_one</a> (uint32_t pin_num_and_fnc)</td></tr>
<tr class="memdesc:a3f1fcae6177e90127dd1af7e9c93efe4"><td class="mdescLeft">&#160;</td><td class="mdescRight">configure one pin according to its function specification  <a href="#a3f1fcae6177e90127dd1af7e9c93efe4">More...</a><br /></td></tr>
<tr class="separator:a3f1fcae6177e90127dd1af7e9c93efe4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a061d7b53280d6fc349a4157613712aef"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pinmux_8c.html#a061d7b53280d6fc349a4157613712aef">tms570_bsp_pinmmr_config</a> (const uint32_t *pinmmr_values, int reg_start, int reg_count)</td></tr>
<tr class="memdesc:a061d7b53280d6fc349a4157613712aef"><td class="mdescLeft">&#160;</td><td class="mdescRight">configure block or whole pin multiplexer  <a href="#a061d7b53280d6fc349a4157613712aef">More...</a><br /></td></tr>
<tr class="separator:a061d7b53280d6fc349a4157613712aef"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ac00f43f4e0e3c5a5050ec9db4db2678f"><td class="memItemLeft" align="right" valign="top"><a id="ac00f43f4e0e3c5a5050ec9db4db2678f"></a>
uint32_t&#160;</td><td class="memItemRight" valign="bottom"><b>tms570_bsp_pinmmr_kick_key0</b> = 0x83E70B13U</td></tr>
<tr class="separator:ac00f43f4e0e3c5a5050ec9db4db2678f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a58e92a5cf6aef58b38a31b21174501b2"><td class="memItemLeft" align="right" valign="top"><a id="a58e92a5cf6aef58b38a31b21174501b2"></a>
uint32_t&#160;</td><td class="memItemRight" valign="bottom"><b>tms570_bsp_pinmmr_kick_key1</b> = 0x95A4F1E0U</td></tr>
<tr class="separator:a58e92a5cf6aef58b38a31b21174501b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>I/O Multiplexing Module (IOMM) basic support. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="ac225c1f6113c3a39dfe69324b07fa625"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac225c1f6113c3a39dfe69324b07fa625">&#9670;&nbsp;</a></span>tms570_bsp_pin_clear_function()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tms570_bsp_pin_clear_function </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>pin_num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>pin_fnc</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>clear connection between pin and specified peripherals/function </p>
<p>This function switches off given connection and leaves rest of multiplexer setup intact.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">pin_num</td><td>pin/ball identifier (index into pinmux array) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">pin_fnc</td><td>function number 0 .. 7, if value <code>TMS570_PIN_FNC_AUTO</code> is specified then pin function is extracted from pin_num argument </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">Void</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a3f1fcae6177e90127dd1af7e9c93efe4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3f1fcae6177e90127dd1af7e9c93efe4">&#9670;&nbsp;</a></span>tms570_bsp_pin_config_one()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tms570_bsp_pin_config_one </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>pin_num_and_fnc</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>configure one pin according to its function specification </p>
<p>The function setups multiplexer to interconnect pin with specified function/peripheral. Predefined values for pins combined with function are in a format TMS570_BALL_ <code>column</code> <code>row</code> <code>function</code> (for example <code>TMS570_BALL_W3_SCIRX</code>). If the function can be connected to more pins then specification includes infomation which allows to disconnect alternative pin to peripheral input connection or switch input multiplexer to right pin.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">pin_num_and_fnc</td><td>pin function descriptor is build by macro <code>TMS570_PIN_AND_FNC</code> which takes pin/pinmmr specification build by <code>TMS570_BALL_WITH_MMR</code> and function index in output multiplexer. If the peripheral can be connected to other input alternative then actual pin description and alternative to disconnected/reconnect are combined together by <code>TMS570_PIN_WITH_IN_ALT</code> macro. If clear of alternative connection is required then flag <code>TMS570_PIN_CLEAR_RQ_MASK</code> is ored to alternative description.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">Void</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a096924e434015941cae44dce897ea5ef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a096924e434015941cae44dce897ea5ef">&#9670;&nbsp;</a></span>tms570_bsp_pin_set_function()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tms570_bsp_pin_set_function </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>pin_num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>pin_fnc</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>select desired function of pin/ball </p>
<p>The function setups multiplexer to interconnect pin with specified function/peripheral. Pin number is index into pinmux entries array. Predefined values for pins are in a format TMS570_BALL_ <code>column</code> <code>row</code> (for example <code>TMS570_BALL_N19</code>). The multiplexer allows to interconnect one pin to multiple signal sources/sinks in the theory but it is usually bad choice. The function sets only specified function and clears all other connections.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">pin_num</td><td>pin/ball identifier (index into pinmux array), </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">pin_fnc</td><td>function number 0 .. 7, if value <code>TMS570_PIN_FNC_AUTO</code> is specified then pin function is extracted from pin_num argument </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">Void</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a061d7b53280d6fc349a4157613712aef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a061d7b53280d6fc349a4157613712aef">&#9670;&nbsp;</a></span>tms570_bsp_pinmmr_config()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tms570_bsp_pinmmr_config </td>
          <td>(</td>
          <td class="paramtype">const uint32_t *&#160;</td>
          <td class="paramname"><em>pinmmr_values</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>reg_start</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>reg_count</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>configure block or whole pin multiplexer </p>
<p>Function change multiplexer content. It is intended for initial chip setup and does not use locking. If complete reconfiguration is required at runtime then it is application responsibility to protect and serialize change with peripherals drivers and parallel calls</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">pinmmr_values</td><td>pointer to array with required multiplexer setup </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">reg_start</td><td>starting register, this allows to configure non-consecutive registers groups found on some MCU family members </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">reg_count</td><td>number of words in initialization array to set to corresponding registers</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">Void</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.15
</small></address>
</body>
</html>
