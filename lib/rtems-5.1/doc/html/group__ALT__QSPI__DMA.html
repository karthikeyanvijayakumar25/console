<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>RTEMS: DMA Peripheral Interface</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="rtemslogo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">RTEMS
   &#160;<span id="projectnumber">5.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">DMA Peripheral Interface<div class="ingroups"><a class="el" href="group__RTEMSBSPs.html">Board Support Packages</a> &raquo; <a class="el" href="group__RTEMSBSPsARM.html">ARM</a> &raquo; <a class="el" href="group__RTEMSBSPsARMCycV.html">Intel Cyclone V</a> &raquo; <a class="el" href="group__RTEMSBSPsARMCycVContrib.html">Contributed Code</a> &raquo; <a class="el" href="group__ALT__QSPI.html">QSPI Flash Controller Module</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga4d16f0e1e367185438c882b1e54ad69a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="hwlib_8h.html#abdb0d369f069723ca55d6c94bcaaaa12">ALT_STATUS_CODE</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ALT__QSPI__DMA.html#ga4d16f0e1e367185438c882b1e54ad69a">alt_qspi_dma_disable</a> (void)</td></tr>
<tr class="separator:ga4d16f0e1e367185438c882b1e54ad69a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab7335b92adfb09af82a3e7e92e2c1765"><td class="memItemLeft" align="right" valign="top"><a class="el" href="hwlib_8h.html#abdb0d369f069723ca55d6c94bcaaaa12">ALT_STATUS_CODE</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ALT__QSPI__DMA.html#gab7335b92adfb09af82a3e7e92e2c1765">alt_qspi_dma_enable</a> (void)</td></tr>
<tr class="separator:gab7335b92adfb09af82a3e7e92e2c1765"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga92ee264b9fe98d0acfabe3c0ac2d9d1b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="hwlib_8h.html#abdb0d369f069723ca55d6c94bcaaaa12">ALT_STATUS_CODE</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ALT__QSPI__DMA.html#ga92ee264b9fe98d0acfabe3c0ac2d9d1b">alt_qspi_dma_config_get</a> (uint32_t *single_type_sz, uint32_t *burst_type_sz)</td></tr>
<tr class="separator:ga92ee264b9fe98d0acfabe3c0ac2d9d1b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6544a397843d6b1204f500be26896878"><td class="memItemLeft" align="right" valign="top"><a class="el" href="hwlib_8h.html#abdb0d369f069723ca55d6c94bcaaaa12">ALT_STATUS_CODE</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ALT__QSPI__DMA.html#ga6544a397843d6b1204f500be26896878">alt_qspi_dma_config_set</a> (const uint32_t single_type_sz, const uint32_t burst_type_sz)</td></tr>
<tr class="separator:ga6544a397843d6b1204f500be26896878"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>The DMA peripheral request controller is only used for the indirect mode of operation where data is temporarily stored in the SRAM. The QSPI flash controller uses the DMA peripheral request interface to trigger the external DMA into performing data transfers between memory and the QSPI controller.</p>
<p>There are two DMA peripheral request interfaces, one for indirect reads and one for indirect writes. The DMA peripheral request controller can issue two types of DMA requests, single or burst, to the external DMA. The number of bytes for each single or burst request is specified using the <a class="el" href="group__ALT__QSPI__DMA.html#ga6544a397843d6b1204f500be26896878">alt_qspi_dma_config_set()</a>. The DMA peripheral request controller splits the total amount of data to be transferred into a number of DMA burst and single requests by dividing the total number of bytes by the number of bytes specified in the burst request, and then dividing the remainder by the number of bytes in a single request.</p>
<p>When programming the DMA controller, the burst request size must match the burst request size set in the quad SPI controller to avoid quickly reaching an overflow or underflow condition. </p>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga92ee264b9fe98d0acfabe3c0ac2d9d1b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga92ee264b9fe98d0acfabe3c0ac2d9d1b">&#9670;&nbsp;</a></span>alt_qspi_dma_config_get()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="hwlib_8h.html#abdb0d369f069723ca55d6c94bcaaaa12">ALT_STATUS_CODE</a> alt_qspi_dma_config_get </td>
          <td>(</td>
          <td class="paramtype">uint32_t *&#160;</td>
          <td class="paramname"><em>single_type_sz</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t *&#160;</td>
          <td class="paramname"><em>burst_type_sz</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get the current DMA peripheral configuration.</p>
<p>This function returns the QSPI DMA peripheral interface single and burst type transfer size configurations.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">single_type_sz</td><td>[out] The number of bytes for each DMA single type request. Value must be a power of 2 between 1 and 32728.</td></tr>
    <tr><td class="paramname">burst_type_sz</td><td>[out] The number of bytes for each DMA burst type request. Value must be a power of 2 between 1 and 32728.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">ALT_E_SUCCESS</td><td>Indicates successful completion. </td></tr>
    <tr><td class="paramname">ALT_E_ERROR</td><td>Indicates an error occurred. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga6544a397843d6b1204f500be26896878"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6544a397843d6b1204f500be26896878">&#9670;&nbsp;</a></span>alt_qspi_dma_config_set()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="hwlib_8h.html#abdb0d369f069723ca55d6c94bcaaaa12">ALT_STATUS_CODE</a> alt_qspi_dma_config_set </td>
          <td>(</td>
          <td class="paramtype">const uint32_t&#160;</td>
          <td class="paramname"><em>single_type_sz</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint32_t&#160;</td>
          <td class="paramname"><em>burst_type_sz</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Set the DMA peripheral configuration.</p>
<p>This function configures the QSPI DMA peripheral interface single and burst type transfer sizes. The DMA configruation should be setup while the controller is idle. Because all transfers are required to be word aligned, the smallest DMA request is 4 bytes.</p>
<p>This API requires that the QSPI controller be idle, as determined by <a class="el" href="group__ALT__QSPI__CSR.html#gaeaa7e762d8b79b1989385c978174b7b8">alt_qspi_is_idle()</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">single_type_sz</td><td>The number of bytes for each DMA single type request. Value must be a power of 2 between 4 and 32768.</td></tr>
    <tr><td class="paramname">burst_type_sz</td><td>The number of bytes for each DMA burst type request. Value must be a power of 2 between 4 and 32768. Bursts must be equal or larger than single requests.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">ALT_E_SUCCESS</td><td>Indicates successful completion. </td></tr>
    <tr><td class="paramname">ALT_E_ERROR</td><td>Indicates an error occurred. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga4d16f0e1e367185438c882b1e54ad69a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga4d16f0e1e367185438c882b1e54ad69a">&#9670;&nbsp;</a></span>alt_qspi_dma_disable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="hwlib_8h.html#abdb0d369f069723ca55d6c94bcaaaa12">ALT_STATUS_CODE</a> alt_qspi_dma_disable </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Disable the QSPI DMA peripheral interface.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">ALT_E_SUCCESS</td><td>Indicates successful completion. </td></tr>
    <tr><td class="paramname">ALT_E_ERROR</td><td>Indicates an error occurred. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gab7335b92adfb09af82a3e7e92e2c1765"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab7335b92adfb09af82a3e7e92e2c1765">&#9670;&nbsp;</a></span>alt_qspi_dma_enable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="hwlib_8h.html#abdb0d369f069723ca55d6c94bcaaaa12">ALT_STATUS_CODE</a> alt_qspi_dma_enable </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Enable the QSPI DMA peripheral interface.</p>
<p>Enable the QSPI DMA handshaking logic. When enabled the QSPI will trigger DMA transfer requests via the DMA peripheral interface.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">ALT_E_SUCCESS</td><td>Indicates successful completion. </td></tr>
    <tr><td class="paramname">ALT_E_ERROR</td><td>Indicates an error occurred. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.15
</small></address>
</body>
</html>
