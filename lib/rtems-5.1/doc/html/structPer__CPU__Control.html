<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>RTEMS: Per_CPU_Control Struct Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="rtemslogo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">RTEMS
   &#160;<span id="projectnumber">5.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-attribs">Data Fields</a>  </div>
  <div class="headertitle">
<div class="title">Per_CPU_Control Struct Reference<div class="ingroups"><a class="el" href="group__RTEMSInternal.html">Internal</a> &raquo; <a class="el" href="group__RTEMSScore.html">SuperCore</a> &raquo; <a class="el" href="group__PerCPU.html">RTEMS Per CPU Information</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Per CPU Core Structure.  
 <a href="structPer__CPU__Control.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="score_2percpu_8h_source.html">percpu.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Data Fields</h2></td></tr>
<tr class="memitem:af4f231b359e49935320c7bb75570fc4e"><td class="memItemLeft" align="right" valign="top"><a id="af4f231b359e49935320c7bb75570fc4e"></a>
void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structPer__CPU__Control.html#af4f231b359e49935320c7bb75570fc4e">interrupt_stack_low</a></td></tr>
<tr class="memdesc:af4f231b359e49935320c7bb75570fc4e"><td class="mdescLeft">&#160;</td><td class="mdescRight">The interrupt stack low address for this processor. <br /></td></tr>
<tr class="separator:af4f231b359e49935320c7bb75570fc4e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a358b6ecaa2a521b92b5999e2df486276"><td class="memItemLeft" align="right" valign="top"><a id="a358b6ecaa2a521b92b5999e2df486276"></a>
void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structPer__CPU__Control.html#a358b6ecaa2a521b92b5999e2df486276">interrupt_stack_high</a></td></tr>
<tr class="memdesc:a358b6ecaa2a521b92b5999e2df486276"><td class="mdescLeft">&#160;</td><td class="mdescRight">The interrupt stack high address for this processor. <br /></td></tr>
<tr class="separator:a358b6ecaa2a521b92b5999e2df486276"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aee16a4dbad577bfb87c857042f089c69"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structPer__CPU__Control.html#aee16a4dbad577bfb87c857042f089c69">isr_nest_level</a></td></tr>
<tr class="separator:aee16a4dbad577bfb87c857042f089c69"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a255ba7c5e213a7a2513ab0c5a5a29f64"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structPer__CPU__Control.html#a255ba7c5e213a7a2513ab0c5a5a29f64">isr_dispatch_disable</a></td></tr>
<tr class="memdesc:a255ba7c5e213a7a2513ab0c5a5a29f64"><td class="mdescLeft">&#160;</td><td class="mdescRight">Indicates if an ISR thread dispatch is disabled.  <a href="#a255ba7c5e213a7a2513ab0c5a5a29f64">More...</a><br /></td></tr>
<tr class="separator:a255ba7c5e213a7a2513ab0c5a5a29f64"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a76fecf04eaa2fa1a3acade2171fe2e75"><td class="memItemLeft" align="right" valign="top"><a id="a76fecf04eaa2fa1a3acade2171fe2e75"></a>
volatile uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structPer__CPU__Control.html#a76fecf04eaa2fa1a3acade2171fe2e75">thread_dispatch_disable_level</a></td></tr>
<tr class="memdesc:a76fecf04eaa2fa1a3acade2171fe2e75"><td class="mdescLeft">&#160;</td><td class="mdescRight">The thread dispatch critical section nesting counter which is used to prevent context switches at inopportune moments. <br /></td></tr>
<tr class="separator:a76fecf04eaa2fa1a3acade2171fe2e75"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a96af7f4805c6b75b775f5304e6c39d99"><td class="memItemLeft" align="right" valign="top">volatile bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structPer__CPU__Control.html#a96af7f4805c6b75b775f5304e6c39d99">dispatch_necessary</a></td></tr>
<tr class="memdesc:a96af7f4805c6b75b775f5304e6c39d99"><td class="mdescLeft">&#160;</td><td class="mdescRight">This is set to true when this processor needs to run the thread dispatcher.  <a href="#a96af7f4805c6b75b775f5304e6c39d99">More...</a><br /></td></tr>
<tr class="separator:a96af7f4805c6b75b775f5304e6c39d99"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aefd7a737e9da4942192ae4c5db1179dd"><td class="memItemLeft" align="right" valign="top"><a id="aefd7a737e9da4942192ae4c5db1179dd"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>reserved_for_executing_alignment</b> [3]</td></tr>
<tr class="separator:aefd7a737e9da4942192ae4c5db1179dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab798eb05fe75cb2f73cae76b1b209bab"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="struct__Thread__Control.html">_Thread_Control</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structPer__CPU__Control.html#ab798eb05fe75cb2f73cae76b1b209bab">executing</a></td></tr>
<tr class="memdesc:ab798eb05fe75cb2f73cae76b1b209bab"><td class="mdescLeft">&#160;</td><td class="mdescRight">This is the thread executing on this processor.  <a href="#ab798eb05fe75cb2f73cae76b1b209bab">More...</a><br /></td></tr>
<tr class="separator:ab798eb05fe75cb2f73cae76b1b209bab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a04b6cae98eb4a23510c81d90caf0a196"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="struct__Thread__Control.html">_Thread_Control</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structPer__CPU__Control.html#a04b6cae98eb4a23510c81d90caf0a196">heir</a></td></tr>
<tr class="memdesc:a04b6cae98eb4a23510c81d90caf0a196"><td class="mdescLeft">&#160;</td><td class="mdescRight">This is the heir thread for this processor.  <a href="#a04b6cae98eb4a23510c81d90caf0a196">More...</a><br /></td></tr>
<tr class="separator:a04b6cae98eb4a23510c81d90caf0a196"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9fbfc99808e4e02178776e66334a4eb4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__SuperCoreTimeStamp.html#ga8508036506d5211c98844c88045e2410">Timestamp_Control</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structPer__CPU__Control.html#a9fbfc99808e4e02178776e66334a4eb4">cpu_usage_timestamp</a></td></tr>
<tr class="memdesc:a9fbfc99808e4e02178776e66334a4eb4"><td class="mdescLeft">&#160;</td><td class="mdescRight">The CPU usage timestamp contains the time point of the last heir thread change or last CPU usage update of the executing thread of this processor.  <a href="#a9fbfc99808e4e02178776e66334a4eb4">More...</a><br /></td></tr>
<tr class="separator:a9fbfc99808e4e02178776e66334a4eb4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae806d93446182a03cc73817a4d955373"><td class="memItemLeft" ><a id="ae806d93446182a03cc73817a4d955373"></a>
struct {</td></tr>
<tr class="memitem:a3f14005f4550cad0275971d604090cd0"><td class="memItemLeft" >&#160;&#160;&#160;uint64_t&#160;&#160;&#160;<a class="el" href="structPer__CPU__Control.html#abafac09e8013b144149bf2b800797dc6">ticks</a></td></tr>
<tr class="memdesc:a3f14005f4550cad0275971d604090cd0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Protects all watchdog operations on this processor.  <a href="#a3f14005f4550cad0275971d604090cd0">More...</a><br /></td></tr>
<tr class="separator:a3f14005f4550cad0275971d604090cd0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a491dff8f6ec9c6149f0d154c05ff3551"><td class="memItemLeft" >&#160;&#160;&#160;<a class="el" href="structWatchdog__Header.html">Watchdog_Header</a>&#160;&#160;&#160;<a class="el" href="structPer__CPU__Control.html#a2d2163a1bbf81d706b0018f438a9c61f">Header</a> [<a class="el" href="group__PerCPU.html#gga43ab5440a69211901b58fa787f9cd76ea49ebdf20f41288627c23ddc6e63a20ab">PER_CPU_WATCHDOG_COUNT</a>]</td></tr>
<tr class="memdesc:a491dff8f6ec9c6149f0d154c05ff3551"><td class="mdescLeft">&#160;</td><td class="mdescRight">Header for watchdogs.  <a href="#a491dff8f6ec9c6149f0d154c05ff3551">More...</a><br /></td></tr>
<tr class="separator:a491dff8f6ec9c6149f0d154c05ff3551"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae806d93446182a03cc73817a4d955373"><td class="memItemLeft" valign="top">}&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structPer__CPU__Control.html#ae806d93446182a03cc73817a4d955373">Watchdog</a></td></tr>
<tr class="memdesc:ae806d93446182a03cc73817a4d955373"><td class="mdescLeft">&#160;</td><td class="mdescRight">Watchdog state for this processor. <br /></td></tr>
<tr class="separator:ae806d93446182a03cc73817a4d955373"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a50c66678d52ff23c16487c686e6178cb"><td class="memItemLeft" align="right" valign="top"><a id="a50c66678d52ff23c16487c686e6178cb"></a>
struct <a class="el" href="structRecord__Control.html">Record_Control</a> *&#160;</td><td class="memItemRight" valign="bottom"><b>record</b></td></tr>
<tr class="separator:a50c66678d52ff23c16487c686e6178cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aea3dae83cb87a4dcf69c34fc93f2a02a"><td class="memItemLeft" align="right" valign="top"><a id="aea3dae83cb87a4dcf69c34fc93f2a02a"></a>
<a class="el" href="structPer__CPU__Stats.html">Per_CPU_Stats</a>&#160;</td><td class="memItemRight" valign="bottom"><b>Stats</b></td></tr>
<tr class="separator:aea3dae83cb87a4dcf69c34fc93f2a02a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Per CPU Core Structure. </p>
<p>This structure is used to hold per core state information. </p>
</div><h2 class="groupheader">Field Documentation</h2>
<a id="a9fbfc99808e4e02178776e66334a4eb4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9fbfc99808e4e02178776e66334a4eb4">&#9670;&nbsp;</a></span>cpu_usage_timestamp</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__SuperCoreTimeStamp.html#ga8508036506d5211c98844c88045e2410">Timestamp_Control</a> Per_CPU_Control::cpu_usage_timestamp</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The CPU usage timestamp contains the time point of the last heir thread change or last CPU usage update of the executing thread of this processor. </p>
<p>Protected by the scheduler lock.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__RTEMSScoreScheduler.html#ga29bb7f28ab22ddb95869cc527f2f75bf" title="Updates the heir.">_Scheduler_Update_heir()</a>, _Thread_Dispatch_update_heir() and <a class="el" href="group__RTEMSScoreThread.html#gaade6e27239f8126f2c2848e7e2ec7244" title="Updates the used cpu time for the heir and dispatches a new heir.">_Thread_Get_CPU_time_used()</a>. </dd></dl>

</div>
</div>
<a id="a96af7f4805c6b75b775f5304e6c39d99"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a96af7f4805c6b75b775f5304e6c39d99">&#9670;&nbsp;</a></span>dispatch_necessary</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile bool Per_CPU_Control::dispatch_necessary</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This is set to true when this processor needs to run the thread dispatcher. </p>
<p>It is volatile since interrupts may alter this flag.</p>
<p>This member is not protected by a lock and must be accessed only by this processor. Code (e.g. scheduler and post-switch action requests) running on another processors must use an inter-processor interrupt to set the thread dispatch necessary indicator to true.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__RTEMSScoreThread.html#gacd7c2e371fbc36ba623dffe713e6c427" title="Gets the heir of the processor and makes it executing.">_Thread_Get_heir_and_make_it_executing()</a>. </dd></dl>

</div>
</div>
<a id="ab798eb05fe75cb2f73cae76b1b209bab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab798eb05fe75cb2f73cae76b1b209bab">&#9670;&nbsp;</a></span>executing</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="struct__Thread__Control.html">_Thread_Control</a>* Per_CPU_Control::executing</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This is the thread executing on this processor. </p>
<p>This member is not protected by a lock. The only writer is this processor.</p>
<p>On SMP configurations a thread may be registered as executing on more than one processor in case a thread migration is in progress. On SMP configurations use _Thread_Is_executing_on_a_processor() to figure out if a thread context is executing on a processor. </p>

</div>
</div>
<a id="a2d2163a1bbf81d706b0018f438a9c61f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2d2163a1bbf81d706b0018f438a9c61f">&#9670;&nbsp;</a></span>Header</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structWatchdog__Header.html">Watchdog_Header</a> Per_CPU_Control::Header[<a class="el" href="group__PerCPU.html#gga43ab5440a69211901b58fa787f9cd76ea49ebdf20f41288627c23ddc6e63a20ab">PER_CPU_WATCHDOG_COUNT</a>]</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Header for watchdogs. </p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__PerCPU.html#ga43ab5440a69211901b58fa787f9cd76e" title="Per-CPU watchdog header index.">Per_CPU_Watchdog_index</a>. </dd></dl>

</div>
</div>
<a id="a04b6cae98eb4a23510c81d90caf0a196"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a04b6cae98eb4a23510c81d90caf0a196">&#9670;&nbsp;</a></span>heir</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="struct__Thread__Control.html">_Thread_Control</a>* Per_CPU_Control::heir</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This is the heir thread for this processor. </p>
<p>This member is not protected by a lock. The only writer after multitasking start is the scheduler owning this processor. It is assumed that stores to pointers are atomic on all supported SMP architectures. The CPU port specific code (inter-processor interrupt handling and _CPU_SMP_Send_interrupt()) must guarantee that this processor observes the last value written.</p>
<p>A thread can be a heir on at most one processor in the system.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__RTEMSScoreThread.html#gacd7c2e371fbc36ba623dffe713e6c427" title="Gets the heir of the processor and makes it executing.">_Thread_Get_heir_and_make_it_executing()</a>. </dd></dl>

</div>
</div>
<a id="a255ba7c5e213a7a2513ab0c5a5a29f64"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a255ba7c5e213a7a2513ab0c5a5a29f64">&#9670;&nbsp;</a></span>isr_dispatch_disable</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t Per_CPU_Control::isr_dispatch_disable</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Indicates if an ISR thread dispatch is disabled. </p>
<p>This flag is context switched with each thread. It indicates that this thread has an interrupt stack frame on its stack. By using this flag, we can avoid nesting more interrupt dispatching attempts on a previously interrupted thread's stack. </p>

</div>
</div>
<a id="aee16a4dbad577bfb87c857042f089c69"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aee16a4dbad577bfb87c857042f089c69">&#9670;&nbsp;</a></span>isr_nest_level</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t Per_CPU_Control::isr_nest_level</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This contains the current interrupt nesting level on this CPU. </p>

</div>
</div>
<a id="abafac09e8013b144149bf2b800797dc6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abafac09e8013b144149bf2b800797dc6">&#9670;&nbsp;</a></span>ticks</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t Per_CPU_Control::ticks</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Protects all watchdog operations on this processor. </p>
<p>Watchdog ticks on this processor used for monotonic clock watchdogs. </p>

</div>
</div>
<hr/>The documentation for this struct was generated from the following file:<ul>
<li>cpukit/include/rtems/score/<a class="el" href="score_2percpu_8h_source.html">percpu.h</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.15
</small></address>
</body>
</html>
